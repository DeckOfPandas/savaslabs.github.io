<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="cache-control" content="public">
  <meta http-equiv="expires" content="86400">
  
  <title>Using XHProf to profile your Drupal module | Savas Labs</title>
  
  <meta name="description" content="This is part 2 of a series on using XHProf for profiling Drupal modules.">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="canonical" href="http://savaslabs.com/2016/06/16/using-xhprof.html">
  <link rel="alternate" type="application/rss+xml" title="Savas Labs" href="http://savaslabs.com/feed.xml" />
  
  
  
  



<script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "about": "A case study of using XHProf to profile a Drupal module.",
      "articleBody": "







&lt;div class=&quot;outer-container&quot;&gt;
  &lt;div class=&quot;page--post__main&quot;&gt;
    &lt;div class=&quot;region--featured-image&quot;&gt;
      
      &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1245by700-89f5b6.jpg&quot; media=&quot;(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-959by539-89f5b6.jpg&quot; media=&quot;(min-width: 1120px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1246by700-89f5b6.jpg&quot; media=&quot;(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-746by419-89f5b6.jpg&quot; media=&quot;(min-width: 860px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg&quot; media=&quot;(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-860by484-89f5b6.jpg&quot; media=&quot;(min-width: 640px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg&quot; media=&quot;(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-640by360-89f5b6.jpg&quot; media=&quot;(min-width: 400px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-800by450-89f5b6.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg&quot; class=&quot;image--post-featured-image&quot; itemprop=&quot;image&quot; alt=&quot;Savas Labs blog&quot; &gt;
  &lt;/picture&gt;

      
    &lt;/div&gt;
    &lt;div class=&quot;region--post-header&quot;&gt;
      &lt;h1 class=&quot;region--post-header__title&quot;&gt;Using XHProf to profile your Drupal module&lt;/h1&gt;
      &lt;div class=&quot;region--post-header__post-info&quot;&gt;
        &lt;div class=&quot;region--post-header__post-info__authors&quot;&gt;
          
&lt;div class=&quot;post-author&quot;&gt;
  &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Tim Stallmann&quot; &gt;
  &lt;/picture&gt;

  &lt;p class=&quot;post-author__name&quot;&gt;&lt;/p&gt;
  &lt;p class=&quot;post-author__title&quot;&gt;&lt;/p&gt;
&lt;/div&gt;

        &lt;/div&gt;
        &lt;div class=&quot;region--post-header__post-info__stats&quot;&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-calendar&quot;&gt;&lt;/i&gt;Jun 16, 2016 &lt;/p&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;a href=&quot;/blog/tag/php/&quot;&gt;PHP&lt;/a&gt;, &lt;a href=&quot;/blog/tag/performance/&quot;&gt;Performance&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal-planet/&quot;&gt;Drupal Planet&lt;/a&gt;, &lt;a href=&quot;/blog/tag/module-development/&quot;&gt;Module Development&lt;/a&gt;&lt;/p&gt;
          
          &lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;
          
        &lt;/div&gt;
      &lt;/div&gt;
      
    &lt;/div&gt;
    &lt;article class=&quot;region--post-content&quot;&gt;
      &lt;p&gt;This is part 2 of a series on using XHProf for profiling Drupal modules.&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;Part 1: Installing XHProf&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;Part 2: Using XHProf&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;After you’ve &lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;installed XHProf&lt;/a&gt;, what’s next? How can you make use of its recommendations to tune a module or a website? Unfortunately there are no hard-and-fast rules for optimizing code to run more efficiently. What I can offer here is my own experience trying to optimize a D8 module using XHProf.&lt;/p&gt;

&lt;h3 id=&quot;understanding-an-xhprof-run-report&quot;&gt;Understanding an XHProf run report&lt;/h3&gt;

&lt;p&gt;The XHProf GUI displays the result of a given profiler run, or a group of runs. It can even compare 2 runs, but we’ll get to that in a minute. If you followed &lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;my previous post&lt;/a&gt;, you should have the &lt;code class=&quot;highlighter-rouge&quot;&gt;xhprof_html&lt;/code&gt; directory symlinked into the root web directory for your Drupal site; so visiting &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;my-local-site&amp;gt;/xhprof/&lt;/code&gt; should give you a list of all available stored run IDs, and you can click through one of those to view a specific run report.&lt;/p&gt;

&lt;p&gt;You can also go directly to a specific run report via the URL &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;my-local-site&amp;gt;/xhprof/index.php?run=&amp;lt;run-id&amp;gt;&amp;amp;source=&amp;lt;source-id&amp;gt;&lt;/code&gt; (which you should have been logging already via an &lt;code class=&quot;highlighter-rouge&quot;&gt;echo&lt;/code&gt; statement or &lt;code class=&quot;highlighter-rouge&quot;&gt;dblog&lt;/code&gt; if you followed the last post).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-page-screenshot.jpg&quot; alt=&quot;Header of an XHProf run report&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The core of the run report is a table of each function or method which your code called while it was being profiled, along with a set of statistics about that function. This allows you to understand which parts of your code are most resource-intensive, and which are being called frequently in the use case that you’re profiling. Clicking on any one of the column headers will sort the list by that metric. To understand this report, it’s helpful to have some terminology:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Incl. Wall Time&lt;/strong&gt; - The total clock time elapsed between when a function call started and when the function exited. Note that this number is not a great basis for comparisons, since it can include other processes which were taking up CPU time on your machine while the PHP code was running, from streaming music in the background to PHPStorm’s code indexing, to random web browsing.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Incl. CPU Time&lt;/strong&gt; - In contrast to wall time, CPU time tracks only the time which the CPU actually spent executing your code (or related system calls). This is a more reliable metric for comparing different runs.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Excl. Wall/CPU Time&lt;/strong&gt; - Exclusive time measurements only count time actually spent within the given method itself. They exclude the time spent in any method/function called &lt;em&gt;from&lt;/em&gt; the given function (since that time will be tracked separately).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In general, the inclusive metrics (for CPU time and memory usage) will give you a sense of what your expensive methods/functions are – these are the methods or functions that you should avoid calling if possible. In contrast, the exclusive metrics will tell you where you can potentially improve the way a given method/function is implemented. For methods which belong to Drupal Core or other contrib modules, inclusive and exclusive metrics are basically equivalent, since you don’t usually have the option of impacting the implementation details of a function unless you’re working on its code directly. Note also that because your overall parent method and any other high-level methods in your code will &lt;em&gt;always&lt;/em&gt; show up at the top of the inclusive time chart, you may have better luck really understanding where your performance hits come from by sorting by exclusive CPU time.&lt;/p&gt;

&lt;h3 id=&quot;take-a-step-back-and-plan-your-test-scenarios&quot;&gt;Take a step back and plan your test scenarios&lt;/h3&gt;

&lt;p&gt;Before digging in to optimizing your module code, you need to take a step back and think about the big picture. First, what are you optimizing for? Many optimizations involve a tradeoff between time and memory usage. Are you trying to reduce overall run-time at the expense of more memory? Is keeping the memory footprint of a given function down more important? In order to answer these questions you need to think about the overall context in which your code is running. In my case, I was optimizing a background import module which was run via cron, so the top priority was that the memory usage and number of database optimizations were low enough not to impact the user-facing site performance.&lt;/p&gt;

&lt;p&gt;Second, what use case for your code are you profiling? If this is a single method call, what arguments will be passed? If you’re profiling page loads on a website, which pages are you profiling? In order to successfully track whether the changes you’re making are having an impact on the metrics you’re concerned about, you need to be able to narrow down the possible use cases for your code into a handful of most-likely real world scenarios which you’ll actually choose to track via the profiler.&lt;/p&gt;

&lt;h3 id=&quot;keep-things-organized&quot;&gt;Keep things organized&lt;/h3&gt;

&lt;p&gt;Now it’s time to get organized. Write a simple test script so that you can easily run through all your use cases in an automated way – this is not strictly necessary, but it will save you a lot of work and potential error as you move through the process. In my case, I was testing a drush command hook, so I just wrote a bash shell script which executed the command three times in each of two different ways. For profiling page loads, I would recommend using &lt;a href=&quot;https://jmeter.apache.org/&quot;&gt;Apache JMeter&lt;/a&gt; - and you’ll need to consider whether you want to force an uncached page load by passing a random dummy query parameter. Ideally, you should be running each scenario a few times so that you can then average the results to account for any small variations in run-time.&lt;/p&gt;

&lt;p&gt;Keeping your different runs organized is probably the most important part of successfully profiling module code using XHProf! Each run has a unique run ID, but &lt;strong&gt;you&lt;/strong&gt; are solely responsible for knowing which use case scenario and which version of the codebase that run ID corresponds to. I set up a basic spreadsheet in OpenOffice where I could paste in run numbers and basic run stats to compare (but there’s almost certainly a nicer automated way to do this than what I used).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-spreadsheet.jpg&quot; alt=&quot;Screenshot of an OpenOffice spreadsheet summarizing XHProf results for various runs&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Once you have a set of run IDs for a given use case + codebase version, you can generate a &lt;em&gt;composite&lt;/em&gt; xhprof report using the query string syntax &lt;code class=&quot;highlighter-rouge&quot;&gt;http://&amp;lt;your-local-site&amp;gt;/xhprof/index.php?run=&amp;lt;first-run-id&amp;gt;,&amp;lt;second-run-id&amp;gt;,&amp;lt;third-run-id&amp;gt;&amp;amp;source=&amp;lt;source-string&amp;gt;&lt;/code&gt; Averaging out across a few runs should give you more &lt;a href=&quot;https://en.wikipedia.org/wiki/Accuracy_and_precision&quot;&gt;precise&lt;/a&gt; measurements for CPU time and memory usage, but beware that if parts of your code involve caching you may want to either throw out the first run’s results in each version of the code base, since that’s where the cache will be generated, or clear the cache between runs.&lt;/p&gt;

&lt;p&gt;Go ahead and test your run scripts to make sure that you can get a consistent baseline result at this point – if you’re seeing large differences in average total CPU times or average memory usage across different runs of the same codebase, you likely won’t be able to compare run times across &lt;em&gt;different&lt;/em&gt; versions of the code.&lt;/p&gt;

&lt;h3 id=&quot;actually-getting-to-work&quot;&gt;Actually getting to work!&lt;/h3&gt;

&lt;p&gt;After all this set-up, you should be ready to experiment and see what the impact of changes in your code base are on the metrics that you want to shift. In my case, the code I was working on used a &lt;a href=&quot;https://github.com/squix78/jsonstreamingparser&quot;&gt;streaming JSON parser class&lt;/a&gt;, and I noticed that one of the top function calls in the inital profiler report was the &lt;code class=&quot;highlighter-rouge&quot;&gt;consumeChar&lt;/code&gt; method of the parser.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-page.jpg&quot; alt=&quot;Image of XHProf profiler report with the method consumeChar highlighted in yellow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It turns out that the JSON files I was importing were pretty-printed, thus containing more whitespace than they needed to. Sine the &lt;code class=&quot;highlighter-rouge&quot;&gt;consumeChar&lt;/code&gt; method gets called on each incoming character of the input stream, that added up to a lot of unnecessary method calls in the original code. By tweaking the JSON file export code to remove the pretty print flag, I cut down the number of times this method was called from 729,099 to 499,809, saving .2 seconds of run time right off the bat.&lt;/p&gt;

&lt;p&gt;That was the major place where the XHProf profiler report gave me insights I would not have had otherwise. The rest of my optimizing experience was mostly testing out some of the common-sense optimizations I had already thought of while looking at the code – caching a table of known Entity IDs rather than querying the DB to check if an entity existed each time, using an associative array and &lt;code class=&quot;highlighter-rouge&quot;&gt;is_empty()&lt;/code&gt; &lt;a href=&quot;http://www.w3programmers.com/phps-in_array-function-is-really-slow/&quot;&gt;to replace &lt;code class=&quot;highlighter-rouge&quot;&gt;in_array()&lt;/code&gt; calls&lt;/a&gt;, cutting down on unnecessary &lt;code class=&quot;highlighter-rouge&quot;&gt;$entity-&amp;gt;save()&lt;/code&gt; operations where possible.&lt;/p&gt;

&lt;p&gt;It’s useful to mention that across the board the biggest performance hit in your Drupal code will probably be database calls, so cutting down on those wherever possible will save run-time (sometimes at the expense of memory, if you’re caching large amounts of data). Remember, also, that if DB log is enabled each logging call is a separate database operation, so use the log sparingly – or just log to &lt;code class=&quot;highlighter-rouge&quot;&gt;syslog&lt;/code&gt; and use service like &lt;a href=&quot;https://papertrailapp.com/&quot;&gt;Papertrail&lt;/a&gt; or &lt;a href=&quot;https://www.loggly.com/&quot;&gt;Loggly&lt;/a&gt; on production sites.&lt;/p&gt;

&lt;h3 id=&quot;the-final-results&quot;&gt;The final results&lt;/h3&gt;

&lt;p&gt;As the results below show, using XHProf and some thoughtful optimizations I was able to cut total run time significantly in one use case (Case 2) and slightly in another use case (Case 1). Case 1 was already running in a reasonable amount of time, so here I was mostly interested in the Case 2 numbers (assuming I didn’t make anything too much worse).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-graph.jpg&quot; alt=&quot;Bar chart comparing the run time of various runs&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;think-of-the-big-picture-part-2&quot;&gt;Think of the big picture, part 2&lt;/h3&gt;

&lt;p&gt;Remember that controlled experimental metrics are just a means to understanding and improving real-world performance (which you can also measure directly using tools like &lt;a href=&quot;https://blackfire.io/&quot;&gt;blackfire&lt;/a&gt;, but that’s another blog post). In my case, at the end of the day we decided that the most important thing was to ensure that there wasn’t a performance impact on the production site while this background import code was running; so one of the optimizations we actually ended up implementing was to force this code to run &lt;strong&gt;slower&lt;/strong&gt; by throttling &lt;code class=&quot;highlighter-rouge&quot;&gt;$entity-&amp;gt;save()&lt;/code&gt; operations to maximally 1 every 1/2 second or so, as a way to minimize the number of requests MySQL was having to respond to from the importer. XHProf is a powerful tool, but don’t lose the forest for the trees when it comes to optimization.&lt;/p&gt;

    &lt;/article&gt;
  &lt;/div&gt;
  &lt;div class=&quot;region--prev-next-links region--prev-next-links--mobile pagination&quot;&gt;
    &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2016/06/15/git-merge-conflict-strategies.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2016/06/22/user-testing.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;page--post__aside region--post-aside&quot;&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--posts&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--posts&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Blog Posts&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          

































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2017/03/06/five-drupal-8-tips-to-empower-content-authors.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/content-authoring-d8.jpg);&quot;&gt;
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Drupal&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Five Drupal 8 Tips to Empower Content Authors&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-120by122-82a418.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Oksana Cyrwus&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;Five Drupal 8 tips to make the content authoring experience more enjoyable and productive!&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2017/02/20/drupal-docker-pattern-lab.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/docker-drupal-pattern-lab.jpg);&quot;&gt;
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Drupal&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Docker and the Drupal Pattern Lab Starter Theme&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-120by120-370cd4.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Dan Murphy&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;This post demonstrates how to build a Docker image that can be used in local Drupal development with the Pattern Lab Starter theme and/or with other common front-end applications such as npm, Gulp, and Bower.&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;


















































































































































































































































































































































































































































































































































































        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--case-studies&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--case-studies&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Case Studies&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          









&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/duke-today/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/duke-today-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/duke-today/duke-today-block.jpg&quot; alt=&quot;Duke Today Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Duke Today Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Content Migration &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Docker &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;






















&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/hptn/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/hptn-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/hptn/hptn-block.jpg&quot; alt=&quot;HIV Prevention Trials Network (HPTN) Site Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;HIV Prevention Trials Network (HPTN) Site Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal 8 &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Client Server Integration &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;









































































        &lt;/div&gt;
        &lt;div class=&quot;region--post-aside__section--case-studies__cta flex-center&quot;&gt;
          &lt;a href=&quot;/results&quot; class=&quot;button--arrow--orange&quot;&gt;Our work&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;region--prev-next-links region--prev-next-links--post pagination&quot;&gt;
  &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2016/06/15/git-merge-conflict-strategies.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2016/06/22/user-testing.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;region--comments&quot;&gt;
  
  &lt;div class=&quot;expander&quot;&gt;
    &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander--hidden&quot;&gt;
      &lt;p id=&quot;comments-trigger&quot;&gt;Comments&lt;/p&gt;
    &lt;/a&gt;
    &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content region&quot;&gt;

      &lt;!-- If there are existing comments, output them here. --&gt;
      &lt;div id=&quot;region--comments__comments&quot; class=&quot;region--comments__comments&quot;&gt;&lt;/div&gt;
      &lt;form id=&quot;form--comment&quot; class=&quot;form--comment&quot;&gt;
  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--name&quot;&gt;
        &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
        &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; required&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--email&quot;&gt;
        &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; required&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--comment form--comment__row__item&quot;&gt;
      &lt;label for=&quot;comment&quot;&gt;Comment&lt;/label&gt;
      &lt;textarea name=&quot;comment&quot; id=&quot;comment&quot; rows=&quot;4&quot; required&gt;&lt;/textarea&gt;
      &lt;p class=&quot;form--comment__helptext&quot;&gt;Plain text format only please.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;slug&quot; id=&quot;slug&quot; value=&quot;/2016/06/16/using-xhprof.html&quot;&gt;
  &lt;input type=&quot;text&quot; name=&quot;url&quot; id=&quot;url&quot;&gt;

  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--nocaptcha form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__image&quot;&gt;
        &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__input&quot;&gt;
        &lt;label for=&quot;nocaptcha&quot;&gt;What type of animal is the Savas Labs logo?&lt;/label&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Hint: 3 letters long, starts with an &quot;o&quot; and ends with an &quot;l&quot;.&lt;/p&gt;
        &lt;input type=&quot;text&quot; name=&quot;nocaptcha&quot; id=&quot;nocaptcha&quot; required&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Post comment&quot; id=&quot;submit&quot; class=&quot;form--comment__submit&quot;&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;
",
      "author": {
        "@context": "http://schema.org",
        "@type": "Person",
        "name": "Tim Stallmann",
        "affiliation": "Savas Labs",
        "worksFor": "Savas Labs"
      },
      "dateCreated": "2016-06-16 00:00:00 +0000",
      "dateModified": "2016-06-16 00:00:00 +0000",
      "datePublished": "2016-06-16 00:00:00 +0000",
      "headline": "Using XHProf to profile your Drupal module",
      "inLanguage": "en-US",
      "keywords": "php, performance, drupal, drupal-planet, module-development",
      "mainEntityOfPage": "http://savaslabs.com/2016/06/16/using-xhprof.html",
      "publisher": {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Savas Labs",
        "logo": {
          "@context": "http://schema.org",
          "@type": "ImageObject",
          "description": "Savas Labs logo",
          "height": "50px",
          "url": "http://savaslabs.com/assets/img/logo.png",
          "width": "114px"
        }
      },
      "sourceOrganization": "Savas Labs",
      "text": "







&lt;div class=&quot;outer-container&quot;&gt;
  &lt;div class=&quot;page--post__main&quot;&gt;
    &lt;div class=&quot;region--featured-image&quot;&gt;
      
      &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1245by700-89f5b6.jpg&quot; media=&quot;(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-959by539-89f5b6.jpg&quot; media=&quot;(min-width: 1120px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1246by700-89f5b6.jpg&quot; media=&quot;(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-746by419-89f5b6.jpg&quot; media=&quot;(min-width: 860px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg&quot; media=&quot;(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-860by484-89f5b6.jpg&quot; media=&quot;(min-width: 640px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg&quot; media=&quot;(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-640by360-89f5b6.jpg&quot; media=&quot;(min-width: 400px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-800by450-89f5b6.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg&quot; class=&quot;image--post-featured-image&quot; itemprop=&quot;image&quot; alt=&quot;Savas Labs blog&quot; &gt;
  &lt;/picture&gt;

      
    &lt;/div&gt;
    &lt;div class=&quot;region--post-header&quot;&gt;
      &lt;h1 class=&quot;region--post-header__title&quot;&gt;Using XHProf to profile your Drupal module&lt;/h1&gt;
      &lt;div class=&quot;region--post-header__post-info&quot;&gt;
        &lt;div class=&quot;region--post-header__post-info__authors&quot;&gt;
          
&lt;div class=&quot;post-author&quot;&gt;
  &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Tim Stallmann&quot; &gt;
  &lt;/picture&gt;

  &lt;p class=&quot;post-author__name&quot;&gt;&lt;/p&gt;
  &lt;p class=&quot;post-author__title&quot;&gt;&lt;/p&gt;
&lt;/div&gt;

        &lt;/div&gt;
        &lt;div class=&quot;region--post-header__post-info__stats&quot;&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-calendar&quot;&gt;&lt;/i&gt;Jun 16, 2016 &lt;/p&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;a href=&quot;/blog/tag/php/&quot;&gt;PHP&lt;/a&gt;, &lt;a href=&quot;/blog/tag/performance/&quot;&gt;Performance&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal-planet/&quot;&gt;Drupal Planet&lt;/a&gt;, &lt;a href=&quot;/blog/tag/module-development/&quot;&gt;Module Development&lt;/a&gt;&lt;/p&gt;
          
          &lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;
          
        &lt;/div&gt;
      &lt;/div&gt;
      
    &lt;/div&gt;
    &lt;article class=&quot;region--post-content&quot;&gt;
      &lt;p&gt;This is part 2 of a series on using XHProf for profiling Drupal modules.&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;Part 1: Installing XHProf&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;Part 2: Using XHProf&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;After you’ve &lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;installed XHProf&lt;/a&gt;, what’s next? How can you make use of its recommendations to tune a module or a website? Unfortunately there are no hard-and-fast rules for optimizing code to run more efficiently. What I can offer here is my own experience trying to optimize a D8 module using XHProf.&lt;/p&gt;

&lt;h3 id=&quot;understanding-an-xhprof-run-report&quot;&gt;Understanding an XHProf run report&lt;/h3&gt;

&lt;p&gt;The XHProf GUI displays the result of a given profiler run, or a group of runs. It can even compare 2 runs, but we’ll get to that in a minute. If you followed &lt;a href=&quot;/2016/05/26/installing-xhprof.html&quot;&gt;my previous post&lt;/a&gt;, you should have the &lt;code class=&quot;highlighter-rouge&quot;&gt;xhprof_html&lt;/code&gt; directory symlinked into the root web directory for your Drupal site; so visiting &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;my-local-site&amp;gt;/xhprof/&lt;/code&gt; should give you a list of all available stored run IDs, and you can click through one of those to view a specific run report.&lt;/p&gt;

&lt;p&gt;You can also go directly to a specific run report via the URL &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;my-local-site&amp;gt;/xhprof/index.php?run=&amp;lt;run-id&amp;gt;&amp;amp;source=&amp;lt;source-id&amp;gt;&lt;/code&gt; (which you should have been logging already via an &lt;code class=&quot;highlighter-rouge&quot;&gt;echo&lt;/code&gt; statement or &lt;code class=&quot;highlighter-rouge&quot;&gt;dblog&lt;/code&gt; if you followed the last post).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-page-screenshot.jpg&quot; alt=&quot;Header of an XHProf run report&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The core of the run report is a table of each function or method which your code called while it was being profiled, along with a set of statistics about that function. This allows you to understand which parts of your code are most resource-intensive, and which are being called frequently in the use case that you’re profiling. Clicking on any one of the column headers will sort the list by that metric. To understand this report, it’s helpful to have some terminology:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Incl. Wall Time&lt;/strong&gt; - The total clock time elapsed between when a function call started and when the function exited. Note that this number is not a great basis for comparisons, since it can include other processes which were taking up CPU time on your machine while the PHP code was running, from streaming music in the background to PHPStorm’s code indexing, to random web browsing.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Incl. CPU Time&lt;/strong&gt; - In contrast to wall time, CPU time tracks only the time which the CPU actually spent executing your code (or related system calls). This is a more reliable metric for comparing different runs.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Excl. Wall/CPU Time&lt;/strong&gt; - Exclusive time measurements only count time actually spent within the given method itself. They exclude the time spent in any method/function called &lt;em&gt;from&lt;/em&gt; the given function (since that time will be tracked separately).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In general, the inclusive metrics (for CPU time and memory usage) will give you a sense of what your expensive methods/functions are – these are the methods or functions that you should avoid calling if possible. In contrast, the exclusive metrics will tell you where you can potentially improve the way a given method/function is implemented. For methods which belong to Drupal Core or other contrib modules, inclusive and exclusive metrics are basically equivalent, since you don’t usually have the option of impacting the implementation details of a function unless you’re working on its code directly. Note also that because your overall parent method and any other high-level methods in your code will &lt;em&gt;always&lt;/em&gt; show up at the top of the inclusive time chart, you may have better luck really understanding where your performance hits come from by sorting by exclusive CPU time.&lt;/p&gt;

&lt;h3 id=&quot;take-a-step-back-and-plan-your-test-scenarios&quot;&gt;Take a step back and plan your test scenarios&lt;/h3&gt;

&lt;p&gt;Before digging in to optimizing your module code, you need to take a step back and think about the big picture. First, what are you optimizing for? Many optimizations involve a tradeoff between time and memory usage. Are you trying to reduce overall run-time at the expense of more memory? Is keeping the memory footprint of a given function down more important? In order to answer these questions you need to think about the overall context in which your code is running. In my case, I was optimizing a background import module which was run via cron, so the top priority was that the memory usage and number of database optimizations were low enough not to impact the user-facing site performance.&lt;/p&gt;

&lt;p&gt;Second, what use case for your code are you profiling? If this is a single method call, what arguments will be passed? If you’re profiling page loads on a website, which pages are you profiling? In order to successfully track whether the changes you’re making are having an impact on the metrics you’re concerned about, you need to be able to narrow down the possible use cases for your code into a handful of most-likely real world scenarios which you’ll actually choose to track via the profiler.&lt;/p&gt;

&lt;h3 id=&quot;keep-things-organized&quot;&gt;Keep things organized&lt;/h3&gt;

&lt;p&gt;Now it’s time to get organized. Write a simple test script so that you can easily run through all your use cases in an automated way – this is not strictly necessary, but it will save you a lot of work and potential error as you move through the process. In my case, I was testing a drush command hook, so I just wrote a bash shell script which executed the command three times in each of two different ways. For profiling page loads, I would recommend using &lt;a href=&quot;https://jmeter.apache.org/&quot;&gt;Apache JMeter&lt;/a&gt; - and you’ll need to consider whether you want to force an uncached page load by passing a random dummy query parameter. Ideally, you should be running each scenario a few times so that you can then average the results to account for any small variations in run-time.&lt;/p&gt;

&lt;p&gt;Keeping your different runs organized is probably the most important part of successfully profiling module code using XHProf! Each run has a unique run ID, but &lt;strong&gt;you&lt;/strong&gt; are solely responsible for knowing which use case scenario and which version of the codebase that run ID corresponds to. I set up a basic spreadsheet in OpenOffice where I could paste in run numbers and basic run stats to compare (but there’s almost certainly a nicer automated way to do this than what I used).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-spreadsheet.jpg&quot; alt=&quot;Screenshot of an OpenOffice spreadsheet summarizing XHProf results for various runs&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Once you have a set of run IDs for a given use case + codebase version, you can generate a &lt;em&gt;composite&lt;/em&gt; xhprof report using the query string syntax &lt;code class=&quot;highlighter-rouge&quot;&gt;http://&amp;lt;your-local-site&amp;gt;/xhprof/index.php?run=&amp;lt;first-run-id&amp;gt;,&amp;lt;second-run-id&amp;gt;,&amp;lt;third-run-id&amp;gt;&amp;amp;source=&amp;lt;source-string&amp;gt;&lt;/code&gt; Averaging out across a few runs should give you more &lt;a href=&quot;https://en.wikipedia.org/wiki/Accuracy_and_precision&quot;&gt;precise&lt;/a&gt; measurements for CPU time and memory usage, but beware that if parts of your code involve caching you may want to either throw out the first run’s results in each version of the code base, since that’s where the cache will be generated, or clear the cache between runs.&lt;/p&gt;

&lt;p&gt;Go ahead and test your run scripts to make sure that you can get a consistent baseline result at this point – if you’re seeing large differences in average total CPU times or average memory usage across different runs of the same codebase, you likely won’t be able to compare run times across &lt;em&gt;different&lt;/em&gt; versions of the code.&lt;/p&gt;

&lt;h3 id=&quot;actually-getting-to-work&quot;&gt;Actually getting to work!&lt;/h3&gt;

&lt;p&gt;After all this set-up, you should be ready to experiment and see what the impact of changes in your code base are on the metrics that you want to shift. In my case, the code I was working on used a &lt;a href=&quot;https://github.com/squix78/jsonstreamingparser&quot;&gt;streaming JSON parser class&lt;/a&gt;, and I noticed that one of the top function calls in the inital profiler report was the &lt;code class=&quot;highlighter-rouge&quot;&gt;consumeChar&lt;/code&gt; method of the parser.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-page.jpg&quot; alt=&quot;Image of XHProf profiler report with the method consumeChar highlighted in yellow&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It turns out that the JSON files I was importing were pretty-printed, thus containing more whitespace than they needed to. Sine the &lt;code class=&quot;highlighter-rouge&quot;&gt;consumeChar&lt;/code&gt; method gets called on each incoming character of the input stream, that added up to a lot of unnecessary method calls in the original code. By tweaking the JSON file export code to remove the pretty print flag, I cut down the number of times this method was called from 729,099 to 499,809, saving .2 seconds of run time right off the bat.&lt;/p&gt;

&lt;p&gt;That was the major place where the XHProf profiler report gave me insights I would not have had otherwise. The rest of my optimizing experience was mostly testing out some of the common-sense optimizations I had already thought of while looking at the code – caching a table of known Entity IDs rather than querying the DB to check if an entity existed each time, using an associative array and &lt;code class=&quot;highlighter-rouge&quot;&gt;is_empty()&lt;/code&gt; &lt;a href=&quot;http://www.w3programmers.com/phps-in_array-function-is-really-slow/&quot;&gt;to replace &lt;code class=&quot;highlighter-rouge&quot;&gt;in_array()&lt;/code&gt; calls&lt;/a&gt;, cutting down on unnecessary &lt;code class=&quot;highlighter-rouge&quot;&gt;$entity-&amp;gt;save()&lt;/code&gt; operations where possible.&lt;/p&gt;

&lt;p&gt;It’s useful to mention that across the board the biggest performance hit in your Drupal code will probably be database calls, so cutting down on those wherever possible will save run-time (sometimes at the expense of memory, if you’re caching large amounts of data). Remember, also, that if DB log is enabled each logging call is a separate database operation, so use the log sparingly – or just log to &lt;code class=&quot;highlighter-rouge&quot;&gt;syslog&lt;/code&gt; and use service like &lt;a href=&quot;https://papertrailapp.com/&quot;&gt;Papertrail&lt;/a&gt; or &lt;a href=&quot;https://www.loggly.com/&quot;&gt;Loggly&lt;/a&gt; on production sites.&lt;/p&gt;

&lt;h3 id=&quot;the-final-results&quot;&gt;The final results&lt;/h3&gt;

&lt;p&gt;As the results below show, using XHProf and some thoughtful optimizations I was able to cut total run time significantly in one use case (Case 2) and slightly in another use case (Case 1). Case 1 was already running in a reasonable amount of time, so here I was mostly interested in the Case 2 numbers (assuming I didn’t make anything too much worse).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/xhprof-results-graph.jpg&quot; alt=&quot;Bar chart comparing the run time of various runs&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;think-of-the-big-picture-part-2&quot;&gt;Think of the big picture, part 2&lt;/h3&gt;

&lt;p&gt;Remember that controlled experimental metrics are just a means to understanding and improving real-world performance (which you can also measure directly using tools like &lt;a href=&quot;https://blackfire.io/&quot;&gt;blackfire&lt;/a&gt;, but that’s another blog post). In my case, at the end of the day we decided that the most important thing was to ensure that there wasn’t a performance impact on the production site while this background import code was running; so one of the optimizations we actually ended up implementing was to force this code to run &lt;strong&gt;slower&lt;/strong&gt; by throttling &lt;code class=&quot;highlighter-rouge&quot;&gt;$entity-&amp;gt;save()&lt;/code&gt; operations to maximally 1 every 1/2 second or so, as a way to minimize the number of requests MySQL was having to respond to from the importer. XHProf is a powerful tool, but don’t lose the forest for the trees when it comes to optimization.&lt;/p&gt;

    &lt;/article&gt;
  &lt;/div&gt;
  &lt;div class=&quot;region--prev-next-links region--prev-next-links--mobile pagination&quot;&gt;
    &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2016/06/15/git-merge-conflict-strategies.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2016/06/22/user-testing.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;page--post__aside region--post-aside&quot;&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--posts&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--posts&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Blog Posts&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          

































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2017/03/06/five-drupal-8-tips-to-empower-content-authors.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/content-authoring-d8.jpg);&quot;&gt;
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Drupal&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Five Drupal 8 Tips to Empower Content Authors&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-120by122-82a418.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Oksana Cyrwus&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;Five Drupal 8 tips to make the content authoring experience more enjoyable and productive!&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2017/02/20/drupal-docker-pattern-lab.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/docker-drupal-pattern-lab.jpg);&quot;&gt;
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Drupal&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Docker and the Drupal Pattern Lab Starter Theme&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-120by120-370cd4.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Dan Murphy&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;This post demonstrates how to build a Docker image that can be used in local Drupal development with the Pattern Lab Starter theme and/or with other common front-end applications such as npm, Gulp, and Bower.&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;


















































































































































































































































































































































































































































































































































































        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--case-studies&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--case-studies&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Case Studies&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          









&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/duke-today/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/duke-today-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/duke-today/duke-today-block.jpg&quot; alt=&quot;Duke Today Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Duke Today Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Content Migration &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Docker &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;






















&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/hptn/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/hptn-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/hptn/hptn-block.jpg&quot; alt=&quot;HIV Prevention Trials Network (HPTN) Site Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;HIV Prevention Trials Network (HPTN) Site Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal 8 &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Client Server Integration &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;









































































        &lt;/div&gt;
        &lt;div class=&quot;region--post-aside__section--case-studies__cta flex-center&quot;&gt;
          &lt;a href=&quot;/results&quot; class=&quot;button--arrow--orange&quot;&gt;Our work&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;region--prev-next-links region--prev-next-links--post pagination&quot;&gt;
  &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2016/06/15/git-merge-conflict-strategies.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2016/06/22/user-testing.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;region--comments&quot;&gt;
  
  &lt;div class=&quot;expander&quot;&gt;
    &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander--hidden&quot;&gt;
      &lt;p id=&quot;comments-trigger&quot;&gt;Comments&lt;/p&gt;
    &lt;/a&gt;
    &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content region&quot;&gt;

      &lt;!-- If there are existing comments, output them here. --&gt;
      &lt;div id=&quot;region--comments__comments&quot; class=&quot;region--comments__comments&quot;&gt;&lt;/div&gt;
      &lt;form id=&quot;form--comment&quot; class=&quot;form--comment&quot;&gt;
  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--name&quot;&gt;
        &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
        &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; required&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--email&quot;&gt;
        &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; required&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--comment form--comment__row__item&quot;&gt;
      &lt;label for=&quot;comment&quot;&gt;Comment&lt;/label&gt;
      &lt;textarea name=&quot;comment&quot; id=&quot;comment&quot; rows=&quot;4&quot; required&gt;&lt;/textarea&gt;
      &lt;p class=&quot;form--comment__helptext&quot;&gt;Plain text format only please.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;slug&quot; id=&quot;slug&quot; value=&quot;/2016/06/16/using-xhprof.html&quot;&gt;
  &lt;input type=&quot;text&quot; name=&quot;url&quot; id=&quot;url&quot;&gt;

  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--nocaptcha form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__image&quot;&gt;
        &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__input&quot;&gt;
        &lt;label for=&quot;nocaptcha&quot;&gt;What type of animal is the Savas Labs logo?&lt;/label&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Hint: 3 letters long, starts with an &quot;o&quot; and ends with an &quot;l&quot;.&lt;/p&gt;
        &lt;input type=&quot;text&quot; name=&quot;nocaptcha&quot; id=&quot;nocaptcha&quot; required&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Post comment&quot; id=&quot;submit&quot; class=&quot;form--comment__submit&quot;&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;
",
      "url": "http://savaslabs.com/2016/06/16/using-xhprof.html"
    }
  </script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61514316-1', 'auto');
  ga('send', 'pageview');

</script>

  <script>
    !function(e){"use strict";var t=function(t,n,r){function o(e){return i.body?e():void setTimeout(function(){o(e)})}function l(){d.addEventListener&&d.removeEventListener("load",l),d.media=r||"all"}var a,i=e.document,d=i.createElement("link");if(n)a=n;else{var s=(i.body||i.getElementsByTagName("head")[0]).childNodes;a=s[s.length-1]}var u=i.styleSheets;d.rel="stylesheet",d.href=t,d.media="only x",o(function(){a.parentNode.insertBefore(d,n?a:a.nextSibling)});var f=function(e){for(var t=d.href,n=u.length;n--;)if(u[n].href===t)return e();setTimeout(function(){f(e)})};return d.addEventListener&&d.addEventListener("load",l),d.onloadcssdefined=f,f(l),d};"undefined"!=typeof exports?exports.loadCSS=t:e.loadCSS=t}("undefined"!=typeof global?global:this),function(e){if(e.loadCSS){var t=loadCSS.relpreload={};if(t.support=function(){try{return e.document.createElement("link").relList.supports("preload")}catch(t){}},t.poly=function(){for(var t=e.document.getElementsByTagName("link"),n=0;n<t.length;n++){var r=t[n];"preload"===r.rel&&"style"===r.getAttribute("as")&&(e.loadCSS(r.href,r),r.rel=null)}},!t.support()){t.poly();var n=e.setInterval(t.poly,300);e.addEventListener&&e.addEventListener("load",function(){e.clearInterval(n)})}}}(this);
    loadCSS('/assets/styles/main.css');
    loadCSS('https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700|Roboto+Slab:300,400');
  </script>
  
  <style>html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.bg-magenta{background-color:#9e023b}.bg-orange{background-color:#d3281b}.bg-eggshell{background-color:#fff8f3}.bg-teal{background-color:#0a5365}.bg-dark-teal{background-color:#06282d}.bg-grey{background-color:#565d5e}.bg-light-grey{background-color:#bdc2c3}.bg-light-teal{background-color:#f3f6f7}.bg-light-orange{background-color:#f29c96}.bg-purple{background-color:#501888}.bg-pink{background-color:#d33682}.bg-yellow{background-color:#f2a324}.bg-green{background-color:#055c2b}.c-magenta{color:#9e023b}.c-orange{color:#d3281b}.c-eggshell{color:#fff8f3}.c-teal{color:#0a5365}.c-dark-teal{color:#06282d}.c-grey{color:#565d5e}.c-light-grey{color:#bdc2c3}.c-light-teal{color:#f3f6f7}.c-light-orange{color:#f29c96}.c-purple{color:#501888}.c-pink{color:#d33682}.c-yellow{color:#f2a324}.c-green{color:#055c2b}[type=button],[type=reset],[type=submit],button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0a5365;border:0;border-radius:3px;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em;-webkit-font-smoothing:antialiased;font-weight:600;line-height:1;padding:.75em 1em;text-align:center;text-decoration:none;transition:background-color 150ms ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}[type=button]:focus,[type=button]:hover,[type=reset]:focus,[type=reset]:hover,[type=submit]:focus,[type=submit]:hover,button:focus,button:hover{background-color:#084251;color:#fff}[type=button]:disabled,[type=reset]:disabled,[type=submit]:disabled,button:disabled{cursor:not-allowed;opacity:.5}[type=button]:disabled:hover,[type=reset]:disabled:hover,[type=submit]:disabled:hover,button:disabled:hover{background-color:#0a5365}fieldset{background-color:transparent;border:0;margin:0;padding:0}legend{font-weight:600;margin-bottom:.375em;padding:0}label{display:block;font-weight:600;margin-bottom:.375em}input,select,textarea{display:block;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em}[type=color],[type=date],[type=datetime-local],[type=datetime],[type=email],[type=month],[type=number],[type=password],[type=search],[type=tel],[type=text],[type=time],[type=url],[type=week],input:not([type]),textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #ddd;border-radius:3px;box-shadow:inset 0 1px 3px rgba(0,0,0,.06);box-sizing:border-box;margin-bottom:.75em;padding:.33333em;transition:border-color 150ms ease;width:100%}[type=color]:hover,[type=date]:hover,[type=datetime-local]:hover,[type=datetime]:hover,[type=email]:hover,[type=month]:hover,[type=number]:hover,[type=password]:hover,[type=search]:hover,[type=tel]:hover,[type=text]:hover,[type=time]:hover,[type=url]:hover,[type=week]:hover,input:not([type]):hover,textarea:hover{border-color:#b1b1b1}[type=color]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=datetime]:focus,[type=email]:focus,[type=month]:focus,[type=number]:focus,[type=password]:focus,[type=search]:focus,[type=tel]:focus,[type=text]:focus,[type=time]:focus,[type=url]:focus,[type=week]:focus,input:not([type]):focus,textarea:focus{border-color:#0a5365;box-shadow:inset 0 1px 3px rgba(0,0,0,.06),0 0 5px rgba(18,89,169,.7);outline:0}[type=color]:disabled,[type=date]:disabled,[type=datetime-local]:disabled,[type=datetime]:disabled,[type=email]:disabled,[type=month]:disabled,[type=number]:disabled,[type=password]:disabled,[type=search]:disabled,[type=tel]:disabled,[type=text]:disabled,[type=time]:disabled,[type=url]:disabled,[type=week]:disabled,input:not([type]):disabled,textarea:disabled{background-color:#f2f2f2;cursor:not-allowed}[type=color]:disabled:hover,[type=date]:disabled:hover,[type=datetime-local]:disabled:hover,[type=datetime]:disabled:hover,[type=email]:disabled:hover,[type=month]:disabled:hover,[type=number]:disabled:hover,[type=password]:disabled:hover,[type=search]:disabled:hover,[type=tel]:disabled:hover,[type=text]:disabled:hover,[type=time]:disabled:hover,[type=url]:disabled:hover,[type=week]:disabled:hover,input:not([type]):disabled:hover,textarea:disabled:hover{border:1px solid #ddd}[type=color]::-webkit-input-placeholder,[type=date]::-webkit-input-placeholder,[type=datetime-local]::-webkit-input-placeholder,[type=datetime]::-webkit-input-placeholder,[type=email]::-webkit-input-placeholder,[type=month]::-webkit-input-placeholder,[type=number]::-webkit-input-placeholder,[type=password]::-webkit-input-placeholder,[type=search]::-webkit-input-placeholder,[type=tel]::-webkit-input-placeholder,[type=text]::-webkit-input-placeholder,[type=time]::-webkit-input-placeholder,[type=url]::-webkit-input-placeholder,[type=week]::-webkit-input-placeholder,input:not([type])::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#858585}[type=color]:-ms-input-placeholder,[type=date]:-ms-input-placeholder,[type=datetime-local]:-ms-input-placeholder,[type=datetime]:-ms-input-placeholder,[type=email]:-ms-input-placeholder,[type=month]:-ms-input-placeholder,[type=number]:-ms-input-placeholder,[type=password]:-ms-input-placeholder,[type=search]:-ms-input-placeholder,[type=tel]:-ms-input-placeholder,[type=text]:-ms-input-placeholder,[type=time]:-ms-input-placeholder,[type=url]:-ms-input-placeholder,[type=week]:-ms-input-placeholder,input:not([type]):-ms-input-placeholder,textarea:-ms-input-placeholder{color:#858585}[type=color]::placeholder,[type=date]::placeholder,[type=datetime-local]::placeholder,[type=datetime]::placeholder,[type=email]::placeholder,[type=month]::placeholder,[type=number]::placeholder,[type=password]::placeholder,[type=search]::placeholder,[type=tel]::placeholder,[type=text]::placeholder,[type=time]::placeholder,[type=url]::placeholder,[type=week]::placeholder,input:not([type])::placeholder,textarea::placeholder{color:#858585}textarea{resize:vertical}[type=checkbox],[type=radio]{display:inline;margin-right:.375em}[type=file]{margin-bottom:.75em;width:100%}select{margin-bottom:.75em;width:100%}html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}body,html{height:100%}ol,ul{list-style-type:none;margin:0;padding:0}dl{margin:0}dt{font-weight:600;margin:0}dd{margin:0}figure{margin:0}img,picture{margin:0;max-width:100%}table{border-collapse:collapse;margin:.75em 0;table-layout:fixed;width:100%}th{border-bottom:1px solid #a6a6a6;font-weight:600;padding:.75em 0;text-align:left}td{border-bottom:1px solid #ddd;padding:.75em 0}td,th,tr{vertical-align:middle}body{color:#333;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em;line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1.25em;line-height:1.2;margin:0 0 .75em}p{margin:0 0 .75em}a{color:#0a5365;text-decoration:none;transition:color 150ms ease}a:active,a:focus,a:hover{color:#083e4c}hr{border-bottom:1px solid #ddd;border-left:0;border-right:0;border-top:0;margin:1em 0}.nowrap{white-space:nowrap}.region{max-width:1440px;margin-left:auto;margin-right:auto;clear:both;max-width:1400px;padding:1.5em 1em;vertical-align:baseline}.region::after{clear:both;content:"";display:block}@media only screen and (min-width:640px){.region{padding:3em 1em}}@media only screen and (min-width:1440px){.region{padding:3em 0}}.region--full-width{clear:both;margin:1.5em 0}@media only screen and (min-width:640px){.region--full-width{margin:3em 0}}.region--full-width .region--full-width__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;margin:0 auto;max-width:1400px;vertical-align:baseline}.region--full-width .region--full-width__wrapper::after{clear:both;content:"";display:block}.outer-container{max-width:1440px;margin-left:auto;margin-right:auto;width:100%}.outer-container::after{clear:both;content:"";display:block}.flex-center{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}h1,h2,h3,h4,h5,h6{color:#0a5365;font-family:"Roboto Slab",Verdana,sans-serif;font-weight:300}.h1,h1{font-size:2.074em}@media only screen and (min-width:640px){.h1,h1{font-size:2.441em}}.h2,h2{font-size:1.728em}@media only screen and (min-width:640px){.h2,h2{font-size:1.953em}}.h3,h3{font-size:1.44em}@media only screen and (min-width:640px){.h3,h3{font-size:1.563em}}.h4,h4{font-size:1.2em}@media only screen and (min-width:640px){.h4,h4{font-size:1.25em}}.h5,h5{font-size:1.1em}.h6,h6{font-size:1em}.heading--bold{font-weight:700}.heading--sans-serif{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif}article h2,article h3,article h4,article h5,article h6{margin-top:1.5em}article h2::after{background:#0a5365;content:'';display:block;height:1px;margin:10px 0 .5em;width:30px}.page--post__main h1,.page--post__main h2,.page--post__main h3,.page--post__main h4,.page--post__main h5,.page--post__main h6{color:#9e023b}a{color:#0a5365;transition:all .1s linear}a:focus,a:hover{color:#0f7993}.link--light{color:#fff8f3}.link--light:focus,.link--light:hover{color:#d3281b}.link--light--no-hover{color:#fff8f3}.link--light--no-hover:focus,.link--light--no-hover:hover{color:#fff8f3}ul{list-style-type:square}ol{list-style-type:decimal}ol,ul{margin-bottom:1em;margin-left:2em}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}ol ol,ol ol li,ol ul,ol ul li,ul ol,ul ol li,ul ul,ul ul li{font-size:1em!important}body{color:#565d5e;font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif}.paragraph--loud{font-size:1.25em}.paragraph--louder{font-size:1.563em}.paragraph--loud--responsive{font-size:1.25em}@media only screen and (min-width:860px){.paragraph--loud--responsive{font-size:1.563em}}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-angle-double-down:before{content:""}.fa-angle-right:before{content:""}.fa-building-o:before{content:""}.fa-circle:before{content:""}.fa-comment:before{content:""}.fa-comment-o:before{content:""}.fa-drupal:before{content:""}.fa-envelope-o:before{content:""}.fa-file-text:before{content:""}.fa-github:before{content:""}.fa-globe:before{content:""}.fa-linkedin:before{content:""}.fa-long-arrow-right:before{content:""}.fa-phone:before{content:""}.fa-stack-exchange:before{content:""}.fa-tags:before{content:""}.fa-twitter:before{content:""}.header-navigation{float:none;z-index:9999999}@media only screen and (min-width:640px){.header-navigation{clear:none;float:right;padding-bottom:0;padding-right:.75em}}.header-navigation__menu{clear:both;display:none;margin:0 auto;overflow:visible;padding:0;-webkit-transform-style:preserve-3d;width:100%;z-index:9999}@media only screen and (min-width:640px){.header-navigation__menu{display:inline;margin:0;padding:0}}.header-navigation__menu.show{display:block}.header-navigation__mobile-menu-link{color:#06282d;display:block;float:right;font-weight:700;line-height:5.25em;margin:0;padding-right:1em;text-transform:uppercase}@media only screen and (min-width:640px){.header-navigation__mobile-menu-link{display:none}}.header-navigation__mobile-menu-link:focus,.header-navigation__mobile-menu-link:hover{color:#9e023b}.header-navigation__menu-link{display:block;line-height:2.625em;overflow:hidden;padding-right:.8em;text-align:right;width:100%;z-index:9999}@media only screen and (min-width:640px){.header-navigation__menu-link{display:inline;line-height:5.25em;margin-right:-5px;padding-right:0;width:auto}.header-navigation__menu-link:last-child{margin-right:0}}.header-navigation__menu-link:last-child:not(.header-navigation__active-nav-item):not(:hover):not(:focus) a{color:#9e023b}.header-navigation__menu-link:last-child a{font-weight:700}.header-navigation__menu-link a{color:#06282d;display:inline-block;font-weight:400;text-transform:uppercase;transition:background-color ease .2s}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{color:#9e023b}@media only screen and (min-width:640px){.header-navigation__menu-link a{padding-left:.75em;padding-right:.75em}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{background-color:rgba(158,2,59,.9);color:#fff}}.header-navigation__active-nav-item{background-color:rgba(158,2,59,.9)}@media only screen and (min-width:640px){.header-navigation__active-nav-item{background-color:rgba(255,255,255,.9);color:#06282d}}.header-navigation__active-nav-item a{color:#fff}@media only screen and (min-width:640px){.header-navigation__active-nav-item a{background-color:rgba(158,2,59,.9)}}.savas-logo{display:block;height:5.25em;padding:1.5em 0}.savas-logo--main{display:block;height:2.25em;margin:1.5em 0;padding:0;width:5.125em}.tile{position:relative}.tile .tile__hover{-ms-flex-align:center;align-items:center;color:#fff8f3;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;left:0;opacity:0;padding:1em;position:absolute;text-align:center;top:0;transition:all .3s ease;width:100%;z-index:1}.tile .tile__hover p:first-child{margin-bottom:1.5em;max-width:15em}.tile .tile__hover .link--cta{margin-bottom:0;transition:all .2s ease-in-out}.tile:focus .tile__hover,.tile:hover .tile__hover{opacity:1}.tile:focus .tile--blog--detailed__primary-tag,.tile:hover .tile--blog--detailed__primary-tag{margin-left:1em}.tile:focus .tile--blog__post-title .tile--blog--detailed__author-bg,.tile:hover .tile--blog__post-title .tile--blog--detailed__author-bg{bottom:0;right:0}@media only screen and (min-width:1120px){.tile p{font-size:1.1em}}.tile--title--blog{padding:2em}.tile--blog .tile--blog__content{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;position:relative;z-index:0}.tile--blog .tile--blog__content>div{height:150px}@media only screen and (min-width:450px){.tile--blog .tile--blog__content>div{height:200px}}@media only screen and (min-width:640px){.tile--blog .tile--blog__content>div{height:150px}}@media only screen and (min-width:1120px){.tile--blog .tile--blog__content>div{height:175px}}@media only screen and (min-width:1440px){.tile--blog .tile--blog__content>div{height:200px}}.tile--blog .tile--blog__content .tile--blog__image{background-position:center center;background-repeat:no-repeat;background-size:cover;width:100%}.tile--blog .tile--blog__content .tile--blog__post-title{-ms-flex-align:center;align-items:center;color:#06282d;display:-ms-flexbox;display:flex;padding:1em;width:100%}.tile--blog .tile--blog__content .tile--blog__post-title p::before{background:#9e023b;content:'';display:block;height:1px;margin:10px 0 .5em;width:30px}.tile--blog .tile--blog__hover{height:300px}@media only screen and (min-width:450px){.tile--blog .tile--blog__hover{height:400px}}@media only screen and (min-width:640px){.tile--blog .tile--blog__hover{height:300px}}@media only screen and (min-width:1120px){.tile--blog .tile--blog__hover{height:350px}}@media only screen and (min-width:1440px){.tile--blog .tile--blog__hover{height:400px}}.tile--blog--detailed{-ms-flex-preferred-size:auto;flex-basis:auto;-ms-flex-positive:0;flex-grow:0}.tile--blog--detailed .tile--blog__image{position:relative}.tile--blog--detailed .tile--blog__image .tile--blog--detailed__primary-tag{background-color:#0a5365;bottom:1em;color:#fff8f3;font-size:.9em;font-style:italic;left:-1em;margin-bottom:0;padding:.25em 1em;position:absolute;text-transform:uppercase;transition:all .3s ease-in-out}.tile--blog--detailed .tile--blog__post-title{position:relative;z-index:99}.tile--blog--detailed .tile--blog__post-title p{padding-right:44px}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author{bottom:0;position:absolute;right:0;z-index:999}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author img{display:block;filter:grayscale(100%);height:60px;width:60px}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author-bg{background-color:rgba(10,83,101,.2);bottom:-8px;height:60px;position:absolute;right:-8px;transition:all .3s ease-in-out;width:60px}.tile--blog--detailed .tile--blog__hover{margin:1em;width:calc(100% - 2em)}.region--header{background-color:rgba(255,255,255,.9);min-height:5.25em;width:100%;z-index:999}.region--header a{text-decoration:none}.region--header .region--header__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;position:relative;z-index:9999}.region--header .region--header__wrapper::after{clear:both;content:"";display:block}.region--header .region--header__logo{display:inline-block;float:left;height:5.25em;margin:0;padding-left:1em}@media only screen and (min-width:640px){.region--header .region--header__logo{padding-left:1.5em;padding-right:1em}}.region--post-aside{margin-top:3em}@media only screen and (min-width:860px){.region--post-aside{float:left;margin-top:0;width:33.333%}}.region--post-aside .region--post-aside__section{padding:3em 1em}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section{padding:3em 1.5em}}@media only screen and (min-width:1120px){.region--post-aside .region--post-aside__section{padding:3em 2em}}.region--post-aside .region--post-aside__section__wrapper--posts{border-bottom:solid 1px #bdc2c3}.region--post-aside .region--post-aside__section__wrapper--posts .tile--blog__hover{margin:0;width:100%}@media only screen and (min-width:640px){.region--post-aside .region--post-aside__section__items{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section__items{display:block}}.region--post-aside .region--post-aside__section__items>div{margin-bottom:1em}@media only screen and (min-width:640px){.region--post-aside .region--post-aside__section__items>div{-ms-flex-positive:0;flex-grow:0;margin-bottom:0;width:48.5%}}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section__items>div{margin-bottom:1em;width:100%}}.region--post-aside h2{font-weight:400}.region--post-aside .region--post-aside__section--case-studies .case-study-block__title{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif;font-weight:400}.region--post-aside .region--post-aside__section--case-studies__cta{margin-top:3em}.page--post .region--header{border-bottom:solid 1px #bdc2c3}@media only screen and (min-width:860px){.page--post .page--post__main{border-right:solid 1px #bdc2c3;float:left;padding-bottom:3em;width:66.666%}}.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding:0 1em}@media only screen and (min-width:640px){.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding:0 1.5em}}@media only screen and (min-width:1120px){.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding-right:2em}}.page--post .page--post__main .region--post-header h1{font-weight:400}.page--post .page--post__main .region--post-content{color:#06282d}.page--post .page--post__main .region--post-content h2,.page--post .page--post__main .region--post-content h3,.page--post .page--post__main .region--post-content h4,.page--post .page--post__main .region--post-content h5,.page--post .page--post__main .region--post-content h6{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif;font-weight:400}.page--post .page--post__main .region--post-content .caption{color:#565d5e;font-style:italic}.page--post .page--post__aside{border-bottom:solid 1px #bdc2c3;margin-top:0}@media only screen and (min-width:860px){.page--post .page--post__aside{border-bottom:0;border-top:0}}.page--post .region--prev-next-links--post{clear:both;display:none}@media only screen and (min-width:860px){.page--post .region--prev-next-links--post{display:-ms-flexbox;display:flex}}.page--post .region--prev-next-links--mobile{display:-ms-flexbox;display:flex;margin-top:3em}@media only screen and (min-width:860px){.page--post .region--prev-next-links--mobile{display:none}}.page--post .region--footer{margin-top:0}.region--post-header{margin:3em 0}.region--post-header .region--post-header__title{margin-bottom:1.5em}@media only screen and (min-width:640px){.region--post-header__post-info{display:-ms-flexbox;display:flex}.region--post-header__post-info>div{width:50%}}.region--post-header__post-info p{font-style:italic;margin-bottom:.25em}.region--post-header__post-info i{margin-right:.5em}.region--post-header__post-info .post-author:not(:first-child){clear:left;margin-top:1em}.region--post-header__post-info .post-author picture{float:left;margin-right:1em}.region--post-header__post-info .post-author picture img{display:block;height:60px;width:60px}.region--post-header__post-info .region--post-header__post-info__stats{clear:both;margin-top:1.5em}@media only screen and (min-width:640px){.region--post-header__post-info .region--post-header__post-info__stats{clear:none;margin-top:0}}.region--post-header__post-info .region--post-header__post-info__stats p{display:inline-block;margin-right:1em}@media only screen and (min-width:640px){.region--post-header__post-info .region--post-header__post-info__stats p{display:block;margin-right:0}}</style>
  
</head>


  <body class="page--post">

    <header class="region--header" role="banner">
  <div class="region--header__wrapper">

    <a href="/" class="region--header__logo">
      <img src="http://savaslabs.com/assets/img/logo.svg" alt="Savas Labs logo" class="savas-logo savas-logo--main">
    </a>

    <!-- Mobile menu button. -->
<a href="/" id="js-mobile-menu" class="header-navigation__mobile-menu-link">MENU</a>

<!-- Main menu. -->
<nav role="navigation" class="header-navigation">
  <ul id="js-navigation-menu" class="header-navigation__menu show">
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/company">Company</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/results">Results</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/services">Services</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/blog">Blog</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/contact">Contact</a>
      </li>
    
  </ul>
</nav>

  </div>
</header>

    <div class="page-content">
      







<div class="outer-container">
  <div class="page--post__main">
    <div class="region--featured-image">
      
      <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1245by700-89f5b6.jpg" media="(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-959by539-89f5b6.jpg" media="(min-width: 1120px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1246by700-89f5b6.jpg" media="(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-746by419-89f5b6.jpg" media="(min-width: 860px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg" media="(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-860by484-89f5b6.jpg" media="(min-width: 640px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1244by700-89f5b6.jpg" media="(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-640by360-89f5b6.jpg" media="(min-width: 400px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-800by450-89f5b6.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg">
    <img src="http://savaslabs.com/assets/processed-img/blog/default-400by225-89f5b6.jpg" class="image--post-featured-image" itemprop="image" alt="Savas Labs blog" >
  </picture>

      
    </div>
    <div class="region--post-header">
      <h1 class="region--post-header__title">Using XHProf to profile your Drupal module</h1>
      <div class="region--post-header__post-info">
        <div class="region--post-header__post-info__authors">
          
<div class="post-author">
  <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg" class="image--team-blog-tile" itemprop="image" alt="Tim Stallmann" >
  </picture>

  <p class="post-author__name"></p>
  <p class="post-author__title"></p>
</div>

        </div>
        <div class="region--post-header__post-info__stats">
          <p><i class="fa fa-calendar"></i>Jun 16, 2016 </p>
          <p><i class="fa fa-tags"></i><a href="/blog/tag/php/">PHP</a>, <a href="/blog/tag/performance/">Performance</a>, <a href="/blog/tag/drupal/">Drupal</a>, <a href="/blog/tag/drupal-planet/">Drupal Planet</a>, <a href="/blog/tag/module-development/">Module Development</a></p>
          
          <p><span id="comment-count"></span></p>
          
        </div>
      </div>
      
    </div>
    <article class="region--post-content">
      <p>This is part 2 of a series on using XHProf for profiling Drupal modules.</p>

<table>
  <tbody>
    <tr>
      <td><a href="/2016/05/26/installing-xhprof.html">Part 1: Installing XHProf</a></td>
      <td><strong>Part 2: Using XHProf</strong></td>
    </tr>
  </tbody>
</table>

<p>After you’ve <a href="/2016/05/26/installing-xhprof.html">installed XHProf</a>, what’s next? How can you make use of its recommendations to tune a module or a website? Unfortunately there are no hard-and-fast rules for optimizing code to run more efficiently. What I can offer here is my own experience trying to optimize a D8 module using XHProf.</p>

<h3 id="understanding-an-xhprof-run-report">Understanding an XHProf run report</h3>

<p>The XHProf GUI displays the result of a given profiler run, or a group of runs. It can even compare 2 runs, but we’ll get to that in a minute. If you followed <a href="/2016/05/26/installing-xhprof.html">my previous post</a>, you should have the <code class="highlighter-rouge">xhprof_html</code> directory symlinked into the root web directory for your Drupal site; so visiting <code class="highlighter-rouge">&lt;my-local-site&gt;/xhprof/</code> should give you a list of all available stored run IDs, and you can click through one of those to view a specific run report.</p>

<p>You can also go directly to a specific run report via the URL <code class="highlighter-rouge">&lt;my-local-site&gt;/xhprof/index.php?run=&lt;run-id&gt;&amp;source=&lt;source-id&gt;</code> (which you should have been logging already via an <code class="highlighter-rouge">echo</code> statement or <code class="highlighter-rouge">dblog</code> if you followed the last post).</p>

<p><img src="/assets/img/blog/xhprof-results-page-screenshot.jpg" alt="Header of an XHProf run report" /></p>

<p>The core of the run report is a table of each function or method which your code called while it was being profiled, along with a set of statistics about that function. This allows you to understand which parts of your code are most resource-intensive, and which are being called frequently in the use case that you’re profiling. Clicking on any one of the column headers will sort the list by that metric. To understand this report, it’s helpful to have some terminology:</p>

<ul>
  <li><strong>Incl. Wall Time</strong> - The total clock time elapsed between when a function call started and when the function exited. Note that this number is not a great basis for comparisons, since it can include other processes which were taking up CPU time on your machine while the PHP code was running, from streaming music in the background to PHPStorm’s code indexing, to random web browsing.</li>
  <li><strong>Incl. CPU Time</strong> - In contrast to wall time, CPU time tracks only the time which the CPU actually spent executing your code (or related system calls). This is a more reliable metric for comparing different runs.</li>
  <li><strong>Excl. Wall/CPU Time</strong> - Exclusive time measurements only count time actually spent within the given method itself. They exclude the time spent in any method/function called <em>from</em> the given function (since that time will be tracked separately).</li>
</ul>

<p>In general, the inclusive metrics (for CPU time and memory usage) will give you a sense of what your expensive methods/functions are – these are the methods or functions that you should avoid calling if possible. In contrast, the exclusive metrics will tell you where you can potentially improve the way a given method/function is implemented. For methods which belong to Drupal Core or other contrib modules, inclusive and exclusive metrics are basically equivalent, since you don’t usually have the option of impacting the implementation details of a function unless you’re working on its code directly. Note also that because your overall parent method and any other high-level methods in your code will <em>always</em> show up at the top of the inclusive time chart, you may have better luck really understanding where your performance hits come from by sorting by exclusive CPU time.</p>

<h3 id="take-a-step-back-and-plan-your-test-scenarios">Take a step back and plan your test scenarios</h3>

<p>Before digging in to optimizing your module code, you need to take a step back and think about the big picture. First, what are you optimizing for? Many optimizations involve a tradeoff between time and memory usage. Are you trying to reduce overall run-time at the expense of more memory? Is keeping the memory footprint of a given function down more important? In order to answer these questions you need to think about the overall context in which your code is running. In my case, I was optimizing a background import module which was run via cron, so the top priority was that the memory usage and number of database optimizations were low enough not to impact the user-facing site performance.</p>

<p>Second, what use case for your code are you profiling? If this is a single method call, what arguments will be passed? If you’re profiling page loads on a website, which pages are you profiling? In order to successfully track whether the changes you’re making are having an impact on the metrics you’re concerned about, you need to be able to narrow down the possible use cases for your code into a handful of most-likely real world scenarios which you’ll actually choose to track via the profiler.</p>

<h3 id="keep-things-organized">Keep things organized</h3>

<p>Now it’s time to get organized. Write a simple test script so that you can easily run through all your use cases in an automated way – this is not strictly necessary, but it will save you a lot of work and potential error as you move through the process. In my case, I was testing a drush command hook, so I just wrote a bash shell script which executed the command three times in each of two different ways. For profiling page loads, I would recommend using <a href="https://jmeter.apache.org/">Apache JMeter</a> - and you’ll need to consider whether you want to force an uncached page load by passing a random dummy query parameter. Ideally, you should be running each scenario a few times so that you can then average the results to account for any small variations in run-time.</p>

<p>Keeping your different runs organized is probably the most important part of successfully profiling module code using XHProf! Each run has a unique run ID, but <strong>you</strong> are solely responsible for knowing which use case scenario and which version of the codebase that run ID corresponds to. I set up a basic spreadsheet in OpenOffice where I could paste in run numbers and basic run stats to compare (but there’s almost certainly a nicer automated way to do this than what I used).</p>

<p><img src="/assets/img/blog/xhprof-results-spreadsheet.jpg" alt="Screenshot of an OpenOffice spreadsheet summarizing XHProf results for various runs" /></p>

<p>Once you have a set of run IDs for a given use case + codebase version, you can generate a <em>composite</em> xhprof report using the query string syntax <code class="highlighter-rouge">http://&lt;your-local-site&gt;/xhprof/index.php?run=&lt;first-run-id&gt;,&lt;second-run-id&gt;,&lt;third-run-id&gt;&amp;source=&lt;source-string&gt;</code> Averaging out across a few runs should give you more <a href="https://en.wikipedia.org/wiki/Accuracy_and_precision">precise</a> measurements for CPU time and memory usage, but beware that if parts of your code involve caching you may want to either throw out the first run’s results in each version of the code base, since that’s where the cache will be generated, or clear the cache between runs.</p>

<p>Go ahead and test your run scripts to make sure that you can get a consistent baseline result at this point – if you’re seeing large differences in average total CPU times or average memory usage across different runs of the same codebase, you likely won’t be able to compare run times across <em>different</em> versions of the code.</p>

<h3 id="actually-getting-to-work">Actually getting to work!</h3>

<p>After all this set-up, you should be ready to experiment and see what the impact of changes in your code base are on the metrics that you want to shift. In my case, the code I was working on used a <a href="https://github.com/squix78/jsonstreamingparser">streaming JSON parser class</a>, and I noticed that one of the top function calls in the inital profiler report was the <code class="highlighter-rouge">consumeChar</code> method of the parser.</p>

<p><img src="/assets/img/blog/xhprof-results-page.jpg" alt="Image of XHProf profiler report with the method consumeChar highlighted in yellow" /></p>

<p>It turns out that the JSON files I was importing were pretty-printed, thus containing more whitespace than they needed to. Sine the <code class="highlighter-rouge">consumeChar</code> method gets called on each incoming character of the input stream, that added up to a lot of unnecessary method calls in the original code. By tweaking the JSON file export code to remove the pretty print flag, I cut down the number of times this method was called from 729,099 to 499,809, saving .2 seconds of run time right off the bat.</p>

<p>That was the major place where the XHProf profiler report gave me insights I would not have had otherwise. The rest of my optimizing experience was mostly testing out some of the common-sense optimizations I had already thought of while looking at the code – caching a table of known Entity IDs rather than querying the DB to check if an entity existed each time, using an associative array and <code class="highlighter-rouge">is_empty()</code> <a href="http://www.w3programmers.com/phps-in_array-function-is-really-slow/">to replace <code class="highlighter-rouge">in_array()</code> calls</a>, cutting down on unnecessary <code class="highlighter-rouge">$entity-&gt;save()</code> operations where possible.</p>

<p>It’s useful to mention that across the board the biggest performance hit in your Drupal code will probably be database calls, so cutting down on those wherever possible will save run-time (sometimes at the expense of memory, if you’re caching large amounts of data). Remember, also, that if DB log is enabled each logging call is a separate database operation, so use the log sparingly – or just log to <code class="highlighter-rouge">syslog</code> and use service like <a href="https://papertrailapp.com/">Papertrail</a> or <a href="https://www.loggly.com/">Loggly</a> on production sites.</p>

<h3 id="the-final-results">The final results</h3>

<p>As the results below show, using XHProf and some thoughtful optimizations I was able to cut total run time significantly in one use case (Case 2) and slightly in another use case (Case 1). Case 1 was already running in a reasonable amount of time, so here I was mostly interested in the Case 2 numbers (assuming I didn’t make anything too much worse).</p>

<p><img src="/assets/img/blog/xhprof-results-graph.jpg" alt="Bar chart comparing the run time of various runs" /></p>

<h3 id="think-of-the-big-picture-part-2">Think of the big picture, part 2</h3>

<p>Remember that controlled experimental metrics are just a means to understanding and improving real-world performance (which you can also measure directly using tools like <a href="https://blackfire.io/">blackfire</a>, but that’s another blog post). In my case, at the end of the day we decided that the most important thing was to ensure that there wasn’t a performance impact on the production site while this background import code was running; so one of the optimizations we actually ended up implementing was to force this code to run <strong>slower</strong> by throttling <code class="highlighter-rouge">$entity-&gt;save()</code> operations to maximally 1 every 1/2 second or so, as a way to minimize the number of requests MySQL was having to respond to from the importer. XHProf is a powerful tool, but don’t lose the forest for the trees when it comes to optimization.</p>

    </article>
  </div>
  <div class="region--prev-next-links region--prev-next-links--mobile pagination">
    <div class="outer-container">
  
  <a href="/2016/06/15/git-merge-conflict-strategies.html" class="pagination__previous"><i class="fa fa-angle-left "></i> Prev</a>
  
  <a href="/blog" class="pagination__view-all">View All Blog Posts</a>
  
  <a href="/2016/06/22/user-testing.html" class="pagination__next"> Next <i class="fa fa-angle-right"></i></a>
  
</div>
  </div>
  <div class="page--post__aside region--post-aside">
    <div class="region--post-aside__section__wrapper--posts">
      <div class="region--post-aside__section region--post-aside__section--posts">
        <h2 class="heading--sans-serif c-grey h3">Related Blog Posts</h2>
        <div class="region--post-aside__section__items region--post-aside__section--posts__items">
          

































<div class="tile--blog tile--blog--detailed tile">
  <a href="/2017/03/06/five-drupal-8-tips-to-empower-content-authors.html" class="tile--blog__link">
    <div class="tile--blog__content tile__content bg-light-teal">
      
      <div class="tile--blog__image" style="background-image: url(/assets/img/blog/content-authoring-d8.jpg);">
        
        
        
        <p class="tile--blog--detailed__primary-tag">Drupal</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
      <div class="tile--blog__post-title">
        <p>Five Drupal 8 Tips to Empower Content Authors</p>

        <div class="tile--blog--detailed__author">
          
          
          <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-120by122-82a418.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/oksana/oksana-square-outside-60by61-82a418.jpg" class="image--team-blog-tile" itemprop="image" alt="Oksana Cyrwus" >
  </picture>

          
          
        </div>
        <div class="tile--blog--detailed__author-bg"></div>
      </div>
    </div>
    <div class="tile--blog__hover tile__hover bg-orange">
      <p>Five Drupal 8 tips to make the content authoring experience more enjoyable and productive!</p>

      <p class="link--cta link--cta--inverse">Read more</p>
    </div>
  </a>
</div>































<div class="tile--blog tile--blog--detailed tile">
  <a href="/2017/02/20/drupal-docker-pattern-lab.html" class="tile--blog__link">
    <div class="tile--blog__content tile__content bg-light-teal">
      
      <div class="tile--blog__image" style="background-image: url(/assets/img/blog/docker-drupal-pattern-lab.jpg);">
        
        
        
        <p class="tile--blog--detailed__primary-tag">Drupal</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
      <div class="tile--blog__post-title">
        <p>Docker and the Drupal Pattern Lab Starter Theme</p>

        <div class="tile--blog--detailed__author">
          
          
          <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-120by120-370cd4.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/dan/dan-square-outside-60by60-370cd4.jpg" class="image--team-blog-tile" itemprop="image" alt="Dan Murphy" >
  </picture>

          
          
        </div>
        <div class="tile--blog--detailed__author-bg"></div>
      </div>
    </div>
    <div class="tile--blog__hover tile__hover bg-orange">
      <p>This post demonstrates how to build a Docker image that can be used in local Drupal development with the Pattern Lab Starter theme and/or with other common front-end applications such as npm, Gulp, and Bower.</p>

      <p class="link--cta link--cta--inverse">Read more</p>
    </div>
  </a>
</div>


















































































































































































































































































































































































































































































































































































        </div>
      </div>
    </div>
    <div class="region--post-aside__section__wrapper--case-studies">
      <div class="region--post-aside__section region--post-aside__section--case-studies">
        <h2 class="heading--sans-serif c-grey h3">Related Case Studies</h2>
        <div class="region--post-aside__section__items region--post-aside__section--posts__items">
          









<div class="case-study-block">
  <a class="case-study-block__link" href="/results/case-studies/duke-today/">
    <div class="case-study-block__image" style="background-image: url(/assets/img/work/logos/duke-today-logo-eggshell.png);">
      <img src="/assets/img/work/duke-today/duke-today-block.jpg" alt="Duke Today Redesign">
    </div>
    
    <h3 class="case-study-block__title">Duke Today Redesign</h3>
    
    <div class="case-study-block__tags">
      
      
      <p>Drupal </p>
      
      <p>&bull; </p>
      
      
      
      <p>Content Migration </p>
      
      <p>&bull; </p>
      
      
      
      <p>UX </p>
      
      <p>&bull; </p>
      
      
      
      <p>Docker </p>
      
      
      
    </div>
  </a>
</div>






















<div class="case-study-block">
  <a class="case-study-block__link" href="/results/case-studies/hptn/">
    <div class="case-study-block__image" style="background-image: url(/assets/img/work/logos/hptn-logo-eggshell.png);">
      <img src="/assets/img/work/hptn/hptn-block.jpg" alt="HIV Prevention Trials Network (HPTN) Site Redesign">
    </div>
    
    <h3 class="case-study-block__title">HIV Prevention Trials Network (HPTN) Site Redesign</h3>
    
    <div class="case-study-block__tags">
      
      
      <p>Drupal 8 </p>
      
      <p>&bull; </p>
      
      
      
      <p>Responsive Design </p>
      
      <p>&bull; </p>
      
      
      
      <p>UX </p>
      
      <p>&bull; </p>
      
      
      
      <p>Client Server Integration </p>
      
      
      
    </div>
  </a>
</div>









































































        </div>
        <div class="region--post-aside__section--case-studies__cta flex-center">
          <a href="/results" class="button--arrow--orange">Our work</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="region--prev-next-links region--prev-next-links--post pagination">
  <div class="outer-container">
  
  <a href="/2016/06/15/git-merge-conflict-strategies.html" class="pagination__previous"><i class="fa fa-angle-left "></i> Prev</a>
  
  <a href="/blog" class="pagination__view-all">View All Blog Posts</a>
  
  <a href="/2016/06/22/user-testing.html" class="pagination__next"> Next <i class="fa fa-angle-right"></i></a>
  
</div>
</div>

<div class="region--comments">
  
  <div class="expander">
    <a href="javascript:void(0)" id="js-expander-trigger" class="expander-trigger expander--hidden">
      <p id="comments-trigger">Comments</p>
    </a>
    <div id="js-expander-content" class="expander-content region">

      <!-- If there are existing comments, output them here. -->
      <div id="region--comments__comments" class="region--comments__comments"></div>
      <form id="form--comment" class="form--comment">
  <div class="form--comment__row">
    <div class="form--comment__row__item">
      <div class="form--comment__field form--comment__field--name">
        <label for="name">Name</label>
        <input type="text" name="name" id="name" required>
      </div>
      <div class="form--comment__field form--comment__field--email">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" required>
        <p class="form--comment__helptext">Savas Labs will never sell your email address or spam you.</p>
      </div>
    </div>
    <div class="form--comment__field form--comment__field--comment form--comment__row__item">
      <label for="comment">Comment</label>
      <textarea name="comment" id="comment" rows="4" required></textarea>
      <p class="form--comment__helptext">Plain text format only please.</p>
    </div>
  </div>

  <input type="hidden" name="slug" id="slug" value="/2016/06/16/using-xhprof.html">
  <input type="text" name="url" id="url">

  <div class="form--comment__row">
    <div class="form--comment__field form--comment__field--nocaptcha form--comment__row__item">
      <div class="form--comment__field--nocaptcha__image">
        <img src="/assets/img/icons-and-logos/owl.png" alt="Savas Labs logo">
      </div>
      <div class="form--comment__field--nocaptcha__input">
        <label for="nocaptcha">What type of animal is the Savas Labs logo?</label>
        <p class="form--comment__helptext">Hint: 3 letters long, starts with an "o" and ends with an "l".</p>
        <input type="text" name="nocaptcha" id="nocaptcha" required>
      </div>
    </div>
    <div class="form--comment__row__item">
      <input type="submit" value="Post comment" id="submit" class="form--comment__submit">
    </div>
  </div>
</form>
    </div>
  </div>
  
</div>

    </div>

    <footer class="region--footer" role="contentinfo">
  <div class="region--footer__main">
    <div class="region--footer__main__menu">
      <a href="/" class="region--footer__logo">
        <img src="http://savaslabs.com/assets/img/logo-light.svg" alt="Savas Labs" class="savas-logo savas-logo--light">
      </a>
      <nav role="navigation" class="footer-navigation">
  <ul class="footer-navigation__menu">
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/company">Company</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/results">Results</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/services">Services</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/blog">Blog</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/contact">Contact</a>
      </li>
    
  </ul>
</nav>
    </div>
    <div class="region--footer__main__contact">
      <h4 class="region--footer__main__contact__title h5">Connect with us</h4>
      <a href="mailto:info@savaslabs.com">info@savaslabs.com</a>
      <p>(919) 432-4660</p>
      <address>
        SAVAS LABS<br>
        PMB 210<br>
        201 W Main Street, Suite 100<br>
        Durham, NC 27701
      </address>
    </div>
    <div class="region--footer__main__social">
      <div class="region--footer__main__social__icons">
        <a href="https://github.com/savaslabs"><span class="fa fa-github fa-lg fa-2x"></span></a>
        <a href="https://www.drupal.org/node/2466865"><i class="fa fa-drupal fa-lg fa-2x"></i></a>
        <a href="https://twitter.com/savas_labs"><i class="fa fa-twitter fa-lg fa-2x"></i></a>
        <a href="https://www.linkedin.com/company/savas-labs"><i class="fa fa-linkedin fa-lg fa-2x"></i></a>
      </div>
      <div class="region--footer__main__social__twitter">
        <a class="twitter-timeline"  href="https://twitter.com/Savas_Labs" data-widget-id="720223236315815936">Tweets by @Savas_Labs</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </div>
  </div>
  <div class="region--footer__bottom">
    <div class="region--footer__bottom__wrapper">
      <p class="region--footer__bottom__copyright">
        Copyright &copy; Savas Labs 2017
      </p>
    </div>
  </div>
</footer>

    <script type="text/javascript" src="http://savaslabs.com/assets/js/main.js" async></script>

<noscript>
  <link href='/assets/styles/main.css' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,400italic,700italic|PT+Serif|Source+Sans+Pro' rel='stylesheet' type='text/css'>
</noscript>

  </body>

</html>
