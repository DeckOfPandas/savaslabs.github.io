<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Drupal 8 development environment using Docker, Docker Compose, and Bowline on OS X | Savas Labs</title>
  
  <meta name="description" content="In preparation for a code sprint our team is organizing to port Views GeoJSON to Drupal 8, we decided it would be a great opportunity to standardize our Drup...">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,400italic,700italic|PT+Serif|Bitter|Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/styles/main.css">
  <link rel="stylesheet" href="/assets/icons/octicons/octicons.css">
  <link rel="canonical" href="/2015/04/23/drupal-8-docker-bowline-setup.html">
  <link rel="alternate" type="application/rss+xml" title="Savas Labs" href="/feed.xml" />
  <script type="text/javascript" src="/assets/js/main.js"></script>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Durham, North Carolina",
        "postalCode": "27701",
        "streetAddress": "201 W Main St."
      },
      "description": "A full-service web agency leveraging the power of Drupal.
",
      "email": "info@savaslabs.com",
      "name": "Savas Labs",
      "telephone": "(919) 432-4660",
      "url": "http://savaslabs.com",
      "logo": "http://savaslabs.com/assets/img/logo.png"
    }
</script>

  
  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Drupal 8 development environment using Docker, Docker Compose, and Bowline on OS X",
    "about": "Learn how to use Docker, Docker Compose, and Bowline to set up a standardized local Drupal development environment on your Mac.",
    "articleBody": "


&lt;div class=&quot;post&quot;&gt;
  &lt;header class=&quot;post-header&quot;&gt;
    &lt;h1 class=&quot;post-title&quot;&gt;Drupal 8 development environment using Docker, Docker Compose, and Bowline on OS X&lt;/h1&gt;
    &lt;p&gt;By &lt;a href=&quot;/team/dan-murphy&quot;&gt;Dan Murphy&lt;/a&gt;&lt;/p&gt;
    &lt;p class=&quot;centerdot&quot;&gt;&amp;centerdot; &lt;/p&gt;
    &lt;p&gt;Apr 23, 2015 &lt;/p&gt;&lt;br&gt;
    &lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;p&gt;&lt;a href=&quot;/blog/tag/docker/&quot;&gt;Docker&lt;/a&gt;, &lt;a href=&quot;/blog/tag/bowline/&quot;&gt;Bowline&lt;/a&gt;, &lt;a href=&quot;/blog/tag/osx/&quot;&gt;OS X&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal8/&quot;&gt;Drupal 8&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal-planet/&quot;&gt;Drupal Planet&lt;/a&gt;&lt;/p&gt;
    
    &lt;div&gt;&lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;
    
    
  &lt;/header&gt;

  
    &lt;div class=&quot;disclaimer&quot;&gt;
      &lt;h5&gt;Proceed with caution&lt;/h5&gt;
      This post contains outdated information as Boot2Docker is now deprecated in favor of Docker Machine.

    &lt;/div&gt;
  

  &lt;article class=&quot;post-content&quot;&gt;
    &lt;p&gt;In preparation for a &lt;a href=&quot;/2015/04/16/codesprint-port-views-geojson-drupal-8.html&quot;&gt;code sprint our team is organizing to port Views GeoJSON to Drupal 8&lt;/a&gt;, we decided it would be a great opportunity to standardize our Drupal 8 local development environments. To ease this process, we ended up using Docker, Docker Compose, and Bowline.&lt;/p&gt;

&lt;p&gt;In this post I’ll give a brief overview of these awesome tools, and explain how we set them up on OS X to create identical Drupal 8 development environments on each team member’s computer.&lt;/p&gt;

&lt;h2 id=&quot;background&quot;&gt;Background&lt;/h2&gt;

&lt;p&gt;There are a lot of different ways to setup a local development environment, and there are usually many challenges along the way. One problem that often arises is that a developer’s local environment differs from their co-workers and/or their staging or production environments. For example, maybe you’re running PHP 5.6, your colleague is running PHP 5.5, and production is running PHP 5.4. This can cause issues when you share or deploy code that works in one environment but not in another. Using Docker, Docker Compose, and Bowline we can remove this pain point by ensuring that all of the environments are the same.&lt;/p&gt;

&lt;p&gt;First off what are Docker, Docker Compose, and Bowline?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Docker is &lt;a href=&quot;http://en.wikipedia.org/wiki/Docker_%28software%29&quot;&gt;“an open-source project that automates the deployment of applications inside software containers.”&lt;/a&gt; Essentially, Docker runs a processes from within a container that includes all dependencies the process needs to run. This allows containers to run almost anywhere. For example, you may have a container for running MySQL.&lt;/li&gt;
  &lt;li&gt;Docker Compose &lt;a href=&quot;https://docs.docker.com/userguide/&quot;&gt;“allows you to define an application’s components – their containers, configuration, links and volumes – in a single file. Then a single command will set everything up and start your application running.”&lt;/a&gt; For example, you may use Docker Compose to bundle a web server container and a MySQL container.&lt;/li&gt;
  &lt;li&gt;Bowline is a &lt;a href=&quot;https://github.com/davenuman/bowline&quot;&gt;“Drupal focused docker container helper that ties everything together.”&lt;/a&gt; Bowline can be used to easily create a standard, local Drupal development environment for you by building the requisite Docker containers and configuring your settings. By default, &lt;a href=&quot;http://www.civicactions.com/blog/2015/jan/27/dockerizing-drupal-project-development-and-testing&quot;&gt;Bowline creates two containers: mysql 5.5 and a web container that provides apache, php 5.4, and related software.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;By using these tools, you can ensure that each member of your team has the same local setup. That way, if code works in one environment, then it works in all of them.&lt;/p&gt;

&lt;p&gt;Now I’ll go through the steps I followed to set everything up on my Mac. For this tutorial I’ll be showing you how to set up a fresh Drupal 8 install, however you can also use these tools on new or existing Drupal 6 and 7 projects.&lt;/p&gt;

&lt;h2 id=&quot;initial-setup&quot;&gt;Initial Setup&lt;/h2&gt;

&lt;h3 id=&quot;install-docker-on-your-machine&quot;&gt;Install Docker on your machine&lt;/h3&gt;

&lt;p&gt;Unfortunately, &lt;a href=&quot;https://docs.docker.com/installation/mac/&quot;&gt;you can’t run Docker natively in OS X&lt;/a&gt;, as explained in the Docker documentation:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Instead, you must install the Boot2Docker application. The application includes a VirtualBox Virtual Machine (VM), Docker itself, and the Boot2Docker management tool. The Boot2Docker management tool is a lightweight Linux virtual machine made specifically to run the Docker daemon on Mac OS X.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To install Boot2Docker, I followed the &lt;a href=&quot;https://docs.docker.com/installation/mac/&quot;&gt;Docker Mac installation instructions.&lt;/a&gt;. First, I installed Boot2Docker from &lt;a href=&quot;https://github.com/boot2docker/osx-installer/releases/latest&quot;&gt;boot2docker/osx-installer&lt;/a&gt; as explained in that tutorial. The docker and boot2docker binaries are installed in &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt; which you can access from your terminal. I then followed the instructions for starting Boot2Docker from the command line, running the following commands:&lt;/p&gt;

&lt;p&gt;Setup Boot2Docker, this only needs to be run once during initial setup:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker init
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Start the boot2docker application:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker start
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Set the environment variables for the Docker client, so that it can access Docker running on the Boot2Docker virtual machine. Note, this needs to be run for each terminal window or tab you open:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify that boot2docker is running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker status
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify that the Docker client environment is initialized:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker version
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;install-docker-compose&quot;&gt;Install Docker Compose&lt;/h3&gt;

&lt;p&gt;To install Docker Compose I followed the &lt;a href=&quot;https://docs.docker.com/compose/install/#install-compose&quot;&gt;Docker Compose installation
instructions&lt;/a&gt;. I ran the following command:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -L https://github.com/docker/compose/releases/download/1.2.0/docker-compose-&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;uname -s&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;-&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;uname -m&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; &amp;gt; /usr/local/bin/docker-compose
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;chmod +x /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify the installation of Docker Compose:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker-compose --version
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Optionally, if you choose to install command completion for Docker Compose for the bash shell, you may follow &lt;a href=&quot;https://docs.docker.com/compose/completion/&quot;&gt;these steps&lt;/a&gt;, however on OS X you will probably have to modify the bash_completion.d path as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -L https://raw.githubusercontent.com/docker/compose/1.2.0/contrib/completion/bash/docker-compose &amp;gt; /usr/local/etc/bash_completion.d/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;install-bowline-and-set-up-the-drupal-8-project&quot;&gt;Install Bowline and set up the Drupal 8 Project&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/davenuman/bowline/blob/master/readme.md&quot;&gt;Bowline project readme&lt;/a&gt; provides installation and setup instructions, however I needed to make some modifications. For example, Fig has been deprecated in place of Docker Compose. Explicitly I did the following:&lt;/p&gt;

&lt;p&gt;Pull the Docker images:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker pull davenuman/bowline-web-php
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker pull mysql:5.5
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Navigate to your sites directory and create a new project for your drupal 8 site (for me, that directory is &lt;code class=&quot;highlighter-rouge&quot;&gt;/Users/dan/Sites&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mkdir drupal8
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;drupal8
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Setup bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git init
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git remote add bowline git@github.com:davenuman/bowline.git
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git remote update
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git checkout bowline/master .
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git add . &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git status
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git rm --cached readme.md
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;rm readme.md
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git commit -m &lt;span class=&quot;s1&quot;&gt;&#39;Starting with bowline code&#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Activate bowline and build the containers:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;. bin/activate
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;build
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Check that that the containers are running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;bowline
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Download Drupal 8 to your project folder and rename the folder as docroot. You can &lt;a href=&quot;https://www.drupal.org/project/drupal&quot;&gt;manually download it here&lt;/a&gt;, or you can use wget as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;wget http://ftp.drupal.org/files/projects/drupal-8.0.0-beta9.tar.gz
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;tar -xzvf drupal-8.0.0-beta9.tar.gz
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mv drupal-8.0.0-beta9 docroot
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;rm drupal-8.0.0-beta9.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Update Composer (not to be confused with Docker Compose) to use Drush 7 (Drupal 8 does not work with older versions of Drush):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;composer require drush/drush:dev-master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Use bowline to initialize the site settings and then use drush to install Drupal&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;settings_init
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;drush si --sites-subdir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;default
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Your Drupal 8 site is now set up and running on the web and MySQL Docker containers you set up using Bowline. However, a few extra steps are required so that you can access your site on the Apache server that is running within the web container.&lt;/p&gt;

&lt;p&gt;Run the bowline command to get the IP address of your web container, it
should be something like &lt;code class=&quot;highlighter-rouge&quot;&gt;http://172.17.0.2/&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Run the boot2docker ip command to get the IP address of the boot2docker virtual machine, it should be something like &lt;code class=&quot;highlighter-rouge&quot;&gt;192.168.59.103&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;We now manually add a subnet route to the docker instance running inside
the boot2docker virtual machine as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You should now be able to access your Drupal 8 site using the web IP address by ing the &lt;code class=&quot;highlighter-rouge&quot;&gt;bowline&lt;/code&gt; command, for example &lt;code class=&quot;highlighter-rouge&quot;&gt;http://172.17.0.2/&lt;/code&gt; for my setup.&lt;/p&gt;

&lt;p&gt;One of the great things about Bowline is it sets up drush to work with your containers. You can use drush to get a one time login link for the admin user by simply running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;drush uli
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You can also debug the site using XDebug. I will explain how to set this up in a future blog post.&lt;/p&gt;

&lt;h2 id=&quot;when-youre-done&quot;&gt;When you’re done&lt;/h2&gt;

&lt;p&gt;Bowline, Boot2Docker, all docker containers, and the subnet route will all cease when you restart your machine, however you can manually stop them as follows:&lt;/p&gt;

&lt;p&gt;Deactivate bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Stop all docker containers:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker stop &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Stop the boot2docker virtual machine:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker stop
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove the static route:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n delete 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;running-in-the-future&quot;&gt;Running in the future&lt;/h2&gt;

&lt;p&gt;Next time you start you machine and want to fire up the development environment you’ll need to run the following commands from the project root.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker start
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;. bin/activate
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;build
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;bowline
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;

&lt;p&gt;For each new terminal window or tab you open, you have to set the Boot2Docker environment variables. If you see an error message like: “Couldn’t connect to Docker daemon - you might need to run `boot2docker up`.” you may need to run:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If you move to a different project within the same terminal window or tab, make sure you deactivate bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If drush status is working, but the site is not loading, double check that you are rerouting to the Boot2Docker IP address:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;versions-used-in-this-tutorial&quot;&gt;Versions used in this tutorial&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Docker 1.6.0&lt;/li&gt;
  &lt;li&gt;Boot2Docker 1.6.0&lt;/li&gt;
  &lt;li&gt;Docker Compose 1.2.0&lt;/li&gt;
  &lt;li&gt;Drupal 8.0.0-beta9&lt;/li&gt;
  &lt;li&gt;Drush 7.0-dev&lt;/li&gt;
&lt;/ul&gt;

    &lt;hr&gt;

    
      &lt;div class=&quot;post-comments&quot;&gt;
  
    &lt;div class=&quot;expander&quot;&gt;
      &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander-hidden&quot;&gt;Comments!&lt;/a&gt;
      &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content&quot;&gt;
        &lt;!-- If there are existing comments, output them here. --&gt;
        &lt;div id=&quot;post-comments&quot; class=&quot;post-comments&quot;&gt;&lt;/div&gt;
        &lt;!-- New comment form --&gt;
        &lt;form id=&quot;comment-form&quot;&gt;
          &lt;h4&gt;Leave a comment&lt;/h4&gt;
          &lt;div class=&quot;comment-name&quot;&gt;
            &lt;p&gt;Name&lt;/p&gt; &lt;input type=&#39;text&#39; name=&#39;name&#39; id=&#39;name&#39; required /&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;div class=&quot;comment-email&quot;&gt;
            &lt;p&gt;Email&lt;/p&gt; &lt;input type=&#39;email&#39; name=&#39;email&#39; id=&#39;email&#39; required /&gt;
            &lt;p class=&quot;email-disclaimer&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;p&gt;Comment&lt;/p&gt;
          &lt;textarea name=&#39;comment&#39; id=&#39;comment&#39; required&gt;&lt;/textarea&gt;
          &lt;p class=&quot;hint below-textarea&quot;&gt;Plain text format only please.&lt;/p&gt;

          &lt;input type=&#39;hidden&#39; name=&#39;slug&#39; id=&#39;slug&#39; value=&#39;/2015/04/23/drupal-8-docker-bowline-setup.html&#39; /&gt;
          &lt;input type=&#39;text&#39; name=&#39;url&#39; id=&#39;url&#39; /&gt;

          &lt;div class=&#39;are-you-human&#39;&gt;
            &lt;div class=&#39;are-you-human-owl&#39;&gt;
              &lt;img src=&quot;/assets/img/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&#39;are-you-human-field&#39;&gt;
              &lt;p&gt;What type of animal is the Savas Labs logo?&lt;/p&gt;
              &lt;input type=&#39;text&#39; name=&#39;nocaptcha&#39; id=&#39;nocaptcha&#39; class=&#39;nocaptcha&#39;&gt;
              &lt;p class=&quot;hint&quot;&gt;Hint: 3 letters long, starts with an &#39;o&#39; and ends with an &#39;l&#39;.&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;input type=&#39;submit&#39; value=&#39;Submit&#39; id=&#39;submit&#39; class=&quot;submit-comment&quot;/&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  
  &lt;hr&gt;
&lt;/div&gt;

    
    &lt;div class=&quot;post-bottom&quot;&gt;
  &lt;div class=&quot;post-meta&quot;&gt;
    &lt;h4&gt;About the author&lt;/h4&gt;
    
      &lt;a href=&quot;/team/dan-murphy&quot;&gt;
        &lt;img src=&quot;/assets/img/team/dan-murphy.jpg&quot; alt=&quot;Dan Murphy&quot;&gt;
      &lt;/a&gt;
      &lt;p class=&quot;post-author-desc&quot;&gt;Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.&lt;/p&gt;
    
  &lt;/div&gt;
    &lt;!-- Once we have more content, change this to posts related by tag --&gt;
  &lt;div class=&quot;post-related flex-container&quot;&gt;
    &lt;h4&gt;Recent posts by Savas Labs&lt;/h4&gt;
    &lt;div class=&quot;cards&quot;&gt;
      
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/09/23/supercharged-seo-with-drupal-8.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Supercharged SEO with Drupal 8
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Sep 23, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/08/29/internship-thoughts.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  A Savas Labs Internship
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Aug 29, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;What it’s like to learn at Savas Labs.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/06/22/user-testing.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Usability Testing - Our Process and Favorite Practices
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Jun 22, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;Our approach to designing, conducting, and learning from user testing and other analyses.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

    &lt;div class=&quot;previous-next-links&quot;&gt;
  &lt;div class=&quot;next&quot;&gt;
    
      &lt;a href=&quot;/2015/04/27/durham-restaurant-time-machine.html&quot;&gt;&lt;i class=&quot;fa fa-long-arrow-left &quot;&gt;&lt;/i&gt; Building a time machine for Durham&#39;s food landscape&lt;/a&gt;
    
  &lt;/div&gt;
  &lt;div class=&quot;previous&quot;&gt;
    
      &lt;a href=&quot;/2015/04/16/codesprint-port-views-geojson-drupal-8.html&quot;&gt; Code sprint: Help port Views GeoJSON to Drupal 8 &lt;i class=&quot;fa fa-long-arrow-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    
  &lt;/div&gt;
&lt;/div&gt;


  &lt;/article&gt;

&lt;/div&gt;
",
      "author": {
          "@context": "http://schema.org",
          "@type": "Person",
          "name": "Dan Murphy",
          "affiliation": "Savas Labs",
          "worksFor": "Savas Labs"
      },
    "keywords": "docker, bowline, osx, drupal, drupal8, drupal-planet",
    "text": "


&lt;div class=&quot;post&quot;&gt;
  &lt;header class=&quot;post-header&quot;&gt;
    &lt;h1 class=&quot;post-title&quot;&gt;Drupal 8 development environment using Docker, Docker Compose, and Bowline on OS X&lt;/h1&gt;
    &lt;p&gt;By &lt;a href=&quot;/team/dan-murphy&quot;&gt;Dan Murphy&lt;/a&gt;&lt;/p&gt;
    &lt;p class=&quot;centerdot&quot;&gt;&amp;centerdot; &lt;/p&gt;
    &lt;p&gt;Apr 23, 2015 &lt;/p&gt;&lt;br&gt;
    &lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;p&gt;&lt;a href=&quot;/blog/tag/docker/&quot;&gt;Docker&lt;/a&gt;, &lt;a href=&quot;/blog/tag/bowline/&quot;&gt;Bowline&lt;/a&gt;, &lt;a href=&quot;/blog/tag/osx/&quot;&gt;OS X&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal8/&quot;&gt;Drupal 8&lt;/a&gt;, &lt;a href=&quot;/blog/tag/drupal-planet/&quot;&gt;Drupal Planet&lt;/a&gt;&lt;/p&gt;
    
    &lt;div&gt;&lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;
    
    
  &lt;/header&gt;

  
    &lt;div class=&quot;disclaimer&quot;&gt;
      &lt;h5&gt;Proceed with caution&lt;/h5&gt;
      This post contains outdated information as Boot2Docker is now deprecated in favor of Docker Machine.

    &lt;/div&gt;
  

  &lt;article class=&quot;post-content&quot;&gt;
    &lt;p&gt;In preparation for a &lt;a href=&quot;/2015/04/16/codesprint-port-views-geojson-drupal-8.html&quot;&gt;code sprint our team is organizing to port Views GeoJSON to Drupal 8&lt;/a&gt;, we decided it would be a great opportunity to standardize our Drupal 8 local development environments. To ease this process, we ended up using Docker, Docker Compose, and Bowline.&lt;/p&gt;

&lt;p&gt;In this post I’ll give a brief overview of these awesome tools, and explain how we set them up on OS X to create identical Drupal 8 development environments on each team member’s computer.&lt;/p&gt;

&lt;h2 id=&quot;background&quot;&gt;Background&lt;/h2&gt;

&lt;p&gt;There are a lot of different ways to setup a local development environment, and there are usually many challenges along the way. One problem that often arises is that a developer’s local environment differs from their co-workers and/or their staging or production environments. For example, maybe you’re running PHP 5.6, your colleague is running PHP 5.5, and production is running PHP 5.4. This can cause issues when you share or deploy code that works in one environment but not in another. Using Docker, Docker Compose, and Bowline we can remove this pain point by ensuring that all of the environments are the same.&lt;/p&gt;

&lt;p&gt;First off what are Docker, Docker Compose, and Bowline?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Docker is &lt;a href=&quot;http://en.wikipedia.org/wiki/Docker_%28software%29&quot;&gt;“an open-source project that automates the deployment of applications inside software containers.”&lt;/a&gt; Essentially, Docker runs a processes from within a container that includes all dependencies the process needs to run. This allows containers to run almost anywhere. For example, you may have a container for running MySQL.&lt;/li&gt;
  &lt;li&gt;Docker Compose &lt;a href=&quot;https://docs.docker.com/userguide/&quot;&gt;“allows you to define an application’s components – their containers, configuration, links and volumes – in a single file. Then a single command will set everything up and start your application running.”&lt;/a&gt; For example, you may use Docker Compose to bundle a web server container and a MySQL container.&lt;/li&gt;
  &lt;li&gt;Bowline is a &lt;a href=&quot;https://github.com/davenuman/bowline&quot;&gt;“Drupal focused docker container helper that ties everything together.”&lt;/a&gt; Bowline can be used to easily create a standard, local Drupal development environment for you by building the requisite Docker containers and configuring your settings. By default, &lt;a href=&quot;http://www.civicactions.com/blog/2015/jan/27/dockerizing-drupal-project-development-and-testing&quot;&gt;Bowline creates two containers: mysql 5.5 and a web container that provides apache, php 5.4, and related software.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;By using these tools, you can ensure that each member of your team has the same local setup. That way, if code works in one environment, then it works in all of them.&lt;/p&gt;

&lt;p&gt;Now I’ll go through the steps I followed to set everything up on my Mac. For this tutorial I’ll be showing you how to set up a fresh Drupal 8 install, however you can also use these tools on new or existing Drupal 6 and 7 projects.&lt;/p&gt;

&lt;h2 id=&quot;initial-setup&quot;&gt;Initial Setup&lt;/h2&gt;

&lt;h3 id=&quot;install-docker-on-your-machine&quot;&gt;Install Docker on your machine&lt;/h3&gt;

&lt;p&gt;Unfortunately, &lt;a href=&quot;https://docs.docker.com/installation/mac/&quot;&gt;you can’t run Docker natively in OS X&lt;/a&gt;, as explained in the Docker documentation:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Instead, you must install the Boot2Docker application. The application includes a VirtualBox Virtual Machine (VM), Docker itself, and the Boot2Docker management tool. The Boot2Docker management tool is a lightweight Linux virtual machine made specifically to run the Docker daemon on Mac OS X.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To install Boot2Docker, I followed the &lt;a href=&quot;https://docs.docker.com/installation/mac/&quot;&gt;Docker Mac installation instructions.&lt;/a&gt;. First, I installed Boot2Docker from &lt;a href=&quot;https://github.com/boot2docker/osx-installer/releases/latest&quot;&gt;boot2docker/osx-installer&lt;/a&gt; as explained in that tutorial. The docker and boot2docker binaries are installed in &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt; which you can access from your terminal. I then followed the instructions for starting Boot2Docker from the command line, running the following commands:&lt;/p&gt;

&lt;p&gt;Setup Boot2Docker, this only needs to be run once during initial setup:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker init
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Start the boot2docker application:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker start
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Set the environment variables for the Docker client, so that it can access Docker running on the Boot2Docker virtual machine. Note, this needs to be run for each terminal window or tab you open:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify that boot2docker is running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker status
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify that the Docker client environment is initialized:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker version
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;install-docker-compose&quot;&gt;Install Docker Compose&lt;/h3&gt;

&lt;p&gt;To install Docker Compose I followed the &lt;a href=&quot;https://docs.docker.com/compose/install/#install-compose&quot;&gt;Docker Compose installation
instructions&lt;/a&gt;. I ran the following command:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -L https://github.com/docker/compose/releases/download/1.2.0/docker-compose-&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;uname -s&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;-&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;uname -m&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; &amp;gt; /usr/local/bin/docker-compose
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;chmod +x /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Verify the installation of Docker Compose:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker-compose --version
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Optionally, if you choose to install command completion for Docker Compose for the bash shell, you may follow &lt;a href=&quot;https://docs.docker.com/compose/completion/&quot;&gt;these steps&lt;/a&gt;, however on OS X you will probably have to modify the bash_completion.d path as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -L https://raw.githubusercontent.com/docker/compose/1.2.0/contrib/completion/bash/docker-compose &amp;gt; /usr/local/etc/bash_completion.d/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;install-bowline-and-set-up-the-drupal-8-project&quot;&gt;Install Bowline and set up the Drupal 8 Project&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/davenuman/bowline/blob/master/readme.md&quot;&gt;Bowline project readme&lt;/a&gt; provides installation and setup instructions, however I needed to make some modifications. For example, Fig has been deprecated in place of Docker Compose. Explicitly I did the following:&lt;/p&gt;

&lt;p&gt;Pull the Docker images:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker pull davenuman/bowline-web-php
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker pull mysql:5.5
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Navigate to your sites directory and create a new project for your drupal 8 site (for me, that directory is &lt;code class=&quot;highlighter-rouge&quot;&gt;/Users/dan/Sites&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mkdir drupal8
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;drupal8
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Setup bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git init
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git remote add bowline git@github.com:davenuman/bowline.git
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git remote update
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git checkout bowline/master .
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git add . &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git status
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git rm --cached readme.md
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;rm readme.md
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git commit -m &lt;span class=&quot;s1&quot;&gt;&#39;Starting with bowline code&#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Activate bowline and build the containers:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;. bin/activate
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;build
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Check that that the containers are running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;bowline
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Download Drupal 8 to your project folder and rename the folder as docroot. You can &lt;a href=&quot;https://www.drupal.org/project/drupal&quot;&gt;manually download it here&lt;/a&gt;, or you can use wget as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;wget http://ftp.drupal.org/files/projects/drupal-8.0.0-beta9.tar.gz
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;tar -xzvf drupal-8.0.0-beta9.tar.gz
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mv drupal-8.0.0-beta9 docroot
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;rm drupal-8.0.0-beta9.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Update Composer (not to be confused with Docker Compose) to use Drush 7 (Drupal 8 does not work with older versions of Drush):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;composer require drush/drush:dev-master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Use bowline to initialize the site settings and then use drush to install Drupal&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;settings_init
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;drush si --sites-subdir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;default
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Your Drupal 8 site is now set up and running on the web and MySQL Docker containers you set up using Bowline. However, a few extra steps are required so that you can access your site on the Apache server that is running within the web container.&lt;/p&gt;

&lt;p&gt;Run the bowline command to get the IP address of your web container, it
should be something like &lt;code class=&quot;highlighter-rouge&quot;&gt;http://172.17.0.2/&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Run the boot2docker ip command to get the IP address of the boot2docker virtual machine, it should be something like &lt;code class=&quot;highlighter-rouge&quot;&gt;192.168.59.103&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;We now manually add a subnet route to the docker instance running inside
the boot2docker virtual machine as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You should now be able to access your Drupal 8 site using the web IP address by ing the &lt;code class=&quot;highlighter-rouge&quot;&gt;bowline&lt;/code&gt; command, for example &lt;code class=&quot;highlighter-rouge&quot;&gt;http://172.17.0.2/&lt;/code&gt; for my setup.&lt;/p&gt;

&lt;p&gt;One of the great things about Bowline is it sets up drush to work with your containers. You can use drush to get a one time login link for the admin user by simply running:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;drush uli
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You can also debug the site using XDebug. I will explain how to set this up in a future blog post.&lt;/p&gt;

&lt;h2 id=&quot;when-youre-done&quot;&gt;When you’re done&lt;/h2&gt;

&lt;p&gt;Bowline, Boot2Docker, all docker containers, and the subnet route will all cease when you restart your machine, however you can manually stop them as follows:&lt;/p&gt;

&lt;p&gt;Deactivate bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Stop all docker containers:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;docker stop &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Stop the boot2docker virtual machine:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker stop
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Remove the static route:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n delete 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;running-in-the-future&quot;&gt;Running in the future&lt;/h2&gt;

&lt;p&gt;Next time you start you machine and want to fire up the development environment you’ll need to run the following commands from the project root.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;boot2docker start
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;. bin/activate
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;build
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;bowline
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;

&lt;p&gt;For each new terminal window or tab you open, you have to set the Boot2Docker environment variables. If you see an error message like: “Couldn’t connect to Docker daemon - you might need to run `boot2docker up`.” you may need to run:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;boot2docker shellinit&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If you move to a different project within the same terminal window or tab, make sure you deactivate bowline:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If drush status is working, but the site is not loading, double check that you are rerouting to the Boot2Docker IP address:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo route -n add 172.0.0.0/8 192.168.59.103
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;versions-used-in-this-tutorial&quot;&gt;Versions used in this tutorial&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Docker 1.6.0&lt;/li&gt;
  &lt;li&gt;Boot2Docker 1.6.0&lt;/li&gt;
  &lt;li&gt;Docker Compose 1.2.0&lt;/li&gt;
  &lt;li&gt;Drupal 8.0.0-beta9&lt;/li&gt;
  &lt;li&gt;Drush 7.0-dev&lt;/li&gt;
&lt;/ul&gt;

    &lt;hr&gt;

    
      &lt;div class=&quot;post-comments&quot;&gt;
  
    &lt;div class=&quot;expander&quot;&gt;
      &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander-hidden&quot;&gt;Comments!&lt;/a&gt;
      &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content&quot;&gt;
        &lt;!-- If there are existing comments, output them here. --&gt;
        &lt;div id=&quot;post-comments&quot; class=&quot;post-comments&quot;&gt;&lt;/div&gt;
        &lt;!-- New comment form --&gt;
        &lt;form id=&quot;comment-form&quot;&gt;
          &lt;h4&gt;Leave a comment&lt;/h4&gt;
          &lt;div class=&quot;comment-name&quot;&gt;
            &lt;p&gt;Name&lt;/p&gt; &lt;input type=&#39;text&#39; name=&#39;name&#39; id=&#39;name&#39; required /&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;div class=&quot;comment-email&quot;&gt;
            &lt;p&gt;Email&lt;/p&gt; &lt;input type=&#39;email&#39; name=&#39;email&#39; id=&#39;email&#39; required /&gt;
            &lt;p class=&quot;email-disclaimer&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;p&gt;Comment&lt;/p&gt;
          &lt;textarea name=&#39;comment&#39; id=&#39;comment&#39; required&gt;&lt;/textarea&gt;
          &lt;p class=&quot;hint below-textarea&quot;&gt;Plain text format only please.&lt;/p&gt;

          &lt;input type=&#39;hidden&#39; name=&#39;slug&#39; id=&#39;slug&#39; value=&#39;/2015/04/23/drupal-8-docker-bowline-setup.html&#39; /&gt;
          &lt;input type=&#39;text&#39; name=&#39;url&#39; id=&#39;url&#39; /&gt;

          &lt;div class=&#39;are-you-human&#39;&gt;
            &lt;div class=&#39;are-you-human-owl&#39;&gt;
              &lt;img src=&quot;/assets/img/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&#39;are-you-human-field&#39;&gt;
              &lt;p&gt;What type of animal is the Savas Labs logo?&lt;/p&gt;
              &lt;input type=&#39;text&#39; name=&#39;nocaptcha&#39; id=&#39;nocaptcha&#39; class=&#39;nocaptcha&#39;&gt;
              &lt;p class=&quot;hint&quot;&gt;Hint: 3 letters long, starts with an &#39;o&#39; and ends with an &#39;l&#39;.&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;input type=&#39;submit&#39; value=&#39;Submit&#39; id=&#39;submit&#39; class=&quot;submit-comment&quot;/&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  
  &lt;hr&gt;
&lt;/div&gt;

    
    &lt;div class=&quot;post-bottom&quot;&gt;
  &lt;div class=&quot;post-meta&quot;&gt;
    &lt;h4&gt;About the author&lt;/h4&gt;
    
      &lt;a href=&quot;/team/dan-murphy&quot;&gt;
        &lt;img src=&quot;/assets/img/team/dan-murphy.jpg&quot; alt=&quot;Dan Murphy&quot;&gt;
      &lt;/a&gt;
      &lt;p class=&quot;post-author-desc&quot;&gt;Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.&lt;/p&gt;
    
  &lt;/div&gt;
    &lt;!-- Once we have more content, change this to posts related by tag --&gt;
  &lt;div class=&quot;post-related flex-container&quot;&gt;
    &lt;h4&gt;Recent posts by Savas Labs&lt;/h4&gt;
    &lt;div class=&quot;cards&quot;&gt;
      
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/09/23/supercharged-seo-with-drupal-8.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Supercharged SEO with Drupal 8
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Sep 23, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/08/29/internship-thoughts.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  A Savas Labs Internship
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Aug 29, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;What it’s like to learn at Savas Labs.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/06/22/user-testing.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Usability Testing - Our Process and Favorite Practices
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Jun 22, 2016&lt;/p&gt;
                &lt;p&gt;&lt;p&gt;Our approach to designing, conducting, and learning from user testing and other analyses.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

    &lt;div class=&quot;previous-next-links&quot;&gt;
  &lt;div class=&quot;next&quot;&gt;
    
      &lt;a href=&quot;/2015/04/27/durham-restaurant-time-machine.html&quot;&gt;&lt;i class=&quot;fa fa-long-arrow-left &quot;&gt;&lt;/i&gt; Building a time machine for Durham&#39;s food landscape&lt;/a&gt;
    
  &lt;/div&gt;
  &lt;div class=&quot;previous&quot;&gt;
    
      &lt;a href=&quot;/2015/04/16/codesprint-port-views-geojson-drupal-8.html&quot;&gt; Code sprint: Help port Views GeoJSON to Drupal 8 &lt;i class=&quot;fa fa-long-arrow-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    
  &lt;/div&gt;
&lt;/div&gt;


  &lt;/article&gt;

&lt;/div&gt;
",
    "sourceOrganization": "Savas Labs",
    "inLanguage": "en-US",
    "dateCreated": "2015-04-23 00:00:00 +0000",
    "datePublished": "2015-04-23 00:00:00 +0000",
    "url": "/2015/04/23/drupal-8-docker-bowline-setup.html"
  }
</script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61514316-1', 'auto');
  ga('send', 'pageview');

</script>

  

  
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">

    <!-- Savas Labs logo. -->
    <a href="/" class="logo">
        <img src="/assets/img/logo.png" alt="Savas Labs logo">
    </a>

    <!-- Mobile menu button. -->
    <a href="/" id="js-mobile-menu" class="navigation-menu-button">MENU</a>

    <!-- Main menu. -->
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">

        <!-- Loop through nav items in config.yml. -->
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  more">
            <a href="javascript:void(0)">Who we are</a>

            <!-- If there are sub-links, create them. -->
            

              <ul class="submenu">
                

                  <!-- Assign active nav item class. -->
                  
                  

                  <li class="nav-link ">
                    <a href="/team">Team</a>
                  </li>
                

                  <!-- Assign active nav item class. -->
                  
                  

                  <li class="nav-link ">
                    <a href="/mission-and-values">Mission & values</a>
                  </li>
                
              </ul>
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/services">Services</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/work">Our work</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/blog">Blog</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/contact">Contact</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        


<div class="post">
  <header class="post-header">
    <h1 class="post-title">Drupal 8 development environment using Docker, Docker Compose, and Bowline on OS X</h1>
    <p>By <a href="/team/dan-murphy">Dan Murphy</a></p>
    <p class="centerdot">&centerdot; </p>
    <p>Apr 23, 2015 </p><br>
    <i class="fa fa-tags"></i><p><a href="/blog/tag/docker/">Docker</a>, <a href="/blog/tag/bowline/">Bowline</a>, <a href="/blog/tag/osx/">OS X</a>, <a href="/blog/tag/drupal/">Drupal</a>, <a href="/blog/tag/drupal8/">Drupal 8</a>, <a href="/blog/tag/drupal-planet/">Drupal Planet</a></p>
    
    <div><p><span id="comment-count"></span></p></div>
    
    
  </header>

  
    <div class="disclaimer">
      <h5>Proceed with caution</h5>
      This post contains outdated information as Boot2Docker is now deprecated in favor of Docker Machine.

    </div>
  

  <article class="post-content">
    <p>In preparation for a <a href="/2015/04/16/codesprint-port-views-geojson-drupal-8.html">code sprint our team is organizing to port Views GeoJSON to Drupal 8</a>, we decided it would be a great opportunity to standardize our Drupal 8 local development environments. To ease this process, we ended up using Docker, Docker Compose, and Bowline.</p>

<p>In this post I’ll give a brief overview of these awesome tools, and explain how we set them up on OS X to create identical Drupal 8 development environments on each team member’s computer.</p>

<h2 id="background">Background</h2>

<p>There are a lot of different ways to setup a local development environment, and there are usually many challenges along the way. One problem that often arises is that a developer’s local environment differs from their co-workers and/or their staging or production environments. For example, maybe you’re running PHP 5.6, your colleague is running PHP 5.5, and production is running PHP 5.4. This can cause issues when you share or deploy code that works in one environment but not in another. Using Docker, Docker Compose, and Bowline we can remove this pain point by ensuring that all of the environments are the same.</p>

<p>First off what are Docker, Docker Compose, and Bowline?</p>

<ul>
  <li>Docker is <a href="http://en.wikipedia.org/wiki/Docker_%28software%29">“an open-source project that automates the deployment of applications inside software containers.”</a> Essentially, Docker runs a processes from within a container that includes all dependencies the process needs to run. This allows containers to run almost anywhere. For example, you may have a container for running MySQL.</li>
  <li>Docker Compose <a href="https://docs.docker.com/userguide/">“allows you to define an application’s components – their containers, configuration, links and volumes – in a single file. Then a single command will set everything up and start your application running.”</a> For example, you may use Docker Compose to bundle a web server container and a MySQL container.</li>
  <li>Bowline is a <a href="https://github.com/davenuman/bowline">“Drupal focused docker container helper that ties everything together.”</a> Bowline can be used to easily create a standard, local Drupal development environment for you by building the requisite Docker containers and configuring your settings. By default, <a href="http://www.civicactions.com/blog/2015/jan/27/dockerizing-drupal-project-development-and-testing">Bowline creates two containers: mysql 5.5 and a web container that provides apache, php 5.4, and related software.</a></li>
</ul>

<p>By using these tools, you can ensure that each member of your team has the same local setup. That way, if code works in one environment, then it works in all of them.</p>

<p>Now I’ll go through the steps I followed to set everything up on my Mac. For this tutorial I’ll be showing you how to set up a fresh Drupal 8 install, however you can also use these tools on new or existing Drupal 6 and 7 projects.</p>

<h2 id="initial-setup">Initial Setup</h2>

<h3 id="install-docker-on-your-machine">Install Docker on your machine</h3>

<p>Unfortunately, <a href="https://docs.docker.com/installation/mac/">you can’t run Docker natively in OS X</a>, as explained in the Docker documentation:</p>

<blockquote>
  <p>Instead, you must install the Boot2Docker application. The application includes a VirtualBox Virtual Machine (VM), Docker itself, and the Boot2Docker management tool. The Boot2Docker management tool is a lightweight Linux virtual machine made specifically to run the Docker daemon on Mac OS X.</p>
</blockquote>

<p>To install Boot2Docker, I followed the <a href="https://docs.docker.com/installation/mac/">Docker Mac installation instructions.</a>. First, I installed Boot2Docker from <a href="https://github.com/boot2docker/osx-installer/releases/latest">boot2docker/osx-installer</a> as explained in that tutorial. The docker and boot2docker binaries are installed in <code class="highlighter-rouge">/usr/local/bin</code> which you can access from your terminal. I then followed the instructions for starting Boot2Docker from the command line, running the following commands:</p>

<p>Setup Boot2Docker, this only needs to be run once during initial setup:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>boot2docker init
</code></pre>
</div>

<p>Start the boot2docker application:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>boot2docker start
</code></pre>
</div>

<p>Set the environment variables for the Docker client, so that it can access Docker running on the Boot2Docker virtual machine. Note, this needs to be run for each terminal window or tab you open:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">eval</span> <span class="s2">"</span><span class="k">$(</span>boot2docker shellinit<span class="k">)</span><span class="s2">"</span>
</code></pre>
</div>

<p>Verify that boot2docker is running:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>boot2docker status
</code></pre>
</div>

<p>Verify that the Docker client environment is initialized:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker version
</code></pre>
</div>

<h3 id="install-docker-compose">Install Docker Compose</h3>

<p>To install Docker Compose I followed the <a href="https://docs.docker.com/compose/install/#install-compose">Docker Compose installation
instructions</a>. I ran the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl -L https://github.com/docker/compose/releases/download/1.2.0/docker-compose-<span class="sb">`</span>uname -s<span class="sb">`</span>-<span class="sb">`</span>uname -m<span class="sb">`</span> &gt; /usr/local/bin/docker-compose
<span class="gp">$ </span>chmod +x /usr/local/bin/docker-compose
</code></pre>
</div>

<p>Verify the installation of Docker Compose:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker-compose --version
</code></pre>
</div>

<p>Optionally, if you choose to install command completion for Docker Compose for the bash shell, you may follow <a href="https://docs.docker.com/compose/completion/">these steps</a>, however on OS X you will probably have to modify the bash_completion.d path as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl -L https://raw.githubusercontent.com/docker/compose/1.2.0/contrib/completion/bash/docker-compose &gt; /usr/local/etc/bash_completion.d/docker-compose
</code></pre>
</div>

<h3 id="install-bowline-and-set-up-the-drupal-8-project">Install Bowline and set up the Drupal 8 Project</h3>

<p>The <a href="https://github.com/davenuman/bowline/blob/master/readme.md">Bowline project readme</a> provides installation and setup instructions, however I needed to make some modifications. For example, Fig has been deprecated in place of Docker Compose. Explicitly I did the following:</p>

<p>Pull the Docker images:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker pull davenuman/bowline-web-php
<span class="gp">$ </span>docker pull mysql:5.5
</code></pre>
</div>

<p>Navigate to your sites directory and create a new project for your drupal 8 site (for me, that directory is <code class="highlighter-rouge">/Users/dan/Sites</code>):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mkdir drupal8
<span class="gp">$ </span><span class="nb">cd </span>drupal8
</code></pre>
</div>

<p>Setup bowline:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git init
<span class="gp">$ </span>git remote add bowline git@github.com:davenuman/bowline.git
<span class="gp">$ </span>git remote update
<span class="gp">$ </span>git checkout bowline/master .
<span class="gp">$ </span>git add . <span class="o">&amp;&amp;</span> git status
<span class="gp">$ </span>git rm --cached readme.md
<span class="gp">$ </span>rm readme.md
<span class="gp">$ </span>git commit -m <span class="s1">'Starting with bowline code'</span>
</code></pre>
</div>

<p>Activate bowline and build the containers:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>. bin/activate
<span class="gp">$ </span>build
</code></pre>
</div>

<p>Check that that the containers are running:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bowline
</code></pre>
</div>

<p>Download Drupal 8 to your project folder and rename the folder as docroot. You can <a href="https://www.drupal.org/project/drupal">manually download it here</a>, or you can use wget as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>wget http://ftp.drupal.org/files/projects/drupal-8.0.0-beta9.tar.gz
<span class="gp">$ </span>tar -xzvf drupal-8.0.0-beta9.tar.gz
<span class="gp">$ </span>mv drupal-8.0.0-beta9 docroot
<span class="gp">$ </span>rm drupal-8.0.0-beta9.tar.gz
</code></pre>
</div>

<p>Update Composer (not to be confused with Docker Compose) to use Drush 7 (Drupal 8 does not work with older versions of Drush):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>composer require drush/drush:dev-master
</code></pre>
</div>

<p>Use bowline to initialize the site settings and then use drush to install Drupal</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>settings_init
<span class="gp">$ </span>drush si --sites-subdir<span class="o">=</span>default
</code></pre>
</div>

<p>Your Drupal 8 site is now set up and running on the web and MySQL Docker containers you set up using Bowline. However, a few extra steps are required so that you can access your site on the Apache server that is running within the web container.</p>

<p>Run the bowline command to get the IP address of your web container, it
should be something like <code class="highlighter-rouge">http://172.17.0.2/</code></p>

<p>Run the boot2docker ip command to get the IP address of the boot2docker virtual machine, it should be something like <code class="highlighter-rouge">192.168.59.103</code></p>

<p>We now manually add a subnet route to the docker instance running inside
the boot2docker virtual machine as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo route -n add 172.0.0.0/8 192.168.59.103
</code></pre>
</div>

<p>You should now be able to access your Drupal 8 site using the web IP address by ing the <code class="highlighter-rouge">bowline</code> command, for example <code class="highlighter-rouge">http://172.17.0.2/</code> for my setup.</p>

<p>One of the great things about Bowline is it sets up drush to work with your containers. You can use drush to get a one time login link for the admin user by simply running:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>drush uli
</code></pre>
</div>

<p>You can also debug the site using XDebug. I will explain how to set this up in a future blog post.</p>

<h2 id="when-youre-done">When you’re done</h2>

<p>Bowline, Boot2Docker, all docker containers, and the subnet route will all cease when you restart your machine, however you can manually stop them as follows:</p>

<p>Deactivate bowline:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>deactivate
</code></pre>
</div>

<p>Stop all docker containers:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker stop <span class="k">$(</span>docker ps -a -q<span class="k">)</span>
</code></pre>
</div>

<p>Stop the boot2docker virtual machine:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>boot2docker stop
</code></pre>
</div>

<p>Remove the static route:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo route -n delete 172.0.0.0/8 192.168.59.103
</code></pre>
</div>

<h2 id="running-in-the-future">Running in the future</h2>

<p>Next time you start you machine and want to fire up the development environment you’ll need to run the following commands from the project root.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>boot2docker start
<span class="gp">$ </span><span class="nb">eval</span> <span class="s2">"</span><span class="k">$(</span>boot2docker shellinit<span class="k">)</span><span class="s2">"</span>
<span class="gp">$ </span>. bin/activate
<span class="gp">$ </span>build
<span class="gp">$ </span>sudo route -n add 172.0.0.0/8 192.168.59.103
<span class="gp">$ </span>bowline
</code></pre>
</div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>For each new terminal window or tab you open, you have to set the Boot2Docker environment variables. If you see an error message like: “Couldn’t connect to Docker daemon - you might need to run `boot2docker up`.” you may need to run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">eval</span> <span class="s2">"</span><span class="k">$(</span>boot2docker shellinit<span class="k">)</span><span class="s2">"</span>
</code></pre>
</div>

<p>If you move to a different project within the same terminal window or tab, make sure you deactivate bowline:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>deactivate
</code></pre>
</div>

<p>If drush status is working, but the site is not loading, double check that you are rerouting to the Boot2Docker IP address:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo route -n add 172.0.0.0/8 192.168.59.103
</code></pre>
</div>

<h2 id="versions-used-in-this-tutorial">Versions used in this tutorial</h2>
<ul>
  <li>Docker 1.6.0</li>
  <li>Boot2Docker 1.6.0</li>
  <li>Docker Compose 1.2.0</li>
  <li>Drupal 8.0.0-beta9</li>
  <li>Drush 7.0-dev</li>
</ul>

    <hr>

    
      <div class="post-comments">
  
    <div class="expander">
      <a href="javascript:void(0)" id="js-expander-trigger" class="expander-trigger expander-hidden">Comments!</a>
      <div id="js-expander-content" class="expander-content">
        <!-- If there are existing comments, output them here. -->
        <div id="post-comments" class="post-comments"></div>
        <!-- New comment form -->
        <form id="comment-form">
          <h4>Leave a comment</h4>
          <div class="comment-name">
            <p>Name</p> <input type='text' name='name' id='name' required /><br>
          </div>

          <div class="comment-email">
            <p>Email</p> <input type='email' name='email' id='email' required />
            <p class="email-disclaimer">Savas Labs will never sell your email address or spam you.</p><br>
          </div>

          <p>Comment</p>
          <textarea name='comment' id='comment' required></textarea>
          <p class="hint below-textarea">Plain text format only please.</p>

          <input type='hidden' name='slug' id='slug' value='/2015/04/23/drupal-8-docker-bowline-setup.html' />
          <input type='text' name='url' id='url' />

          <div class='are-you-human'>
            <div class='are-you-human-owl'>
              <img src="/assets/img/owl.png" alt="Savas Labs logo">
            </div>
            <div class='are-you-human-field'>
              <p>What type of animal is the Savas Labs logo?</p>
              <input type='text' name='nocaptcha' id='nocaptcha' class='nocaptcha'>
              <p class="hint">Hint: 3 letters long, starts with an 'o' and ends with an 'l'.</p>
            </div>
          </div>

          <input type='submit' value='Submit' id='submit' class="submit-comment"/>
        </form>
      </div>
    </div>
  
  <hr>
</div>

    
    <div class="post-bottom">
  <div class="post-meta">
    <h4>About the author</h4>
    
      <a href="/team/dan-murphy">
        <img src="/assets/img/team/dan-murphy.jpg" alt="Dan Murphy">
      </a>
      <p class="post-author-desc">Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.</p>
    
  </div>
    <!-- Once we have more content, change this to posts related by tag -->
  <div class="post-related flex-container">
    <h4>Recent posts by Savas Labs</h4>
    <div class="cards">
      
      
        
        
          <div class="card">
            <a href="/2016/09/23/supercharged-seo-with-drupal-8.html">
              <div class="card-header">
                  Supercharged SEO with Drupal 8
              </div>
              <div class="card-copy">
                <p>Sep 23, 2016</p>
                <p><p>SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
        
          <div class="card">
            <a href="/2016/08/29/internship-thoughts.html">
              <div class="card-header">
                  A Savas Labs Internship
              </div>
              <div class="card-copy">
                <p>Aug 29, 2016</p>
                <p><p>What it’s like to learn at Savas Labs.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
        
          <div class="card">
            <a href="/2016/06/22/user-testing.html">
              <div class="card-header">
                  Usability Testing - Our Process and Favorite Practices
              </div>
              <div class="card-copy">
                <p>Jun 22, 2016</p>
                <p><p>Our approach to designing, conducting, and learning from user testing and other analyses.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
</div>

    <div class="previous-next-links">
  <div class="next">
    
      <a href="/2015/04/27/durham-restaurant-time-machine.html"><i class="fa fa-long-arrow-left "></i> Building a time machine for Durham's food landscape</a>
    
  </div>
  <div class="previous">
    
      <a href="/2015/04/16/codesprint-port-views-geojson-drupal-8.html"> Code sprint: Help port Views GeoJSON to Drupal 8 <i class="fa fa-long-arrow-right"></i></a>
    
  </div>
</div>


  </article>

</div>

      </div>
    </div>

    <div class="contact-block">
  <div class="contact-block__items">
    <h3>Interested in working with us?</h3>
    <a href="/contact">Get in touch!</a>
  </div>
</div>
    <footer class="footer" role="contentinfo">
  <div class="footer-links">
    <ul>
      <li><h3>Location</h3></li>
      <li>Savas Labs<br />
          PMB 114<br />
          201 W Main Street, Suite 100<br />
          Durham, NC 27701<br /></li>
    </ul>
    <ul>
      <li><h3>Around the Web</h3></li>
      <ul>
        <li><a href="https://github.com/savaslabs"><span class="mega-octicon octicon-mark-github"></span></a></li>
        <li><a href="https://www.drupal.org/node/2466865"><i class="fa fa-drupal fa-lg fa-2x"></i></a></li>
        <li><a href="https://twitter.com/savas_labs"><i class="fa fa-twitter fa-lg fa-2x"></i></a></li>
        <li><a href="https://www.linkedin.com/company/savas-labs"><i class="fa fa-linkedin fa-lg fa-2x"></i></a></li>
      </ul>
    </ul>
    <ul>
      <li><h3>Contact</h3></li>
      <li><a href="mailto:info@savaslabs.com">info@savaslabs.com</a></li>
      <li>(919) 432-4660</li>
    </ul>
  </div>

</footer>

<div class="footer-copyright">
  <p>Copyright &copy; Savas Labs 2016</p>
</div>


  </body>

</html>
