<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="cache-control" content="public">
  <meta http-equiv="expires" content="86400">
  
  <title>Managing GeoJSON data using GDAL | Savas Labs</title>
  
  <meta name="description" content="In my last tutorial, we used USGS earthquake data to make a simple web map using leaflet. Today, we’ll explore how to use GDAL tools to explore and manipulat...">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="canonical" href="http://savaslabs.com/2015/05/25/manage-geojson.html">
  <link rel="alternate" type="application/rss+xml" title="Savas Labs" href="http://savaslabs.com/feed.xml" />
  
  
  
  



<script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "about": "Sometimes the data you want isn't exactly the data you have. This post examines how to clean, filter and convert data using free and open-source tools.",
      "articleBody": "







&lt;div class=&quot;outer-container&quot;&gt;
  &lt;div class=&quot;page--post__main&quot;&gt;
    &lt;div class=&quot;region--featured-image&quot;&gt;
      
      &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1000by500-89f5b6.jpg&quot; media=&quot;(min-width: 1120px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-746by373-89f5b6.jpg&quot; media=&quot;(min-width: 860px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-860by430-89f5b6.jpg&quot; media=&quot;(min-width: 640px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1280by640-89f5b6.jpg&quot; media=&quot;(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-640by320-89f5b6.jpg&quot; media=&quot;(min-width: 400px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-800by400-89f5b6.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg&quot; class=&quot;image--post-featured-image&quot; itemprop=&quot;image&quot; alt=&quot;Savas Labs blog&quot; &gt;
  &lt;/picture&gt;

      
    &lt;/div&gt;
    &lt;div class=&quot;region--post-header&quot;&gt;
      &lt;h1 class=&quot;region--post-header__title&quot;&gt;Managing GeoJSON data using GDAL&lt;/h1&gt;
      &lt;div class=&quot;region--post-header__post-info&quot;&gt;
        &lt;div class=&quot;region--post-header__post-info__authors&quot;&gt;
          
&lt;div class=&quot;post-author&quot;&gt;
  &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Tim Stallmann&quot; &gt;
  &lt;/picture&gt;

  &lt;p class=&quot;post-author__name&quot;&gt;&lt;/p&gt;
  &lt;p class=&quot;post-author__title&quot;&gt;&lt;/p&gt;
&lt;/div&gt;

        &lt;/div&gt;
        &lt;div class=&quot;region--post-header__post-info__stats&quot;&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-calendar&quot;&gt;&lt;/i&gt;May 25, 2015 &lt;/p&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;a href=&quot;/blog/tag/mapping/&quot;&gt;Mapping&lt;/a&gt;, &lt;a href=&quot;/blog/tag/leaflet/&quot;&gt;Leaflet.js&lt;/a&gt;, &lt;a href=&quot;/blog/tag/javascript/&quot;&gt;Javascript&lt;/a&gt;&lt;/p&gt;
          
          &lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;
          
        &lt;/div&gt;
      &lt;/div&gt;
      
    &lt;/div&gt;
    &lt;article class=&quot;region--post-content&quot;&gt;
      &lt;p&gt;In my &lt;a href=&quot;/2015/05/18/mapping-geojson.html&quot;&gt;last tutorial&lt;/a&gt;, we used USGS earthquake data to make a simple web map using leaflet. Today, we’ll explore how to use GDAL tools to explore and manipulate GeoJSON data.
Why might this be useful?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Removing un-needed properties to optimize filesize&lt;/li&gt;
  &lt;li&gt;Filtering data by location for mapping purposes&lt;/li&gt;
  &lt;li&gt;Cleaning data by removing invalid features&lt;/li&gt;
  &lt;li&gt;Converting other geo-data formats into GeoJSON, or vice versa.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;installing-gdal-and-downloading-sample-data&quot;&gt;Installing GDAL and Downloading Sample Data&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gdal.org&quot;&gt;GDAL (Geospatial Data Abstraction Library)&lt;/a&gt; is a free and open-source translator library for both raster and vector data formats. It provides a number of core functionalities for data processing and conversion which are used across the suite of &lt;a href=&quot;http://www.osgeo.org&quot;&gt;OSGeo applications&lt;/a&gt;. More importantly for our purposes, GDAL provides a bunch of command-line tools for processing geospatial data.&lt;/p&gt;

&lt;p&gt;If you’re on a Mac and using homebrew, you can easily install GDAL by running &lt;code class=&quot;highlighter-rouge&quot;&gt;brew install gdal&lt;/code&gt; from the command line. Otherwise, you can download &lt;a href=&quot;http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries&quot;&gt;binaries from GDAL&lt;/a&gt; or &lt;a href=&quot;http://trac.osgeo.org/gdal/wiki/BuildHints&quot;&gt;compile the source code yourself&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Just like the last tutorial, we’re going to be using the USGS earthquake data. Navigate to &lt;a href=&quot;http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson&quot;&gt;http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson&lt;/a&gt;, and save the resulting file to your computer as a &lt;code class=&quot;highlighter-rouge&quot;&gt;.geojson&lt;/code&gt; file.&lt;/p&gt;

&lt;h2 id=&quot;using-ogrinfo-to-look-inside-your-dataset&quot;&gt;Using OGRInfo to look inside your dataset&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gdal.org/ogrinfo.html&quot;&gt;OGRInfo&lt;/a&gt; lets us look inside geospatial datasets, viewing both summary info and lists of individual features. It’s useful to see what attributes are available for a given dataset or how many features it contains, as well as testing out attribute filters and examining individual features.&lt;/p&gt;

&lt;p&gt;Let’s try some basic commands. Just running ogrinfo on a dataset will give you a list of all the layers it contains. In the case of GeoJSON, this is usually just a single layer.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson&#39;&lt;/span&gt;
      using driver &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;GeoJSON&lt;span class=&quot;s1&quot;&gt;&#39; successful.
1: OGRGeoJSON (3D Point)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;That’s not very helpful, so let’s try peeking inside the (only) layer. ogrinfo syntax has you pass the layer name as the second argument. By default, it will print every feature in this dataset (7.5 Mb worth!) to the console, so instead let’s add the &lt;code class=&quot;highlighter-rouge&quot;&gt;-so&lt;/code&gt; argument, which displays a summary of the layer. Note that the GeoJSON driver for OGR has assigned the layer name &lt;code class=&quot;highlighter-rouge&quot;&gt;OGRGeoJSON&lt;/code&gt;, which we’re passing in:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson OGRGeoJSON -so
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson&#39;&lt;/span&gt;
      using driver &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;GeoJSON&lt;span class=&quot;s1&quot;&gt;&#39; successful.

Layer name: OGRGeoJSON
Geometry: 3D Point
Feature Count: 10082
Extent: (-179.924400, -62.035900) - (179.989800, 68.959900)
Layer SRS WKT:
GEOGCS[&quot;WGS 84&quot;,
    DATUM[&quot;WGS_1984&quot;,
        SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,
            AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
        AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
    PRIMEM[&quot;Greenwich&quot;,0,
        AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
    UNIT[&quot;degree&quot;,0.0174532925199433,
        AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],
    AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
mag: Real (0.0)
place: String (0.0)
...
magType: String (0.0)
type: String (0.0)
title: String (0.0)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now this is getting somewhere! We’ve got info about the number of features, the extent of the data (apparently there aren’t earthquakes at the poles, or USGS isn’t monitoring them), the coordinate system of the data, and a full list of attributes.&lt;/p&gt;

&lt;p&gt;What might that &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; attribute be telling us? We can use ogrinfo to run basic SQL queries on the data as well, for example:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT DISTINCT type FROM OGRGeoJSON -q&quot;&lt;/span&gt;
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  type (String) = earthquake

OGRFeature(OGRGeoJSON):1
  type (String) = quarry blast

...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Note: I’m using the &lt;code class=&quot;highlighter-rouge&quot;&gt;-q&lt;/code&gt; flag to suppress some of the more verbose output. Also, ogrinfo unfortunately doesn’t support &lt;code class=&quot;highlighter-rouge&quot;&gt;GROUP BY&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;LIMIT&lt;/code&gt; clauses on SQL queries for GeoJSON files.&lt;/p&gt;

&lt;p&gt;We can also use this to answer some basic questions about the data. Like, how many earthquakes were recorded with magnitude of 5 or greater?&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT COUNT(*) FROM OGRGeoJSON WHERE mag&amp;gt;=5&quot;&lt;/span&gt; -q
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  COUNT_* (Integer) = 176
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;optimizing-your-data&quot;&gt;Optimizing your data&lt;/h2&gt;

&lt;p&gt;Check the filesize of the &lt;code class=&quot;highlighter-rouge&quot;&gt;all_month.geojson&lt;/code&gt; file you downloaded. It probably weighs in at around 7-8 Mb, which is really unwieldy for a client to download before viewing a web map. Can we trim the file down a bit?&lt;/p&gt;

&lt;p&gt;First pass: if you remember the output from &lt;code class=&quot;highlighter-rouge&quot;&gt;ogrinfo -so&lt;/code&gt;, you’ll remember that there are a &lt;em&gt;lot&lt;/em&gt; of attributes in this data-set! For a web map, we usually just use a few attributes to populate pop-up text. In this case, we’re just going to use the place, mag, and url properties.&lt;/p&gt;

&lt;p&gt;Ogr2Ogr is another tool designed for converting to and from a variety of geospatial data formats, but it also allows us to filter the data as we’re copying it and only copy over specific attributes. So we can use it to “convert” the dataset from GeoJSON into a new GeoJSON with fewer columns.&lt;/p&gt;

&lt;p&gt;The basic syntax is:
&lt;code class=&quot;highlighter-rouge&quot;&gt;ogr2ogr -f &quot;Output format specifier&quot; output_filename input_filename&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;We want to cherry-pick only a few attribute fields, which we can to using the &lt;code class=&quot;highlighter-rouge&quot;&gt;-select&lt;/code&gt; flag:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -select mag,place,url
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If you look at the filesize on the new geojson we just created, you’ll see we managed to strip it down to a much smaller 2-3 Mb.&lt;/p&gt;

&lt;p&gt;ogr2ogr also accepts the &lt;code class=&quot;highlighter-rouge&quot;&gt;-sql&lt;/code&gt; flag, so we could also have written:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT mag,place,url FROM OGRGeoJSON&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;filtering-data-by-attributes&quot;&gt;Filtering data by attributes&lt;/h2&gt;

&lt;p&gt;With this syntax, it’s easy to select out a subset of the features (since who will really be able to navigate 10,000+ points if we were to map the full dataset, anyway?):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_mag_over_5.geojson all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT mag,place,url FROM OGRGeoJSON WHERE mag&amp;gt;=5&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now we’re just down to 44 kb, a totally reasonable size for mapping.&lt;/p&gt;

&lt;p&gt;Here’s what the dataset we just made looks like (via &lt;a href=&quot;http://geojson.io&quot;&gt;geojson.io&lt;/a&gt;):
&lt;img src=&quot;/assets/img/blog/earthquakes-mag-5-geojson-io.jpg&quot; width=&quot;500px&quot; height=&quot;250px&quot; alt=&quot;Screenshot of GeoJSON.io map showing earthquakes distributed across the world&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;filtering-by-location&quot;&gt;Filtering by location&lt;/h2&gt;

&lt;p&gt;What if we just want to map earthquakes that have taken place in a specific area?&lt;/p&gt;

&lt;p&gt;The simplest way to approach this it to filter the data by a bounding box – a rectangular area defined by latitude and longitude coordinates. &lt;a href=&quot;http://geojson.io&quot;&gt;Geojson.io&lt;/a&gt; has a rectangle-drawing tool which will give you latitude and longitude coordinates of the corners pretty easily. I tried drawing a rectangle over the rough area of the US East of the Mississippi, and passed those arguments into ogr2ogr’s &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrc xmin ymin xmax ymax&lt;/code&gt; argument (that’s South-East corner longitude, SE corner latitude, NW longitude, NW latitude):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_us_east.geojson all_month.geojson -clipsrc -86.835 24.206 -69.609 46.800
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Here’s the result. Florida turns out to be a good place to live if you want to avoid minor tremors! Also notice that because of using a simple latitude-longitude rectangle to filter the data, we also pulled in those parts of Canada which are south of Maine.
&lt;img src=&quot;/assets/img/blog/earthquakes-us-east-geojson-io.jpg&quot; width=&quot;400px&quot; height=&quot;400px&quot; alt=&quot;Screenshot of GeoJSON.io map showing earthquakes in the past month in the United States, with one point in Canada&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;filtering-by-location-2-clipping-to-another-dataset&quot;&gt;Filtering by location 2: Clipping to another dataset&lt;/h2&gt;

&lt;p&gt;But what if we want all the earthquakes in, say, North Dakota? For more complicated area queries, we’ll have to supply the clipping area as a separate datasource.&lt;/p&gt;

&lt;p&gt;We can download a shapefile of all 50 US States from the Census Bureau, then select out North Dakota and pass that as a clipping argument to ogr2ogr. First, download the &lt;code class=&quot;highlighter-rouge&quot;&gt;tl_2014_us_state.zip&lt;/code&gt; file from the &lt;a href=&quot;ftp://ftp2.census.gov/geo/tiger/TIGER2014/STATE/&quot;&gt;Census Bureau FTP site&lt;/a&gt;, and unzip it to the same directory as your geojson file.&lt;/p&gt;

&lt;p&gt;Let’s use ogrinfo to examine this file and see how we could select out North Dakota&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo tl_2014_us_state.shp tl_2014_us_state -so
INFO: Open of &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;tl_2014_us_state.shp&lt;span class=&quot;s1&quot;&gt;&#39;
      using driver `ESRI Shapefile&#39;&lt;/span&gt; successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 56
Extent: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-179.231086, -14.601813&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;179.859681, 71.441059&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Layer SRS WKT:
GEOGCS[&lt;span class=&quot;s2&quot;&gt;&quot;GCS_North_American_1983&quot;&lt;/span&gt;,
    DATUM[&lt;span class=&quot;s2&quot;&gt;&quot;North_American_Datum_1983&quot;&lt;/span&gt;,
        SPHEROID[&lt;span class=&quot;s2&quot;&gt;&quot;GRS_1980&quot;&lt;/span&gt;,6378137,298.257222101]],
    PRIMEM[&lt;span class=&quot;s2&quot;&gt;&quot;Greenwich&quot;&lt;/span&gt;,0],
    UNIT[&lt;span class=&quot;s2&quot;&gt;&quot;Degree&quot;&lt;/span&gt;,0.017453292519943295]]
REGION: String &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
NAME: String &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;100.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Looks like we can just select by name. Try it first in ogrinfo:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo tl_2014_us_state.shp -SQL &lt;span class=&quot;s2&quot;&gt;&quot;SELECT * FROM tl_2014_us_state WHERE NAME=&#39;Georgia&#39;&quot;&lt;/span&gt; -GEOM&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NO
INFO: Open of &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;tl_2014_us_state.shp&lt;span class=&quot;s1&quot;&gt;&#39;
      using driver `ESRI Shapefile&#39;&lt;/span&gt; successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 1
Extent: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-179.231086, -14.601813&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;179.859681, 71.441059&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;That worked, so now we can format the whole ogr2ogr string, using &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrc&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrcsql&lt;/code&gt; options. Note that because we’re using a very detailed shapefile for the state outlines, this command takes a long time to process. On my MacBook Pro it clocks in at around 3 minutes.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_georgia.geojson all_month.geojson -clipsrc tl_2014_us_state.shp -clipsrcsql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT * FROM tl_2014_us_state WHERE NAME=&#39;Georgia&#39;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And here’s the GeoJSON dataset we just created, viewed on geojson.io – all two earthquakes in Georgia last month!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/earthquakes-georgia-geojson-io.jpg&quot; width=&quot;500px&quot; height=&quot;164px&quot; alt=&quot;Screenshot of GeoJSON.io map showing two earthquakes in Georgia&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

    &lt;/article&gt;
  &lt;/div&gt;
  &lt;div class=&quot;region--prev-next-links region--prev-next-links--mobile pagination&quot;&gt;
    &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2015/05/22/durham-living-wage.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2015/06/10/d8-theming-basics.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;page--post__aside region--post-aside&quot;&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--posts&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--posts&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Blog Posts&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          









































































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2016/10/19/optimizing-jekyll-with-gulp.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/test-tubes.jpg);&quot;&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Performance&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Optimizing Jekyll Performance with Gulp&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-120by122-bebfe8.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Anne Tomasevich&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;How we improved our company site’s performance with a better Jekyll workflow&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;





































































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2016/04/20/squabble-comments.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/default.jpg);&quot;&gt;
        
        
        
        
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Jekyll&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;How we added comments to our Jekyll site&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-120by120-c7115d.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Kosta Harlan&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;A peek under the hood at our website’s commenting app, Squabble.&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;






















































































































































































































































































        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--case-studies&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--case-studies&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Case Studies&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          

























&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/pmp-civil-rights-map/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/pmp-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/pmp-civil-rights-map/pmp-civil-rights-map-block.jpg&quot; alt=&quot;Durham Civil and Human Rights History Map&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Durham Civil and Human Rights History Map&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal 8 &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Web Mapping &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;
















&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/hunter-boots/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/hunter-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/hunter-boots/hunter-boots-block.jpg&quot; alt=&quot;Hunter Boots E-Commerce / Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Hunter Boots E-Commerce / Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Payment Processing &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Javascript &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;































        &lt;/div&gt;
        &lt;div class=&quot;region--post-aside__section--case-studies__cta flex-center&quot;&gt;
          &lt;a href=&quot;/results&quot; class=&quot;button--arrow--orange&quot;&gt;Our work&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;region--prev-next-links region--prev-next-links--post pagination&quot;&gt;
  &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2015/05/22/durham-living-wage.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2015/06/10/d8-theming-basics.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;region--comments&quot;&gt;
  
  &lt;div class=&quot;expander&quot;&gt;
    &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander--hidden&quot;&gt;
      &lt;p id=&quot;comments-trigger&quot;&gt;Comments&lt;/p&gt;
    &lt;/a&gt;
    &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content region&quot;&gt;

      &lt;!-- If there are existing comments, output them here. --&gt;
      &lt;div id=&quot;region--comments__comments&quot; class=&quot;region--comments__comments&quot;&gt;&lt;/div&gt;
      &lt;form id=&quot;form--comment&quot; class=&quot;form--comment&quot;&gt;
  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--name&quot;&gt;
        &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
        &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; required&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--email&quot;&gt;
        &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; required&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--comment form--comment__row__item&quot;&gt;
      &lt;label for=&quot;comment&quot;&gt;Comment&lt;/label&gt;
      &lt;textarea name=&quot;comment&quot; id=&quot;comment&quot; rows=&quot;4&quot; required&gt;&lt;/textarea&gt;
      &lt;p class=&quot;form--comment__helptext&quot;&gt;Plain text format only please.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;slug&quot; id=&quot;slug&quot; value=&quot;/2015/05/25/manage-geojson.html&quot;&gt;
  &lt;input type=&quot;text&quot; name=&quot;url&quot; id=&quot;url&quot;&gt;

  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--nocaptcha form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__image&quot;&gt;
        &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__input&quot;&gt;
        &lt;label for=&quot;nocaptcha&quot;&gt;What type of animal is the Savas Labs logo?&lt;/label&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Hint: 3 letters long, starts with an &quot;o&quot; and ends with an &quot;l&quot;.&lt;/p&gt;
        &lt;input type=&quot;text&quot; name=&quot;nocaptcha&quot; id=&quot;nocaptcha&quot; required&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Post comment&quot; id=&quot;submit&quot; class=&quot;form--comment__submit&quot;&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;
",
      "author": {
        "@context": "http://schema.org",
        "@type": "Person",
        "name": "Tim Stallmann",
        "affiliation": "Savas Labs",
        "worksFor": "Savas Labs"
      },
      "dateCreated": "2015-05-25 00:00:00 +0000",
      "dateModified": "2015-05-25 00:00:00 +0000",
      "datePublished": "2015-05-25 00:00:00 +0000",
      "headline": "Managing GeoJSON data using GDAL",
      "inLanguage": "en-US",
      "keywords": "mapping, leaflet, javascript",
      "mainEntityOfPage": "http://savaslabs.com/2015/05/25/manage-geojson.html",
      "publisher": {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Savas Labs",
        "logo": {
          "@context": "http://schema.org",
          "@type": "ImageObject",
          "description": "Savas Labs logo",
          "height": "50px",
          "url": "http://savaslabs.com/assets/img/logo.png",
          "width": "114px"
        }
      },
      "sourceOrganization": "Savas Labs",
      "text": "







&lt;div class=&quot;outer-container&quot;&gt;
  &lt;div class=&quot;page--post__main&quot;&gt;
    &lt;div class=&quot;region--featured-image&quot;&gt;
      
      &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1000by500-89f5b6.jpg&quot; media=&quot;(min-width: 1120px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-746by373-89f5b6.jpg&quot; media=&quot;(min-width: 860px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg&quot; media=&quot;(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-860by430-89f5b6.jpg&quot; media=&quot;(min-width: 640px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-1280by640-89f5b6.jpg&quot; media=&quot;(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-640by320-89f5b6.jpg&quot; media=&quot;(min-width: 400px)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-800by400-89f5b6.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg&quot; class=&quot;image--post-featured-image&quot; itemprop=&quot;image&quot; alt=&quot;Savas Labs blog&quot; &gt;
  &lt;/picture&gt;

      
    &lt;/div&gt;
    &lt;div class=&quot;region--post-header&quot;&gt;
      &lt;h1 class=&quot;region--post-header__title&quot;&gt;Managing GeoJSON data using GDAL&lt;/h1&gt;
      &lt;div class=&quot;region--post-header__post-info&quot;&gt;
        &lt;div class=&quot;region--post-header__post-info__authors&quot;&gt;
          
&lt;div class=&quot;post-author&quot;&gt;
  &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Tim Stallmann&quot; &gt;
  &lt;/picture&gt;

  &lt;p class=&quot;post-author__name&quot;&gt;&lt;/p&gt;
  &lt;p class=&quot;post-author__title&quot;&gt;&lt;/p&gt;
&lt;/div&gt;

        &lt;/div&gt;
        &lt;div class=&quot;region--post-header__post-info__stats&quot;&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-calendar&quot;&gt;&lt;/i&gt;May 25, 2015 &lt;/p&gt;
          &lt;p&gt;&lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;a href=&quot;/blog/tag/mapping/&quot;&gt;Mapping&lt;/a&gt;, &lt;a href=&quot;/blog/tag/leaflet/&quot;&gt;Leaflet.js&lt;/a&gt;, &lt;a href=&quot;/blog/tag/javascript/&quot;&gt;Javascript&lt;/a&gt;&lt;/p&gt;
          
          &lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;
          
        &lt;/div&gt;
      &lt;/div&gt;
      
    &lt;/div&gt;
    &lt;article class=&quot;region--post-content&quot;&gt;
      &lt;p&gt;In my &lt;a href=&quot;/2015/05/18/mapping-geojson.html&quot;&gt;last tutorial&lt;/a&gt;, we used USGS earthquake data to make a simple web map using leaflet. Today, we’ll explore how to use GDAL tools to explore and manipulate GeoJSON data.
Why might this be useful?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Removing un-needed properties to optimize filesize&lt;/li&gt;
  &lt;li&gt;Filtering data by location for mapping purposes&lt;/li&gt;
  &lt;li&gt;Cleaning data by removing invalid features&lt;/li&gt;
  &lt;li&gt;Converting other geo-data formats into GeoJSON, or vice versa.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;installing-gdal-and-downloading-sample-data&quot;&gt;Installing GDAL and Downloading Sample Data&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gdal.org&quot;&gt;GDAL (Geospatial Data Abstraction Library)&lt;/a&gt; is a free and open-source translator library for both raster and vector data formats. It provides a number of core functionalities for data processing and conversion which are used across the suite of &lt;a href=&quot;http://www.osgeo.org&quot;&gt;OSGeo applications&lt;/a&gt;. More importantly for our purposes, GDAL provides a bunch of command-line tools for processing geospatial data.&lt;/p&gt;

&lt;p&gt;If you’re on a Mac and using homebrew, you can easily install GDAL by running &lt;code class=&quot;highlighter-rouge&quot;&gt;brew install gdal&lt;/code&gt; from the command line. Otherwise, you can download &lt;a href=&quot;http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries&quot;&gt;binaries from GDAL&lt;/a&gt; or &lt;a href=&quot;http://trac.osgeo.org/gdal/wiki/BuildHints&quot;&gt;compile the source code yourself&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Just like the last tutorial, we’re going to be using the USGS earthquake data. Navigate to &lt;a href=&quot;http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson&quot;&gt;http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson&lt;/a&gt;, and save the resulting file to your computer as a &lt;code class=&quot;highlighter-rouge&quot;&gt;.geojson&lt;/code&gt; file.&lt;/p&gt;

&lt;h2 id=&quot;using-ogrinfo-to-look-inside-your-dataset&quot;&gt;Using OGRInfo to look inside your dataset&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gdal.org/ogrinfo.html&quot;&gt;OGRInfo&lt;/a&gt; lets us look inside geospatial datasets, viewing both summary info and lists of individual features. It’s useful to see what attributes are available for a given dataset or how many features it contains, as well as testing out attribute filters and examining individual features.&lt;/p&gt;

&lt;p&gt;Let’s try some basic commands. Just running ogrinfo on a dataset will give you a list of all the layers it contains. In the case of GeoJSON, this is usually just a single layer.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson&#39;&lt;/span&gt;
      using driver &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;GeoJSON&lt;span class=&quot;s1&quot;&gt;&#39; successful.
1: OGRGeoJSON (3D Point)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;That’s not very helpful, so let’s try peeking inside the (only) layer. ogrinfo syntax has you pass the layer name as the second argument. By default, it will print every feature in this dataset (7.5 Mb worth!) to the console, so instead let’s add the &lt;code class=&quot;highlighter-rouge&quot;&gt;-so&lt;/code&gt; argument, which displays a summary of the layer. Note that the GeoJSON driver for OGR has assigned the layer name &lt;code class=&quot;highlighter-rouge&quot;&gt;OGRGeoJSON&lt;/code&gt;, which we’re passing in:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson OGRGeoJSON -so
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson&#39;&lt;/span&gt;
      using driver &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;GeoJSON&lt;span class=&quot;s1&quot;&gt;&#39; successful.

Layer name: OGRGeoJSON
Geometry: 3D Point
Feature Count: 10082
Extent: (-179.924400, -62.035900) - (179.989800, 68.959900)
Layer SRS WKT:
GEOGCS[&quot;WGS 84&quot;,
    DATUM[&quot;WGS_1984&quot;,
        SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,
            AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
        AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
    PRIMEM[&quot;Greenwich&quot;,0,
        AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
    UNIT[&quot;degree&quot;,0.0174532925199433,
        AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],
    AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
mag: Real (0.0)
place: String (0.0)
...
magType: String (0.0)
type: String (0.0)
title: String (0.0)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now this is getting somewhere! We’ve got info about the number of features, the extent of the data (apparently there aren’t earthquakes at the poles, or USGS isn’t monitoring them), the coordinate system of the data, and a full list of attributes.&lt;/p&gt;

&lt;p&gt;What might that &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; attribute be telling us? We can use ogrinfo to run basic SQL queries on the data as well, for example:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT DISTINCT type FROM OGRGeoJSON -q&quot;&lt;/span&gt;
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  type (String) = earthquake

OGRFeature(OGRGeoJSON):1
  type (String) = quarry blast

...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Note: I’m using the &lt;code class=&quot;highlighter-rouge&quot;&gt;-q&lt;/code&gt; flag to suppress some of the more verbose output. Also, ogrinfo unfortunately doesn’t support &lt;code class=&quot;highlighter-rouge&quot;&gt;GROUP BY&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;LIMIT&lt;/code&gt; clauses on SQL queries for GeoJSON files.&lt;/p&gt;

&lt;p&gt;We can also use this to answer some basic questions about the data. Like, how many earthquakes were recorded with magnitude of 5 or greater?&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT COUNT(*) FROM OGRGeoJSON WHERE mag&amp;gt;=5&quot;&lt;/span&gt; -q
ERROR 4: GeoJSON Driver doesn&lt;span class=&quot;s1&quot;&gt;&#39;t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  COUNT_* (Integer) = 176
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;optimizing-your-data&quot;&gt;Optimizing your data&lt;/h2&gt;

&lt;p&gt;Check the filesize of the &lt;code class=&quot;highlighter-rouge&quot;&gt;all_month.geojson&lt;/code&gt; file you downloaded. It probably weighs in at around 7-8 Mb, which is really unwieldy for a client to download before viewing a web map. Can we trim the file down a bit?&lt;/p&gt;

&lt;p&gt;First pass: if you remember the output from &lt;code class=&quot;highlighter-rouge&quot;&gt;ogrinfo -so&lt;/code&gt;, you’ll remember that there are a &lt;em&gt;lot&lt;/em&gt; of attributes in this data-set! For a web map, we usually just use a few attributes to populate pop-up text. In this case, we’re just going to use the place, mag, and url properties.&lt;/p&gt;

&lt;p&gt;Ogr2Ogr is another tool designed for converting to and from a variety of geospatial data formats, but it also allows us to filter the data as we’re copying it and only copy over specific attributes. So we can use it to “convert” the dataset from GeoJSON into a new GeoJSON with fewer columns.&lt;/p&gt;

&lt;p&gt;The basic syntax is:
&lt;code class=&quot;highlighter-rouge&quot;&gt;ogr2ogr -f &quot;Output format specifier&quot; output_filename input_filename&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;We want to cherry-pick only a few attribute fields, which we can to using the &lt;code class=&quot;highlighter-rouge&quot;&gt;-select&lt;/code&gt; flag:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -select mag,place,url
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If you look at the filesize on the new geojson we just created, you’ll see we managed to strip it down to a much smaller 2-3 Mb.&lt;/p&gt;

&lt;p&gt;ogr2ogr also accepts the &lt;code class=&quot;highlighter-rouge&quot;&gt;-sql&lt;/code&gt; flag, so we could also have written:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT mag,place,url FROM OGRGeoJSON&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;filtering-data-by-attributes&quot;&gt;Filtering data by attributes&lt;/h2&gt;

&lt;p&gt;With this syntax, it’s easy to select out a subset of the features (since who will really be able to navigate 10,000+ points if we were to map the full dataset, anyway?):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_mag_over_5.geojson all_month.geojson -sql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT mag,place,url FROM OGRGeoJSON WHERE mag&amp;gt;=5&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now we’re just down to 44 kb, a totally reasonable size for mapping.&lt;/p&gt;

&lt;p&gt;Here’s what the dataset we just made looks like (via &lt;a href=&quot;http://geojson.io&quot;&gt;geojson.io&lt;/a&gt;):
&lt;img src=&quot;/assets/img/blog/earthquakes-mag-5-geojson-io.jpg&quot; width=&quot;500px&quot; height=&quot;250px&quot; alt=&quot;Screenshot of GeoJSON.io map showing earthquakes distributed across the world&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;filtering-by-location&quot;&gt;Filtering by location&lt;/h2&gt;

&lt;p&gt;What if we just want to map earthquakes that have taken place in a specific area?&lt;/p&gt;

&lt;p&gt;The simplest way to approach this it to filter the data by a bounding box – a rectangular area defined by latitude and longitude coordinates. &lt;a href=&quot;http://geojson.io&quot;&gt;Geojson.io&lt;/a&gt; has a rectangle-drawing tool which will give you latitude and longitude coordinates of the corners pretty easily. I tried drawing a rectangle over the rough area of the US East of the Mississippi, and passed those arguments into ogr2ogr’s &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrc xmin ymin xmax ymax&lt;/code&gt; argument (that’s South-East corner longitude, SE corner latitude, NW longitude, NW latitude):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_us_east.geojson all_month.geojson -clipsrc -86.835 24.206 -69.609 46.800
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Here’s the result. Florida turns out to be a good place to live if you want to avoid minor tremors! Also notice that because of using a simple latitude-longitude rectangle to filter the data, we also pulled in those parts of Canada which are south of Maine.
&lt;img src=&quot;/assets/img/blog/earthquakes-us-east-geojson-io.jpg&quot; width=&quot;400px&quot; height=&quot;400px&quot; alt=&quot;Screenshot of GeoJSON.io map showing earthquakes in the past month in the United States, with one point in Canada&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;filtering-by-location-2-clipping-to-another-dataset&quot;&gt;Filtering by location 2: Clipping to another dataset&lt;/h2&gt;

&lt;p&gt;But what if we want all the earthquakes in, say, North Dakota? For more complicated area queries, we’ll have to supply the clipping area as a separate datasource.&lt;/p&gt;

&lt;p&gt;We can download a shapefile of all 50 US States from the Census Bureau, then select out North Dakota and pass that as a clipping argument to ogr2ogr. First, download the &lt;code class=&quot;highlighter-rouge&quot;&gt;tl_2014_us_state.zip&lt;/code&gt; file from the &lt;a href=&quot;ftp://ftp2.census.gov/geo/tiger/TIGER2014/STATE/&quot;&gt;Census Bureau FTP site&lt;/a&gt;, and unzip it to the same directory as your geojson file.&lt;/p&gt;

&lt;p&gt;Let’s use ogrinfo to examine this file and see how we could select out North Dakota&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo tl_2014_us_state.shp tl_2014_us_state -so
INFO: Open of &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;tl_2014_us_state.shp&lt;span class=&quot;s1&quot;&gt;&#39;
      using driver `ESRI Shapefile&#39;&lt;/span&gt; successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 56
Extent: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-179.231086, -14.601813&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;179.859681, 71.441059&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Layer SRS WKT:
GEOGCS[&lt;span class=&quot;s2&quot;&gt;&quot;GCS_North_American_1983&quot;&lt;/span&gt;,
    DATUM[&lt;span class=&quot;s2&quot;&gt;&quot;North_American_Datum_1983&quot;&lt;/span&gt;,
        SPHEROID[&lt;span class=&quot;s2&quot;&gt;&quot;GRS_1980&quot;&lt;/span&gt;,6378137,298.257222101]],
    PRIMEM[&lt;span class=&quot;s2&quot;&gt;&quot;Greenwich&quot;&lt;/span&gt;,0],
    UNIT[&lt;span class=&quot;s2&quot;&gt;&quot;Degree&quot;&lt;/span&gt;,0.017453292519943295]]
REGION: String &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
NAME: String &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;100.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Looks like we can just select by name. Try it first in ogrinfo:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogrinfo tl_2014_us_state.shp -SQL &lt;span class=&quot;s2&quot;&gt;&quot;SELECT * FROM tl_2014_us_state WHERE NAME=&#39;Georgia&#39;&quot;&lt;/span&gt; -GEOM&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NO
INFO: Open of &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;tl_2014_us_state.shp&lt;span class=&quot;s1&quot;&gt;&#39;
      using driver `ESRI Shapefile&#39;&lt;/span&gt; successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 1
Extent: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-179.231086, -14.601813&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;179.859681, 71.441059&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;That worked, so now we can format the whole ogr2ogr string, using &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrc&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;-clipsrcsql&lt;/code&gt; options. Note that because we’re using a very detailed shapefile for the state outlines, this command takes a long time to process. On my MacBook Pro it clocks in at around 3 minutes.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ogr2ogr -f GeoJSON all_month_georgia.geojson all_month.geojson -clipsrc tl_2014_us_state.shp -clipsrcsql &lt;span class=&quot;s2&quot;&gt;&quot;SELECT * FROM tl_2014_us_state WHERE NAME=&#39;Georgia&#39;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And here’s the GeoJSON dataset we just created, viewed on geojson.io – all two earthquakes in Georgia last month!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/blog/earthquakes-georgia-geojson-io.jpg&quot; width=&quot;500px&quot; height=&quot;164px&quot; alt=&quot;Screenshot of GeoJSON.io map showing two earthquakes in Georgia&quot; class=&quot;blog-image-large&quot; /&gt;&lt;/p&gt;

    &lt;/article&gt;
  &lt;/div&gt;
  &lt;div class=&quot;region--prev-next-links region--prev-next-links--mobile pagination&quot;&gt;
    &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2015/05/22/durham-living-wage.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2015/06/10/d8-theming-basics.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;page--post__aside region--post-aside&quot;&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--posts&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--posts&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Blog Posts&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          









































































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2016/10/19/optimizing-jekyll-with-gulp.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/test-tubes.jpg);&quot;&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Performance&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;Optimizing Jekyll Performance with Gulp&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-120by122-bebfe8.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Anne Tomasevich&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;How we improved our company site’s performance with a better Jekyll workflow&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;





































































&lt;div class=&quot;tile--blog tile--blog--detailed tile&quot;&gt;
  &lt;a href=&quot;/2016/04/20/squabble-comments.html&quot; class=&quot;tile--blog__link&quot;&gt;
    &lt;div class=&quot;tile--blog__content tile__content bg-light-teal&quot;&gt;
      
      &lt;div class=&quot;tile--blog__image&quot; style=&quot;background-image: url(/assets/img/blog/default.jpg);&quot;&gt;
        
        
        
        
        
        
        
        &lt;p class=&quot;tile--blog--detailed__primary-tag&quot;&gt;Jekyll&lt;/p&gt;
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      &lt;/div&gt;
      &lt;div class=&quot;tile--blog__post-title&quot;&gt;
        &lt;p&gt;How we added comments to our Jekyll site&lt;/p&gt;

        &lt;div class=&quot;tile--blog--detailed__author&quot;&gt;
          
          
          &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-120by120-c7115d.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg&quot; class=&quot;image--team-blog-tile&quot; itemprop=&quot;image&quot; alt=&quot;Kosta Harlan&quot; &gt;
  &lt;/picture&gt;

          
          
        &lt;/div&gt;
        &lt;div class=&quot;tile--blog--detailed__author-bg&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;tile--blog__hover tile__hover bg-orange&quot;&gt;
      &lt;p&gt;A peek under the hood at our website’s commenting app, Squabble.&lt;/p&gt;

      &lt;p class=&quot;link--cta link--cta--inverse&quot;&gt;Read more&lt;/p&gt;
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;






















































































































































































































































































        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;region--post-aside__section__wrapper--case-studies&quot;&gt;
      &lt;div class=&quot;region--post-aside__section region--post-aside__section--case-studies&quot;&gt;
        &lt;h2 class=&quot;heading--sans-serif c-grey h3&quot;&gt;Related Case Studies&lt;/h2&gt;
        &lt;div class=&quot;region--post-aside__section__items region--post-aside__section--posts__items&quot;&gt;
          

























&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/pmp-civil-rights-map/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/pmp-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/pmp-civil-rights-map/pmp-civil-rights-map-block.jpg&quot; alt=&quot;Durham Civil and Human Rights History Map&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Durham Civil and Human Rights History Map&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal 8 &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;UX &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Web Mapping &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;
















&lt;div class=&quot;case-study-block&quot;&gt;
  &lt;a class=&quot;case-study-block__link&quot; href=&quot;/results/case-studies/hunter-boots/&quot;&gt;
    &lt;div class=&quot;case-study-block__image&quot; style=&quot;background-image: url(/assets/img/work/logos/hunter-logo-eggshell.png);&quot;&gt;
      &lt;img src=&quot;/assets/img/work/hunter-boots/hunter-boots-block.jpg&quot; alt=&quot;Hunter Boots E-Commerce / Redesign&quot;&gt;
    &lt;/div&gt;
    
    &lt;h3 class=&quot;case-study-block__title&quot;&gt;Hunter Boots E-Commerce / Redesign&lt;/h3&gt;
    
    &lt;div class=&quot;case-study-block__tags&quot;&gt;
      
      
      &lt;p&gt;Drupal &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Responsive Design &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Payment Processing &lt;/p&gt;
      
      &lt;p&gt;&amp;bull; &lt;/p&gt;
      
      
      
      &lt;p&gt;Javascript &lt;/p&gt;
      
      
      
    &lt;/div&gt;
  &lt;/a&gt;
&lt;/div&gt;































        &lt;/div&gt;
        &lt;div class=&quot;region--post-aside__section--case-studies__cta flex-center&quot;&gt;
          &lt;a href=&quot;/results&quot; class=&quot;button--arrow--orange&quot;&gt;Our work&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;region--prev-next-links region--prev-next-links--post pagination&quot;&gt;
  &lt;div class=&quot;outer-container&quot;&gt;
  
  &lt;a href=&quot;/2015/05/22/durham-living-wage.html&quot; class=&quot;pagination__previous&quot;&gt;&lt;i class=&quot;fa fa-angle-left &quot;&gt;&lt;/i&gt; Prev&lt;/a&gt;
  
  &lt;a href=&quot;/blog&quot; class=&quot;pagination__view-all&quot;&gt;View All Blog Posts&lt;/a&gt;
  
  &lt;a href=&quot;/2015/06/10/d8-theming-basics.html&quot; class=&quot;pagination__next&quot;&gt; Next &lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
  
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;region--comments&quot;&gt;
  
  &lt;div class=&quot;expander&quot;&gt;
    &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander--hidden&quot;&gt;
      &lt;p id=&quot;comments-trigger&quot;&gt;Comments&lt;/p&gt;
    &lt;/a&gt;
    &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content region&quot;&gt;

      &lt;!-- If there are existing comments, output them here. --&gt;
      &lt;div id=&quot;region--comments__comments&quot; class=&quot;region--comments__comments&quot;&gt;&lt;/div&gt;
      &lt;form id=&quot;form--comment&quot; class=&quot;form--comment&quot;&gt;
  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--name&quot;&gt;
        &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
        &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;name&quot; required&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field form--comment__field--email&quot;&gt;
        &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; required&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--comment form--comment__row__item&quot;&gt;
      &lt;label for=&quot;comment&quot;&gt;Comment&lt;/label&gt;
      &lt;textarea name=&quot;comment&quot; id=&quot;comment&quot; rows=&quot;4&quot; required&gt;&lt;/textarea&gt;
      &lt;p class=&quot;form--comment__helptext&quot;&gt;Plain text format only please.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;slug&quot; id=&quot;slug&quot; value=&quot;/2015/05/25/manage-geojson.html&quot;&gt;
  &lt;input type=&quot;text&quot; name=&quot;url&quot; id=&quot;url&quot;&gt;

  &lt;div class=&quot;form--comment__row&quot;&gt;
    &lt;div class=&quot;form--comment__field form--comment__field--nocaptcha form--comment__row__item&quot;&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__image&quot;&gt;
        &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;form--comment__field--nocaptcha__input&quot;&gt;
        &lt;label for=&quot;nocaptcha&quot;&gt;What type of animal is the Savas Labs logo?&lt;/label&gt;
        &lt;p class=&quot;form--comment__helptext&quot;&gt;Hint: 3 letters long, starts with an &quot;o&quot; and ends with an &quot;l&quot;.&lt;/p&gt;
        &lt;input type=&quot;text&quot; name=&quot;nocaptcha&quot; id=&quot;nocaptcha&quot; required&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form--comment__row__item&quot;&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Post comment&quot; id=&quot;submit&quot; class=&quot;form--comment__submit&quot;&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;
",
      "url": "http://savaslabs.com/2015/05/25/manage-geojson.html"
    }
  </script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61514316-1', 'auto');
  ga('send', 'pageview');

</script>

  <script>
    !function(e){"use strict";var t=function(t,n,r){function o(e){return i.body?e():void setTimeout(function(){o(e)})}function l(){d.addEventListener&&d.removeEventListener("load",l),d.media=r||"all"}var a,i=e.document,d=i.createElement("link");if(n)a=n;else{var s=(i.body||i.getElementsByTagName("head")[0]).childNodes;a=s[s.length-1]}var u=i.styleSheets;d.rel="stylesheet",d.href=t,d.media="only x",o(function(){a.parentNode.insertBefore(d,n?a:a.nextSibling)});var f=function(e){for(var t=d.href,n=u.length;n--;)if(u[n].href===t)return e();setTimeout(function(){f(e)})};return d.addEventListener&&d.addEventListener("load",l),d.onloadcssdefined=f,f(l),d};"undefined"!=typeof exports?exports.loadCSS=t:e.loadCSS=t}("undefined"!=typeof global?global:this),function(e){if(e.loadCSS){var t=loadCSS.relpreload={};if(t.support=function(){try{return e.document.createElement("link").relList.supports("preload")}catch(t){}},t.poly=function(){for(var t=e.document.getElementsByTagName("link"),n=0;n<t.length;n++){var r=t[n];"preload"===r.rel&&"style"===r.getAttribute("as")&&(e.loadCSS(r.href,r),r.rel=null)}},!t.support()){t.poly();var n=e.setInterval(t.poly,300);e.addEventListener&&e.addEventListener("load",function(){e.clearInterval(n)})}}}(this);
    loadCSS('/assets/styles/main.css');
    loadCSS('https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700|Roboto+Slab:300,400');
  </script>
  
  <style>html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.bg-magenta{background-color:#9e023b}.bg-orange{background-color:#d3281b}.bg-eggshell{background-color:#fff8f3}.bg-teal{background-color:#0a5365}.bg-dark-teal{background-color:#06282d}.bg-grey{background-color:#565d5e}.bg-light-grey{background-color:#bdc2c3}.bg-light-teal{background-color:#f3f6f7}.bg-light-orange{background-color:#f29c96}.bg-purple{background-color:#501888}.bg-pink{background-color:#d33682}.bg-yellow{background-color:#f2a324}.bg-green{background-color:#055c2b}.c-magenta{color:#9e023b}.c-orange{color:#d3281b}.c-eggshell{color:#fff8f3}.c-teal{color:#0a5365}.c-dark-teal{color:#06282d}.c-grey{color:#565d5e}.c-light-grey{color:#bdc2c3}.c-light-teal{color:#f3f6f7}.c-light-orange{color:#f29c96}.c-purple{color:#501888}.c-pink{color:#d33682}.c-yellow{color:#f2a324}.c-green{color:#055c2b}[type=button],[type=reset],[type=submit],button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0a5365;border:0;border-radius:3px;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em;-webkit-font-smoothing:antialiased;font-weight:600;line-height:1;padding:.75em 1em;text-align:center;text-decoration:none;transition:background-color 150ms ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}[type=button]:focus,[type=button]:hover,[type=reset]:focus,[type=reset]:hover,[type=submit]:focus,[type=submit]:hover,button:focus,button:hover{background-color:#084251;color:#fff}[type=button]:disabled,[type=reset]:disabled,[type=submit]:disabled,button:disabled{cursor:not-allowed;opacity:.5}[type=button]:disabled:hover,[type=reset]:disabled:hover,[type=submit]:disabled:hover,button:disabled:hover{background-color:#0a5365}fieldset{background-color:transparent;border:0;margin:0;padding:0}legend{font-weight:600;margin-bottom:.375em;padding:0}label{display:block;font-weight:600;margin-bottom:.375em}input,select,textarea{display:block;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em}[type=color],[type=date],[type=datetime-local],[type=datetime],[type=email],[type=month],[type=number],[type=password],[type=search],[type=tel],[type=text],[type=time],[type=url],[type=week],input:not([type]),textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #ddd;border-radius:3px;box-shadow:inset 0 1px 3px rgba(0,0,0,.06);box-sizing:border-box;margin-bottom:.75em;padding:.33333em;transition:border-color 150ms ease;width:100%}[type=color]:hover,[type=date]:hover,[type=datetime-local]:hover,[type=datetime]:hover,[type=email]:hover,[type=month]:hover,[type=number]:hover,[type=password]:hover,[type=search]:hover,[type=tel]:hover,[type=text]:hover,[type=time]:hover,[type=url]:hover,[type=week]:hover,input:not([type]):hover,textarea:hover{border-color:#b1b1b1}[type=color]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=datetime]:focus,[type=email]:focus,[type=month]:focus,[type=number]:focus,[type=password]:focus,[type=search]:focus,[type=tel]:focus,[type=text]:focus,[type=time]:focus,[type=url]:focus,[type=week]:focus,input:not([type]):focus,textarea:focus{border-color:#0a5365;box-shadow:inset 0 1px 3px rgba(0,0,0,.06),0 0 5px rgba(18,89,169,.7);outline:0}[type=color]:disabled,[type=date]:disabled,[type=datetime-local]:disabled,[type=datetime]:disabled,[type=email]:disabled,[type=month]:disabled,[type=number]:disabled,[type=password]:disabled,[type=search]:disabled,[type=tel]:disabled,[type=text]:disabled,[type=time]:disabled,[type=url]:disabled,[type=week]:disabled,input:not([type]):disabled,textarea:disabled{background-color:#f2f2f2;cursor:not-allowed}[type=color]:disabled:hover,[type=date]:disabled:hover,[type=datetime-local]:disabled:hover,[type=datetime]:disabled:hover,[type=email]:disabled:hover,[type=month]:disabled:hover,[type=number]:disabled:hover,[type=password]:disabled:hover,[type=search]:disabled:hover,[type=tel]:disabled:hover,[type=text]:disabled:hover,[type=time]:disabled:hover,[type=url]:disabled:hover,[type=week]:disabled:hover,input:not([type]):disabled:hover,textarea:disabled:hover{border:1px solid #ddd}[type=color]::-webkit-input-placeholder,[type=date]::-webkit-input-placeholder,[type=datetime-local]::-webkit-input-placeholder,[type=datetime]::-webkit-input-placeholder,[type=email]::-webkit-input-placeholder,[type=month]::-webkit-input-placeholder,[type=number]::-webkit-input-placeholder,[type=password]::-webkit-input-placeholder,[type=search]::-webkit-input-placeholder,[type=tel]::-webkit-input-placeholder,[type=text]::-webkit-input-placeholder,[type=time]::-webkit-input-placeholder,[type=url]::-webkit-input-placeholder,[type=week]::-webkit-input-placeholder,input:not([type])::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#858585}[type=color]:-ms-input-placeholder,[type=date]:-ms-input-placeholder,[type=datetime-local]:-ms-input-placeholder,[type=datetime]:-ms-input-placeholder,[type=email]:-ms-input-placeholder,[type=month]:-ms-input-placeholder,[type=number]:-ms-input-placeholder,[type=password]:-ms-input-placeholder,[type=search]:-ms-input-placeholder,[type=tel]:-ms-input-placeholder,[type=text]:-ms-input-placeholder,[type=time]:-ms-input-placeholder,[type=url]:-ms-input-placeholder,[type=week]:-ms-input-placeholder,input:not([type]):-ms-input-placeholder,textarea:-ms-input-placeholder{color:#858585}[type=color]::placeholder,[type=date]::placeholder,[type=datetime-local]::placeholder,[type=datetime]::placeholder,[type=email]::placeholder,[type=month]::placeholder,[type=number]::placeholder,[type=password]::placeholder,[type=search]::placeholder,[type=tel]::placeholder,[type=text]::placeholder,[type=time]::placeholder,[type=url]::placeholder,[type=week]::placeholder,input:not([type])::placeholder,textarea::placeholder{color:#858585}textarea{resize:vertical}[type=checkbox],[type=radio]{display:inline;margin-right:.375em}[type=file]{margin-bottom:.75em;width:100%}select{margin-bottom:.75em;width:100%}html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}body,html{height:100%}ol,ul{list-style-type:none;margin:0;padding:0}dl{margin:0}dt{font-weight:600;margin:0}dd{margin:0}figure{margin:0}img,picture{margin:0;max-width:100%}table{border-collapse:collapse;margin:.75em 0;table-layout:fixed;width:100%}th{border-bottom:1px solid #a6a6a6;font-weight:600;padding:.75em 0;text-align:left}td{border-bottom:1px solid #ddd;padding:.75em 0}td,th,tr{vertical-align:middle}body{color:#333;font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1em;line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,"Avenir Next",Avenir,"Segoe UI","Lucida Grande","Helvetica Neue",Helvetica,"Fira Sans",Roboto,Noto,"Droid Sans",Cantarell,Oxygen,Ubuntu,"Franklin Gothic Medium","Century Gothic","Liberation Sans",sans-serif;font-size:1.25em;line-height:1.2;margin:0 0 .75em}p{margin:0 0 .75em}a{color:#0a5365;text-decoration:none;transition:color 150ms ease}a:active,a:focus,a:hover{color:#083e4c}hr{border-bottom:1px solid #ddd;border-left:0;border-right:0;border-top:0;margin:1em 0}.nowrap{white-space:nowrap}.region{max-width:1440px;margin-left:auto;margin-right:auto;clear:both;max-width:1400px;padding:1.5em 1em;vertical-align:baseline}.region::after{clear:both;content:"";display:block}@media only screen and (min-width:640px){.region{padding:3em 1em}}@media only screen and (min-width:1440px){.region{padding:3em 0}}.region--full-width{clear:both;margin:1.5em 0}@media only screen and (min-width:640px){.region--full-width{margin:3em 0}}.region--full-width .region--full-width__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;margin:0 auto;max-width:1400px;vertical-align:baseline}.region--full-width .region--full-width__wrapper::after{clear:both;content:"";display:block}.outer-container{max-width:1440px;margin-left:auto;margin-right:auto;width:100%}.outer-container::after{clear:both;content:"";display:block}.flex-center{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}h1,h2,h3,h4,h5,h6{color:#0a5365;font-family:"Roboto Slab",Verdana,sans-serif;font-weight:300}.h1,h1{font-size:2.074em}@media only screen and (min-width:640px){.h1,h1{font-size:2.441em}}.h2,h2{font-size:1.728em}@media only screen and (min-width:640px){.h2,h2{font-size:1.953em}}.h3,h3{font-size:1.44em}@media only screen and (min-width:640px){.h3,h3{font-size:1.563em}}.h4,h4{font-size:1.2em}@media only screen and (min-width:640px){.h4,h4{font-size:1.25em}}.h5,h5{font-size:1.1em}.h6,h6{font-size:1em}.heading--bold{font-weight:700}.heading--sans-serif{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif}article h2,article h3,article h4,article h5,article h6{margin-top:1.5em}article h2::after{background:#0a5365;content:'';display:block;height:1px;margin:10px 0 .5em;width:30px}.page--post__main h1,.page--post__main h2,.page--post__main h3,.page--post__main h4,.page--post__main h5,.page--post__main h6{color:#9e023b}a{color:#0a5365;transition:all .1s linear}a:focus,a:hover{color:#0f7993}.link--light{color:#fff8f3}.link--light:focus,.link--light:hover{color:#d3281b}.link--light--no-hover{color:#fff8f3}.link--light--no-hover:focus,.link--light--no-hover:hover{color:#fff8f3}ul{list-style-type:square}ol{list-style-type:decimal}ol,ul{margin-bottom:1em;margin-left:2em}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}ol ol,ol ol li,ol ul,ol ul li,ul ol,ul ol li,ul ul,ul ul li{font-size:1em!important}body{color:#565d5e;font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif}.paragraph--loud{font-size:1.25em}.paragraph--louder{font-size:1.563em}.paragraph--loud--responsive{font-size:1.25em}@media only screen and (min-width:860px){.paragraph--loud--responsive{font-size:1.563em}}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-angle-double-down:before{content:""}.fa-angle-right:before{content:""}.fa-building-o:before{content:""}.fa-circle:before{content:""}.fa-comment:before{content:""}.fa-comment-o:before{content:""}.fa-drupal:before{content:""}.fa-envelope-o:before{content:""}.fa-file-text:before{content:""}.fa-github:before{content:""}.fa-globe:before{content:""}.fa-linkedin:before{content:""}.fa-long-arrow-right:before{content:""}.fa-phone:before{content:""}.fa-stack-exchange:before{content:""}.fa-tags:before{content:""}.fa-twitter:before{content:""}.header-navigation{float:none;z-index:9999999}@media only screen and (min-width:640px){.header-navigation{clear:none;float:right;padding-bottom:0;padding-right:.75em}}.header-navigation__menu{clear:both;display:none;margin:0 auto;overflow:visible;padding:0;-webkit-transform-style:preserve-3d;width:100%;z-index:9999}@media only screen and (min-width:640px){.header-navigation__menu{display:inline;margin:0;padding:0}}.header-navigation__menu.show{display:block}.header-navigation__mobile-menu-link{color:#06282d;display:block;float:right;font-weight:700;line-height:5.25em;margin:0;padding-right:1em;text-transform:uppercase}@media only screen and (min-width:640px){.header-navigation__mobile-menu-link{display:none}}.header-navigation__mobile-menu-link:focus,.header-navigation__mobile-menu-link:hover{color:#9e023b}.header-navigation__menu-link{display:block;line-height:2.625em;overflow:hidden;padding-right:.8em;text-align:right;width:100%;z-index:9999}@media only screen and (min-width:640px){.header-navigation__menu-link{display:inline;line-height:5.25em;margin-right:-5px;padding-right:0;width:auto}.header-navigation__menu-link:last-child{margin-right:0}}.header-navigation__menu-link:last-child:not(.header-navigation__active-nav-item):not(:hover):not(:focus) a{color:#9e023b}.header-navigation__menu-link:last-child a{font-weight:700}.header-navigation__menu-link a{color:#06282d;display:inline-block;font-weight:400;text-transform:uppercase;transition:background-color ease .2s}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{color:#9e023b}@media only screen and (min-width:640px){.header-navigation__menu-link a{padding-left:.75em;padding-right:.75em}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{background-color:rgba(158,2,59,.9);color:#fff}}.header-navigation__active-nav-item{background-color:rgba(158,2,59,.9)}@media only screen and (min-width:640px){.header-navigation__active-nav-item{background-color:rgba(255,255,255,.9);color:#06282d}}.header-navigation__active-nav-item a{color:#fff}@media only screen and (min-width:640px){.header-navigation__active-nav-item a{background-color:rgba(158,2,59,.9)}}.savas-logo{display:block;height:5.25em;padding:1.5em 0}.savas-logo--main{display:block;height:2.25em;margin:1.5em 0;padding:0;width:5.125em}.tile{position:relative}.tile .tile__hover{-ms-flex-align:center;align-items:center;color:#fff8f3;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;left:0;opacity:0;padding:1em;position:absolute;text-align:center;top:0;transition:all .3s ease;width:100%;z-index:1}.tile .tile__hover p:first-child{margin-bottom:1.5em;max-width:15em}.tile .tile__hover .link--cta{margin-bottom:0;transition:all .2s ease-in-out}.tile:focus .tile__hover,.tile:hover .tile__hover{opacity:1}.tile:focus .tile--blog--detailed__primary-tag,.tile:hover .tile--blog--detailed__primary-tag{margin-left:1em}.tile:focus .tile--blog__post-title .tile--blog--detailed__author-bg,.tile:hover .tile--blog__post-title .tile--blog--detailed__author-bg{bottom:0;right:0}@media only screen and (min-width:1120px){.tile p{font-size:1.1em}}.tile--title--blog{padding:2em}.tile--blog .tile--blog__content{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;position:relative;z-index:0}.tile--blog .tile--blog__content>div{height:150px}@media only screen and (min-width:450px){.tile--blog .tile--blog__content>div{height:200px}}@media only screen and (min-width:640px){.tile--blog .tile--blog__content>div{height:150px}}@media only screen and (min-width:1120px){.tile--blog .tile--blog__content>div{height:175px}}@media only screen and (min-width:1440px){.tile--blog .tile--blog__content>div{height:200px}}.tile--blog .tile--blog__content .tile--blog__image{background-position:center center;background-repeat:no-repeat;background-size:cover;width:100%}.tile--blog .tile--blog__content .tile--blog__post-title{-ms-flex-align:center;align-items:center;color:#06282d;display:-ms-flexbox;display:flex;padding:1em;width:100%}.tile--blog .tile--blog__content .tile--blog__post-title p::before{background:#9e023b;content:'';display:block;height:1px;margin:10px 0 .5em;width:30px}.tile--blog .tile--blog__hover{height:300px}@media only screen and (min-width:450px){.tile--blog .tile--blog__hover{height:400px}}@media only screen and (min-width:640px){.tile--blog .tile--blog__hover{height:300px}}@media only screen and (min-width:1120px){.tile--blog .tile--blog__hover{height:350px}}@media only screen and (min-width:1440px){.tile--blog .tile--blog__hover{height:400px}}.tile--blog--detailed{-ms-flex-preferred-size:auto;flex-basis:auto;-ms-flex-positive:0;flex-grow:0}.tile--blog--detailed .tile--blog__image{position:relative}.tile--blog--detailed .tile--blog__image .tile--blog--detailed__primary-tag{background-color:#0a5365;bottom:1em;color:#fff8f3;font-size:.9em;font-style:italic;left:-1em;margin-bottom:0;padding:.25em 1em;position:absolute;text-transform:uppercase;transition:all .3s ease-in-out}.tile--blog--detailed .tile--blog__post-title{position:relative;z-index:99}.tile--blog--detailed .tile--blog__post-title p{padding-right:44px}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author{bottom:0;position:absolute;right:0;z-index:999}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author img{display:block;filter:grayscale(100%);height:60px;width:60px}.tile--blog--detailed .tile--blog__post-title .tile--blog--detailed__author-bg{background-color:rgba(10,83,101,.2);bottom:-8px;height:60px;position:absolute;right:-8px;transition:all .3s ease-in-out;width:60px}.tile--blog--detailed .tile--blog__hover{margin:1em;width:calc(100% - 2em)}.region--header{background-color:rgba(255,255,255,.9);min-height:5.25em;width:100%;z-index:999}.region--header a{text-decoration:none}.region--header .region--header__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;position:relative;z-index:9999}.region--header .region--header__wrapper::after{clear:both;content:"";display:block}.region--header .region--header__logo{display:inline-block;float:left;height:5.25em;margin:0;padding-left:1em}@media only screen and (min-width:640px){.region--header .region--header__logo{padding-left:1.5em;padding-right:1em}}.region--post-aside{margin-top:3em}@media only screen and (min-width:860px){.region--post-aside{float:left;margin-top:0;width:33.333%}}.region--post-aside .region--post-aside__section{padding:3em 1em}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section{padding:3em 1.5em}}@media only screen and (min-width:1120px){.region--post-aside .region--post-aside__section{padding:3em 2em}}.region--post-aside .region--post-aside__section__wrapper--posts{border-bottom:solid 1px #bdc2c3}.region--post-aside .region--post-aside__section__wrapper--posts .tile--blog__hover{margin:0;width:100%}@media only screen and (min-width:640px){.region--post-aside .region--post-aside__section__items{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section__items{display:block}}.region--post-aside .region--post-aside__section__items>div{margin-bottom:1em}@media only screen and (min-width:640px){.region--post-aside .region--post-aside__section__items>div{-ms-flex-positive:0;flex-grow:0;margin-bottom:0;width:48.5%}}@media only screen and (min-width:860px){.region--post-aside .region--post-aside__section__items>div{margin-bottom:1em;width:100%}}.region--post-aside h2{font-weight:400}.region--post-aside .region--post-aside__section--case-studies .case-study-block__title{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif;font-weight:400}.region--post-aside .region--post-aside__section--case-studies__cta{margin-top:3em}.page--post .region--header{border-bottom:solid 1px #bdc2c3}@media only screen and (min-width:860px){.page--post .page--post__main{border-right:solid 1px #bdc2c3;float:left;padding-bottom:3em;width:66.666%}}.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding:0 1em}@media only screen and (min-width:640px){.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding:0 1.5em}}@media only screen and (min-width:1120px){.page--post .page--post__main .region--post-content,.page--post .page--post__main .region--post-header{padding-right:2em}}.page--post .page--post__main .region--post-header h1{font-weight:400}.page--post .page--post__main .region--post-content{color:#06282d}.page--post .page--post__main .region--post-content h2,.page--post .page--post__main .region--post-content h3,.page--post .page--post__main .region--post-content h4,.page--post .page--post__main .region--post-content h5,.page--post .page--post__main .region--post-content h6{font-family:"Roboto Condensed",Arial Narrow,Arial,sans-serif;font-weight:400}.page--post .page--post__main .region--post-content .caption{color:#565d5e;font-style:italic}.page--post .page--post__aside{border-bottom:solid 1px #bdc2c3;margin-top:0}@media only screen and (min-width:860px){.page--post .page--post__aside{border-bottom:0;border-top:0}}.page--post .region--prev-next-links--post{clear:both;display:none}@media only screen and (min-width:860px){.page--post .region--prev-next-links--post{display:-ms-flexbox;display:flex}}.page--post .region--prev-next-links--mobile{display:-ms-flexbox;display:flex;margin-top:3em}@media only screen and (min-width:860px){.page--post .region--prev-next-links--mobile{display:none}}.page--post .region--footer{margin-top:0}.region--post-header{margin:3em 0}.region--post-header .region--post-header__title{margin-bottom:1.5em}@media only screen and (min-width:640px){.region--post-header__post-info{display:-ms-flexbox;display:flex}.region--post-header__post-info>div{width:50%}}.region--post-header__post-info p{font-style:italic;margin-bottom:.25em}.region--post-header__post-info i{margin-right:.5em}.region--post-header__post-info .post-author:not(:first-child){clear:left;margin-top:1em}.region--post-header__post-info .post-author picture{float:left;margin-right:1em}.region--post-header__post-info .post-author picture img{display:block;height:60px;width:60px}.region--post-header__post-info .region--post-header__post-info__stats{clear:both;margin-top:1.5em}@media only screen and (min-width:640px){.region--post-header__post-info .region--post-header__post-info__stats{clear:none;margin-top:0}}.region--post-header__post-info .region--post-header__post-info__stats p{display:inline-block;margin-right:1em}@media only screen and (min-width:640px){.region--post-header__post-info .region--post-header__post-info__stats p{display:block;margin-right:0}}</style>
  
</head>


  <body class="page--post">

    <header class="region--header" role="banner">
  <div class="region--header__wrapper">

    <a href="/" class="region--header__logo">
      <img src="http://savaslabs.com/assets/img/logo.svg" alt="Savas Labs logo" class="savas-logo savas-logo--main">
    </a>

    <!-- Mobile menu button. -->
<a href="/" id="js-mobile-menu" class="header-navigation__mobile-menu-link">MENU</a>

<!-- Main menu. -->
<nav role="navigation" class="header-navigation">
  <ul id="js-navigation-menu" class="header-navigation__menu show">
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/company">Company</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/results">Results</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/services">Services</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/blog">Blog</a>
      </li>
    
      
      
      
      <li class="header-navigation__menu-link ">
        <a href="/contact">Contact</a>
      </li>
    
  </ul>
</nav>

  </div>
</header>

    <div class="page-content">
      







<div class="outer-container">
  <div class="page--post__main">
    <div class="region--featured-image">
      
      <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg" media="(min-width: 1120px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1120px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1000by500-89f5b6.jpg" media="(min-width: 1120px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg" media="(min-width: 860px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 860px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-746by373-89f5b6.jpg" media="(min-width: 860px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1400by700-89f5b6.jpg" media="(min-width: 640px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 640px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-860by430-89f5b6.jpg" media="(min-width: 640px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-1280by640-89f5b6.jpg" media="(min-width: 400px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 400px) and (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-640by320-89f5b6.jpg" media="(min-width: 400px)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-800by400-89f5b6.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg">
    <img src="http://savaslabs.com/assets/processed-img/blog/default-400by200-89f5b6.jpg" class="image--post-featured-image" itemprop="image" alt="Savas Labs blog" >
  </picture>

      
    </div>
    <div class="region--post-header">
      <h1 class="region--post-header__title">Managing GeoJSON data using GDAL</h1>
      <div class="region--post-header__post-info">
        <div class="region--post-header__post-info__authors">
          
<div class="post-author">
  <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-120by120-f47f88.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/team-former/tim/tim-square-outside-60by60-f47f88.jpg" class="image--team-blog-tile" itemprop="image" alt="Tim Stallmann" >
  </picture>

  <p class="post-author__name"></p>
  <p class="post-author__title"></p>
</div>

        </div>
        <div class="region--post-header__post-info__stats">
          <p><i class="fa fa-calendar"></i>May 25, 2015 </p>
          <p><i class="fa fa-tags"></i><a href="/blog/tag/mapping/">Mapping</a>, <a href="/blog/tag/leaflet/">Leaflet.js</a>, <a href="/blog/tag/javascript/">Javascript</a></p>
          
          <p><span id="comment-count"></span></p>
          
        </div>
      </div>
      
    </div>
    <article class="region--post-content">
      <p>In my <a href="/2015/05/18/mapping-geojson.html">last tutorial</a>, we used USGS earthquake data to make a simple web map using leaflet. Today, we’ll explore how to use GDAL tools to explore and manipulate GeoJSON data.
Why might this be useful?</p>

<ul>
  <li>Removing un-needed properties to optimize filesize</li>
  <li>Filtering data by location for mapping purposes</li>
  <li>Cleaning data by removing invalid features</li>
  <li>Converting other geo-data formats into GeoJSON, or vice versa.</li>
</ul>

<h2 id="installing-gdal-and-downloading-sample-data">Installing GDAL and Downloading Sample Data</h2>

<p><a href="http://www.gdal.org">GDAL (Geospatial Data Abstraction Library)</a> is a free and open-source translator library for both raster and vector data formats. It provides a number of core functionalities for data processing and conversion which are used across the suite of <a href="http://www.osgeo.org">OSGeo applications</a>. More importantly for our purposes, GDAL provides a bunch of command-line tools for processing geospatial data.</p>

<p>If you’re on a Mac and using homebrew, you can easily install GDAL by running <code class="highlighter-rouge">brew install gdal</code> from the command line. Otherwise, you can download <a href="http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries">binaries from GDAL</a> or <a href="http://trac.osgeo.org/gdal/wiki/BuildHints">compile the source code yourself</a>.</p>

<p>Just like the last tutorial, we’re going to be using the USGS earthquake data. Navigate to <a href="http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson">http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson</a>, and save the resulting file to your computer as a <code class="highlighter-rouge">.geojson</code> file.</p>

<h2 id="using-ogrinfo-to-look-inside-your-dataset">Using OGRInfo to look inside your dataset</h2>

<p><a href="http://www.gdal.org/ogrinfo.html">OGRInfo</a> lets us look inside geospatial datasets, viewing both summary info and lists of individual features. It’s useful to see what attributes are available for a given dataset or how many features it contains, as well as testing out attribute filters and examining individual features.</p>

<p>Let’s try some basic commands. Just running ogrinfo on a dataset will give you a list of all the layers it contains. In the case of GeoJSON, this is usually just a single layer.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo all_month.geojson
ERROR 4: GeoJSON Driver doesn<span class="s1">'t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson'</span>
      using driver <span class="sb">`</span>GeoJSON<span class="s1">' successful.
1: OGRGeoJSON (3D Point)
</span></code></pre>
</div>

<p>That’s not very helpful, so let’s try peeking inside the (only) layer. ogrinfo syntax has you pass the layer name as the second argument. By default, it will print every feature in this dataset (7.5 Mb worth!) to the console, so instead let’s add the <code class="highlighter-rouge">-so</code> argument, which displays a summary of the layer. Note that the GeoJSON driver for OGR has assigned the layer name <code class="highlighter-rouge">OGRGeoJSON</code>, which we’re passing in:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo all_month.geojson OGRGeoJSON -so
ERROR 4: GeoJSON Driver doesn<span class="s1">'t support update.
Had to open data source read-only.
INFO: Open of `all_month.geojson'</span>
      using driver <span class="sb">`</span>GeoJSON<span class="s1">' successful.

Layer name: OGRGeoJSON
Geometry: 3D Point
Feature Count: 10082
Extent: (-179.924400, -62.035900) - (179.989800, 68.959900)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
mag: Real (0.0)
place: String (0.0)
...
magType: String (0.0)
type: String (0.0)
title: String (0.0)
</span></code></pre>
</div>

<p>Now this is getting somewhere! We’ve got info about the number of features, the extent of the data (apparently there aren’t earthquakes at the poles, or USGS isn’t monitoring them), the coordinate system of the data, and a full list of attributes.</p>

<p>What might that <code class="highlighter-rouge">type</code> attribute be telling us? We can use ogrinfo to run basic SQL queries on the data as well, for example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo all_month.geojson -sql <span class="s2">"SELECT DISTINCT type FROM OGRGeoJSON -q"</span>
ERROR 4: GeoJSON Driver doesn<span class="s1">'t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  type (String) = earthquake

OGRFeature(OGRGeoJSON):1
  type (String) = quarry blast

...
</span></code></pre>
</div>

<p>Note: I’m using the <code class="highlighter-rouge">-q</code> flag to suppress some of the more verbose output. Also, ogrinfo unfortunately doesn’t support <code class="highlighter-rouge">GROUP BY</code> or <code class="highlighter-rouge">LIMIT</code> clauses on SQL queries for GeoJSON files.</p>

<p>We can also use this to answer some basic questions about the data. Like, how many earthquakes were recorded with magnitude of 5 or greater?</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo all_month.geojson -sql <span class="s2">"SELECT COUNT(*) FROM OGRGeoJSON WHERE mag&gt;=5"</span> -q
ERROR 4: GeoJSON Driver doesn<span class="s1">'t support update.

Layer name: OGRGeoJSON
OGRFeature(OGRGeoJSON):0
  COUNT_* (Integer) = 176
</span></code></pre>
</div>

<h2 id="optimizing-your-data">Optimizing your data</h2>

<p>Check the filesize of the <code class="highlighter-rouge">all_month.geojson</code> file you downloaded. It probably weighs in at around 7-8 Mb, which is really unwieldy for a client to download before viewing a web map. Can we trim the file down a bit?</p>

<p>First pass: if you remember the output from <code class="highlighter-rouge">ogrinfo -so</code>, you’ll remember that there are a <em>lot</em> of attributes in this data-set! For a web map, we usually just use a few attributes to populate pop-up text. In this case, we’re just going to use the place, mag, and url properties.</p>

<p>Ogr2Ogr is another tool designed for converting to and from a variety of geospatial data formats, but it also allows us to filter the data as we’re copying it and only copy over specific attributes. So we can use it to “convert” the dataset from GeoJSON into a new GeoJSON with fewer columns.</p>

<p>The basic syntax is:
<code class="highlighter-rouge">ogr2ogr -f "Output format specifier" output_filename input_filename</code></p>

<p>We want to cherry-pick only a few attribute fields, which we can to using the <code class="highlighter-rouge">-select</code> flag:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -select mag,place,url
</code></pre>
</div>

<p>If you look at the filesize on the new geojson we just created, you’ll see we managed to strip it down to a much smaller 2-3 Mb.</p>

<p>ogr2ogr also accepts the <code class="highlighter-rouge">-sql</code> flag, so we could also have written:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogr2ogr -f GeoJSON all_month_optimized.geojson all_month.geojson -sql <span class="s2">"SELECT mag,place,url FROM OGRGeoJSON"</span>
</code></pre>
</div>

<h2 id="filtering-data-by-attributes">Filtering data by attributes</h2>

<p>With this syntax, it’s easy to select out a subset of the features (since who will really be able to navigate 10,000+ points if we were to map the full dataset, anyway?):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogr2ogr -f GeoJSON all_month_mag_over_5.geojson all_month.geojson -sql <span class="s2">"SELECT mag,place,url FROM OGRGeoJSON WHERE mag&gt;=5"</span>
</code></pre>
</div>

<p>Now we’re just down to 44 kb, a totally reasonable size for mapping.</p>

<p>Here’s what the dataset we just made looks like (via <a href="http://geojson.io">geojson.io</a>):
<img src="/assets/img/blog/earthquakes-mag-5-geojson-io.jpg" width="500px" height="250px" alt="Screenshot of GeoJSON.io map showing earthquakes distributed across the world" class="blog-image-large" /></p>

<h2 id="filtering-by-location">Filtering by location</h2>

<p>What if we just want to map earthquakes that have taken place in a specific area?</p>

<p>The simplest way to approach this it to filter the data by a bounding box – a rectangular area defined by latitude and longitude coordinates. <a href="http://geojson.io">Geojson.io</a> has a rectangle-drawing tool which will give you latitude and longitude coordinates of the corners pretty easily. I tried drawing a rectangle over the rough area of the US East of the Mississippi, and passed those arguments into ogr2ogr’s <code class="highlighter-rouge">-clipsrc xmin ymin xmax ymax</code> argument (that’s South-East corner longitude, SE corner latitude, NW longitude, NW latitude):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogr2ogr -f GeoJSON all_month_us_east.geojson all_month.geojson -clipsrc -86.835 24.206 -69.609 46.800
</code></pre>
</div>

<p>Here’s the result. Florida turns out to be a good place to live if you want to avoid minor tremors! Also notice that because of using a simple latitude-longitude rectangle to filter the data, we also pulled in those parts of Canada which are south of Maine.
<img src="/assets/img/blog/earthquakes-us-east-geojson-io.jpg" width="400px" height="400px" alt="Screenshot of GeoJSON.io map showing earthquakes in the past month in the United States, with one point in Canada" class="blog-image-large" /></p>

<h2 id="filtering-by-location-2-clipping-to-another-dataset">Filtering by location 2: Clipping to another dataset</h2>

<p>But what if we want all the earthquakes in, say, North Dakota? For more complicated area queries, we’ll have to supply the clipping area as a separate datasource.</p>

<p>We can download a shapefile of all 50 US States from the Census Bureau, then select out North Dakota and pass that as a clipping argument to ogr2ogr. First, download the <code class="highlighter-rouge">tl_2014_us_state.zip</code> file from the <a href="ftp://ftp2.census.gov/geo/tiger/TIGER2014/STATE/">Census Bureau FTP site</a>, and unzip it to the same directory as your geojson file.</p>

<p>Let’s use ogrinfo to examine this file and see how we could select out North Dakota</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo tl_2014_us_state.shp tl_2014_us_state -so
INFO: Open of <span class="sb">`</span>tl_2014_us_state.shp<span class="s1">'
      using driver `ESRI Shapefile'</span> successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 56
Extent: <span class="o">(</span>-179.231086, -14.601813<span class="o">)</span> - <span class="o">(</span>179.859681, 71.441059<span class="o">)</span>
Layer SRS WKT:
GEOGCS[<span class="s2">"GCS_North_American_1983"</span>,
    DATUM[<span class="s2">"North_American_Datum_1983"</span>,
        SPHEROID[<span class="s2">"GRS_1980"</span>,6378137,298.257222101]],
    PRIMEM[<span class="s2">"Greenwich"</span>,0],
    UNIT[<span class="s2">"Degree"</span>,0.017453292519943295]]
REGION: String <span class="o">(</span>2.0<span class="o">)</span>
...
NAME: String <span class="o">(</span>100.0<span class="o">)</span>
...
</code></pre>
</div>

<p>Looks like we can just select by name. Try it first in ogrinfo:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogrinfo tl_2014_us_state.shp -SQL <span class="s2">"SELECT * FROM tl_2014_us_state WHERE NAME='Georgia'"</span> -GEOM<span class="o">=</span>NO
INFO: Open of <span class="sb">`</span>tl_2014_us_state.shp<span class="s1">'
      using driver `ESRI Shapefile'</span> successful.

Layer name: tl_2014_us_state
Geometry: Polygon
Feature Count: 1
Extent: <span class="o">(</span>-179.231086, -14.601813<span class="o">)</span> - <span class="o">(</span>179.859681, 71.441059<span class="o">)</span>
...
</code></pre>
</div>

<p>That worked, so now we can format the whole ogr2ogr string, using <code class="highlighter-rouge">-clipsrc</code> and <code class="highlighter-rouge">-clipsrcsql</code> options. Note that because we’re using a very detailed shapefile for the state outlines, this command takes a long time to process. On my MacBook Pro it clocks in at around 3 minutes.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ogr2ogr -f GeoJSON all_month_georgia.geojson all_month.geojson -clipsrc tl_2014_us_state.shp -clipsrcsql <span class="s2">"SELECT * FROM tl_2014_us_state WHERE NAME='Georgia'"</span>
</code></pre>
</div>

<p>And here’s the GeoJSON dataset we just created, viewed on geojson.io – all two earthquakes in Georgia last month!</p>

<p><img src="/assets/img/blog/earthquakes-georgia-geojson-io.jpg" width="500px" height="164px" alt="Screenshot of GeoJSON.io map showing two earthquakes in Georgia" class="blog-image-large" /></p>

    </article>
  </div>
  <div class="region--prev-next-links region--prev-next-links--mobile pagination">
    <div class="outer-container">
  
  <a href="/2015/05/22/durham-living-wage.html" class="pagination__previous"><i class="fa fa-angle-left "></i> Prev</a>
  
  <a href="/blog" class="pagination__view-all">View All Blog Posts</a>
  
  <a href="/2015/06/10/d8-theming-basics.html" class="pagination__next"> Next <i class="fa fa-angle-right"></i></a>
  
</div>
  </div>
  <div class="page--post__aside region--post-aside">
    <div class="region--post-aside__section__wrapper--posts">
      <div class="region--post-aside__section region--post-aside__section--posts">
        <h2 class="heading--sans-serif c-grey h3">Related Blog Posts</h2>
        <div class="region--post-aside__section__items region--post-aside__section--posts__items">
          









































































<div class="tile--blog tile--blog--detailed tile">
  <a href="/2016/10/19/optimizing-jekyll-with-gulp.html" class="tile--blog__link">
    <div class="tile--blog__content tile__content bg-light-teal">
      
      <div class="tile--blog__image" style="background-image: url(/assets/img/blog/test-tubes.jpg);">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <p class="tile--blog--detailed__primary-tag">Performance</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
      <div class="tile--blog__post-title">
        <p>Optimizing Jekyll Performance with Gulp</p>

        <div class="tile--blog--detailed__author">
          
          
          <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-120by122-bebfe8.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/anne/anne-square-outside-60by61-bebfe8.jpg" class="image--team-blog-tile" itemprop="image" alt="Anne Tomasevich" >
  </picture>

          
          
        </div>
        <div class="tile--blog--detailed__author-bg"></div>
      </div>
    </div>
    <div class="tile--blog__hover tile__hover bg-orange">
      <p>How we improved our company site’s performance with a better Jekyll workflow</p>

      <p class="link--cta link--cta--inverse">Read more</p>
    </div>
  </a>
</div>





































































<div class="tile--blog tile--blog--detailed tile">
  <a href="/2016/04/20/squabble-comments.html" class="tile--blog__link">
    <div class="tile--blog__content tile__content bg-light-teal">
      
      <div class="tile--blog__image" style="background-image: url(/assets/img/blog/default.jpg);">
        
        
        
        
        
        
        
        <p class="tile--blog--detailed__primary-tag">Jekyll</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
      <div class="tile--blog__post-title">
        <p>How we added comments to our Jekyll site</p>

        <div class="tile--blog--detailed__author">
          
          
          <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-120by120-c7115d.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/kosta/kosta-square-outside-60by60-c7115d.jpg" class="image--team-blog-tile" itemprop="image" alt="Kosta Harlan" >
  </picture>

          
          
        </div>
        <div class="tile--blog--detailed__author-bg"></div>
      </div>
    </div>
    <div class="tile--blog__hover tile__hover bg-orange">
      <p>A peek under the hood at our website’s commenting app, Squabble.</p>

      <p class="link--cta link--cta--inverse">Read more</p>
    </div>
  </a>
</div>






















































































































































































































































































        </div>
      </div>
    </div>
    <div class="region--post-aside__section__wrapper--case-studies">
      <div class="region--post-aside__section region--post-aside__section--case-studies">
        <h2 class="heading--sans-serif c-grey h3">Related Case Studies</h2>
        <div class="region--post-aside__section__items region--post-aside__section--posts__items">
          

























<div class="case-study-block">
  <a class="case-study-block__link" href="/results/case-studies/pmp-civil-rights-map/">
    <div class="case-study-block__image" style="background-image: url(/assets/img/work/logos/pmp-logo-eggshell.png);">
      <img src="/assets/img/work/pmp-civil-rights-map/pmp-civil-rights-map-block.jpg" alt="Durham Civil and Human Rights History Map">
    </div>
    
    <h3 class="case-study-block__title">Durham Civil and Human Rights History Map</h3>
    
    <div class="case-study-block__tags">
      
      
      <p>Drupal 8 </p>
      
      <p>&bull; </p>
      
      
      
      <p>Responsive Design </p>
      
      <p>&bull; </p>
      
      
      
      <p>UX </p>
      
      <p>&bull; </p>
      
      
      
      <p>Web Mapping </p>
      
      
      
    </div>
  </a>
</div>
















<div class="case-study-block">
  <a class="case-study-block__link" href="/results/case-studies/hunter-boots/">
    <div class="case-study-block__image" style="background-image: url(/assets/img/work/logos/hunter-logo-eggshell.png);">
      <img src="/assets/img/work/hunter-boots/hunter-boots-block.jpg" alt="Hunter Boots E-Commerce / Redesign">
    </div>
    
    <h3 class="case-study-block__title">Hunter Boots E-Commerce / Redesign</h3>
    
    <div class="case-study-block__tags">
      
      
      <p>Drupal </p>
      
      <p>&bull; </p>
      
      
      
      <p>Responsive Design </p>
      
      <p>&bull; </p>
      
      
      
      <p>Payment Processing </p>
      
      <p>&bull; </p>
      
      
      
      <p>Javascript </p>
      
      
      
    </div>
  </a>
</div>































        </div>
        <div class="region--post-aside__section--case-studies__cta flex-center">
          <a href="/results" class="button--arrow--orange">Our work</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="region--prev-next-links region--prev-next-links--post pagination">
  <div class="outer-container">
  
  <a href="/2015/05/22/durham-living-wage.html" class="pagination__previous"><i class="fa fa-angle-left "></i> Prev</a>
  
  <a href="/blog" class="pagination__view-all">View All Blog Posts</a>
  
  <a href="/2015/06/10/d8-theming-basics.html" class="pagination__next"> Next <i class="fa fa-angle-right"></i></a>
  
</div>
</div>

<div class="region--comments">
  
  <div class="expander">
    <a href="javascript:void(0)" id="js-expander-trigger" class="expander-trigger expander--hidden">
      <p id="comments-trigger">Comments</p>
    </a>
    <div id="js-expander-content" class="expander-content region">

      <!-- If there are existing comments, output them here. -->
      <div id="region--comments__comments" class="region--comments__comments"></div>
      <form id="form--comment" class="form--comment">
  <div class="form--comment__row">
    <div class="form--comment__row__item">
      <div class="form--comment__field form--comment__field--name">
        <label for="name">Name</label>
        <input type="text" name="name" id="name" required>
      </div>
      <div class="form--comment__field form--comment__field--email">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" required>
        <p class="form--comment__helptext">Savas Labs will never sell your email address or spam you.</p>
      </div>
    </div>
    <div class="form--comment__field form--comment__field--comment form--comment__row__item">
      <label for="comment">Comment</label>
      <textarea name="comment" id="comment" rows="4" required></textarea>
      <p class="form--comment__helptext">Plain text format only please.</p>
    </div>
  </div>

  <input type="hidden" name="slug" id="slug" value="/2015/05/25/manage-geojson.html">
  <input type="text" name="url" id="url">

  <div class="form--comment__row">
    <div class="form--comment__field form--comment__field--nocaptcha form--comment__row__item">
      <div class="form--comment__field--nocaptcha__image">
        <img src="/assets/img/icons-and-logos/owl.png" alt="Savas Labs logo">
      </div>
      <div class="form--comment__field--nocaptcha__input">
        <label for="nocaptcha">What type of animal is the Savas Labs logo?</label>
        <p class="form--comment__helptext">Hint: 3 letters long, starts with an "o" and ends with an "l".</p>
        <input type="text" name="nocaptcha" id="nocaptcha" required>
      </div>
    </div>
    <div class="form--comment__row__item">
      <input type="submit" value="Post comment" id="submit" class="form--comment__submit">
    </div>
  </div>
</form>
    </div>
  </div>
  
</div>

    </div>

    <footer class="region--footer" role="contentinfo">
  <div class="region--footer__main">
    <div class="region--footer__main__menu">
      <a href="/" class="region--footer__logo">
        <img src="http://savaslabs.com/assets/img/logo-light.svg" alt="Savas Labs" class="savas-logo savas-logo--light">
      </a>
      <nav role="navigation" class="footer-navigation">
  <ul class="footer-navigation__menu">
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/company">Company</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/results">Results</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/services">Services</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/blog">Blog</a>
      </li>
    
      
      
      
      <li class="footer-navigation__menu-link ">
        <a href="/contact">Contact</a>
      </li>
    
  </ul>
</nav>
    </div>
    <div class="region--footer__main__contact">
      <h4 class="region--footer__main__contact__title h5">Connect with us</h4>
      <a href="mailto:info@savaslabs.com">info@savaslabs.com</a>
      <p>(919) 432-4660</p>
      <address>
        SAVAS LABS<br>
        PMB 210<br>
        201 W Main Street, Suite 100<br>
        Durham, NC 27701
      </address>
    </div>
    <div class="region--footer__main__social">
      <div class="region--footer__main__social__icons">
        <a href="https://github.com/savaslabs"><span class="fa fa-github fa-lg fa-2x"></span></a>
        <a href="https://www.drupal.org/node/2466865"><i class="fa fa-drupal fa-lg fa-2x"></i></a>
        <a href="https://twitter.com/savas_labs"><i class="fa fa-twitter fa-lg fa-2x"></i></a>
        <a href="https://www.linkedin.com/company/savas-labs"><i class="fa fa-linkedin fa-lg fa-2x"></i></a>
      </div>
      <div class="region--footer__main__social__twitter">
        <a class="twitter-timeline"  href="https://twitter.com/Savas_Labs" data-widget-id="720223236315815936">Tweets by @Savas_Labs</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </div>
  </div>
  <div class="region--footer__bottom">
    <div class="region--footer__bottom__wrapper">
      <p class="region--footer__bottom__copyright">
        Copyright &copy; Savas Labs 2017
      </p>
    </div>
  </div>
</footer>

    <script type="text/javascript" src="http://savaslabs.com/assets/js/main.js" async></script>

<noscript>
  <link href='/assets/styles/main.css' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,400italic,700italic|PT+Serif|Source+Sans+Pro' rel='stylesheet' type='text/css'>
</noscript>

  </body>

</html>
