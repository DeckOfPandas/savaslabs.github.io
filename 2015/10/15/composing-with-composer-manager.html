<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Composing with Composer Manager | Savas Labs</title>
  
  <meta name="description" content="Why Composer?We at Savas Labs love Composer and use it with many of our projects to help manage our automated testing dependencies.">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,400italic,700italic|PT+Serif|Bitter|Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://savaslabs.com/assets/styles/main.css">
  <link rel="canonical" href="http://savaslabs.com/2015/10/15/composing-with-composer-manager.html">
  <link rel="alternate" type="application/rss+xml" title="Savas Labs" href="http://savaslabs.com/feed.xml" />
  <script type="text/javascript" src="http://savaslabs.com/assets/js/main.js"></script>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Durham, North Carolina",
        "postalCode": "27701",
        "streetAddress": "201 W Main St."
      },
      "description": "A full-service web agency leveraging the power of Drupal.
",
      "email": "info@savaslabs.com",
      "name": "Savas Labs",
      "telephone": "(919) 432-4660",
      "url": "http://savaslabs.com",
      "logo": "http://savaslabs.com/assets/img/logo.png"
    }
</script>

  
  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Composing with Composer Manager",
    "about": "Using composer manager to manage a custom module's dependencies.",
    "articleBody": "


&lt;div class=&quot;post&quot;&gt;
  &lt;header class=&quot;post-header&quot;&gt;
    &lt;h1 class=&quot;post-title&quot;&gt;Composing with Composer Manager&lt;/h1&gt;
    &lt;p&gt;By &lt;a href=&quot;/team/dan-murphy&quot;&gt;Dan Murphy&lt;/a&gt;&lt;/p&gt;
    &lt;p class=&quot;centerdot&quot;&gt;&amp;centerdot; &lt;/p&gt;
    &lt;p&gt;Oct 15, 2015 &lt;/p&gt;&lt;br&gt;
    &lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;p&gt;&lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/composer/&quot;&gt;Composer&lt;/a&gt;, &lt;a href=&quot;/blog/tag/module-development/&quot;&gt;Module Development&lt;/a&gt;&lt;/p&gt;
    
    &lt;div&gt;&lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;
    
    
  &lt;/header&gt;

  

  &lt;article class=&quot;post-content&quot;&gt;
    &lt;h2 id=&quot;why-composer&quot;&gt;Why Composer?&lt;/h2&gt;
&lt;p&gt;We at Savas Labs love &lt;a href=&quot;https://getcomposer.org/&quot;&gt;Composer&lt;/a&gt; and use it with many of our projects to help manage our automated testing dependencies.&lt;/p&gt;

&lt;p&gt;For those not already familiar, &lt;a href=&quot;https://getcomposer.org/&quot;&gt;Composer&lt;/a&gt; is a package manager for PHP. If you want to go further down the rabbit hole &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/java/concepts/package.html&quot;&gt;“a package is a namespace that organizes a set of related classes and interfaces.”&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, Composer allows you to manage dependencies on a per project basis. Those dependencies live within the project directory so that everything is encapsulated there.  And since you can specify package versions, different projects on your systems can depend on different versions. Composer also pulls in the dependencies of your project’s dependencies, keeping you out of &lt;a href=&quot;https://en.wikipedia.org/wiki/Dependency_hell&quot;&gt;‘dependency hell’&lt;/a&gt;. You simply specify your projects dependencies in a &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file, then pull in all of your project’s dependencies into a &lt;code class=&quot;highlighter-rouge&quot;&gt;/vendor&lt;/code&gt; directory on the command line via &lt;code class=&quot;highlighter-rouge&quot;&gt;composer install&lt;/code&gt;. (You can also update your dependencies via &lt;code class=&quot;highlighter-rouge&quot;&gt;composer update&lt;/code&gt;).&lt;/p&gt;

&lt;h2 id=&quot;composer-with-drupal-modules&quot;&gt;Composer with Drupal Modules?&lt;/h2&gt;
&lt;p&gt;But recently, one of our projects required a custom module that depended on a PHP package that expected to be installed via Composer.&lt;/p&gt;

&lt;p&gt;While we were excited that we could use Composer to easily install the dependency, we hadn’t used Composer to manage dependencies within a Drupal module before, and this requirement raised a new concern: &lt;strong&gt;What if more than one module requires the same package?&lt;/strong&gt; In that scenario, how do we avoid duplicate code, and more seriously, how do we avoid version conflicts?&lt;/p&gt;

&lt;h2 id=&quot;composer-manager-to-the-rescue&quot;&gt;Composer Manager to the Rescue!&lt;/h2&gt;
&lt;p&gt;Things get a little more complex when Drupal modules start specifying dependencies. But luckily for us, &lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; thought this through and provides a solution.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; is a Drupal contributed module with releases for Drupal 6, 7, and 8.  From the project description:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Composer Manager allows each contributed module to ship with its own composer.json file, listing the module-specific requirements. It then merges the requirements of all found modules into the consolidated composer.json file, consumed by composer install/update. This results in a single vendor directory shared across all modules which prevents code duplication and version mismatches.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;composer-manager-overview&quot;&gt;Composer Manager Overview&lt;/h2&gt;
&lt;p&gt;Composer Manager addressed our concerns in an easy and well thought out way. And while the module provides excellent documentation, I’ll briefly describe some of the features:&lt;/p&gt;

&lt;p&gt;The consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; is created at &lt;code class=&quot;highlighter-rouge&quot;&gt;sites/default/files/composer/composer.json&lt;/code&gt; by default. Meanwhile, the dependencies are installed to &lt;code class=&quot;highlighter-rouge&quot;&gt;sites/all/vendor&lt;/code&gt; by default. Both of these locations are configurable and can easily be changed.&lt;/p&gt;

&lt;p&gt;By default, if a module includes a &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file and is enabled or disabled via Drush, then Composer Manager automatically&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Adds or removes the module’s dependencies to or from the consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file.&lt;/li&gt;
  &lt;li&gt;Installs and updates the required dependencies in the &lt;code class=&quot;highlighter-rouge&quot;&gt;vendor&lt;/code&gt; directory.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can also use Drush to manually update the consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file via &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-json-rebuild&lt;/code&gt;, and manually install or update dependencies via &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-manager [COMMAND] [OPTIONS]&lt;/code&gt;. For example &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-manager update&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;We at Savas Labs love any tool or module that makes our development easier, and &lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; fits that bill. As Drupal modules start making more and more use of libraries from the greater PHP community, we expect to be using Composer Manager on more and more projects.&lt;/p&gt;

    &lt;hr&gt;

    
      &lt;div class=&quot;post-comments&quot;&gt;
  
    &lt;div class=&quot;expander&quot;&gt;
      &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander-hidden&quot;&gt;Comments!&lt;/a&gt;
      &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content&quot;&gt;
        &lt;!-- If there are existing comments, output them here. --&gt;
        &lt;div id=&quot;post-comments&quot; class=&quot;post-comments&quot;&gt;&lt;/div&gt;
        &lt;!-- New comment form --&gt;
        &lt;form id=&quot;comment-form&quot;&gt;
          &lt;h4&gt;Leave a comment&lt;/h4&gt;
          &lt;div class=&quot;comment-name&quot;&gt;
            &lt;p&gt;Name&lt;/p&gt; &lt;input type=&#39;text&#39; name=&#39;name&#39; id=&#39;name&#39; required /&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;div class=&quot;comment-email&quot;&gt;
            &lt;p&gt;Email&lt;/p&gt; &lt;input type=&#39;email&#39; name=&#39;email&#39; id=&#39;email&#39; required /&gt;
            &lt;p class=&quot;email-disclaimer&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;p&gt;Comment&lt;/p&gt;
          &lt;textarea name=&#39;comment&#39; id=&#39;comment&#39; required&gt;&lt;/textarea&gt;
          &lt;p class=&quot;hint below-textarea&quot;&gt;Plain text format only please.&lt;/p&gt;

          &lt;input type=&#39;hidden&#39; name=&#39;slug&#39; id=&#39;slug&#39; value=&#39;/2015/10/15/composing-with-composer-manager.html&#39; /&gt;
          &lt;input type=&#39;text&#39; name=&#39;url&#39; id=&#39;url&#39; /&gt;

          &lt;div class=&#39;are-you-human&#39;&gt;
            &lt;div class=&#39;are-you-human-owl&#39;&gt;
              &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&#39;are-you-human-field&#39;&gt;
              &lt;p&gt;What type of animal is the Savas Labs logo?&lt;/p&gt;
              &lt;input type=&#39;text&#39; name=&#39;nocaptcha&#39; id=&#39;nocaptcha&#39; class=&#39;nocaptcha&#39;&gt;
              &lt;p class=&quot;hint&quot;&gt;Hint: 3 letters long, starts with an &#39;o&#39; and ends with an &#39;l&#39;.&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;input type=&#39;submit&#39; value=&#39;Submit&#39; id=&#39;submit&#39; class=&quot;submit-comment&quot;/&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  
  &lt;hr&gt;
&lt;/div&gt;

    
    
      &lt;div class=&quot;post-bottom&quot;&gt;
  &lt;div class=&quot;post-meta&quot;&gt;
    &lt;h4&gt;About the author&lt;/h4&gt;
    
      &lt;a href=&quot;/team/dan-murphy&quot;&gt;
        &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-576by524-633aa3.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg&quot; class=&quot;image--team-post-meta&quot; itemprop=&quot;image&quot; alt=&quot;Dan Murphy&quot; &gt;
  &lt;/picture&gt;

      &lt;/a&gt;
      &lt;p class=&quot;post-author-desc&quot;&gt;Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.&lt;/p&gt;
    
  &lt;/div&gt;
    &lt;!-- Once we have more content, change this to posts related by tag --&gt;
  &lt;div class=&quot;post-related flex-container&quot;&gt;
    &lt;h4&gt;Recent posts by Savas Labs&lt;/h4&gt;
    &lt;div class=&quot;cards&quot;&gt;
      
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/09/23/supercharged-seo-with-drupal-8.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Supercharged SEO with Drupal 8
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Sep 23, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/08/29/internship-thoughts.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  A Savas Labs Internship
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Aug 29, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;What it’s like to learn at Savas Labs.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/06/22/user-testing.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Usability Testing - Our Process and Favorite Practices
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Jun 22, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;Our approach to designing, conducting, and learning from user testing and other analyses.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

    
    &lt;div class=&quot;previous-next-links&quot;&gt;
  &lt;div class=&quot;next&quot;&gt;
    
      &lt;a href=&quot;/2015/10/27/all-things-open-conference.html&quot;&gt;&lt;i class=&quot;fa fa-long-arrow-left &quot;&gt;&lt;/i&gt; All Things Open Conference Recap&lt;/a&gt;
    
  &lt;/div&gt;
  &lt;div class=&quot;previous&quot;&gt;
    
      &lt;a href=&quot;/2015/09/03/sassy-drupal-theming-part-3.html&quot;&gt; Sassy Drupal theming: Best practices &lt;i class=&quot;fa fa-long-arrow-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    
  &lt;/div&gt;
&lt;/div&gt;


  &lt;/article&gt;

&lt;/div&gt;
",
      "author": {
          "@context": "http://schema.org",
          "@type": "Person",
          "name": "Dan Murphy",
          "affiliation": "Savas Labs",
          "worksFor": "Savas Labs"
      },
    "keywords": "drupal, composer, module-development",
    "text": "


&lt;div class=&quot;post&quot;&gt;
  &lt;header class=&quot;post-header&quot;&gt;
    &lt;h1 class=&quot;post-title&quot;&gt;Composing with Composer Manager&lt;/h1&gt;
    &lt;p&gt;By &lt;a href=&quot;/team/dan-murphy&quot;&gt;Dan Murphy&lt;/a&gt;&lt;/p&gt;
    &lt;p class=&quot;centerdot&quot;&gt;&amp;centerdot; &lt;/p&gt;
    &lt;p&gt;Oct 15, 2015 &lt;/p&gt;&lt;br&gt;
    &lt;i class=&quot;fa fa-tags&quot;&gt;&lt;/i&gt;&lt;p&gt;&lt;a href=&quot;/blog/tag/drupal/&quot;&gt;Drupal&lt;/a&gt;, &lt;a href=&quot;/blog/tag/composer/&quot;&gt;Composer&lt;/a&gt;, &lt;a href=&quot;/blog/tag/module-development/&quot;&gt;Module Development&lt;/a&gt;&lt;/p&gt;
    
    &lt;div&gt;&lt;p&gt;&lt;span id=&quot;comment-count&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;
    
    
  &lt;/header&gt;

  

  &lt;article class=&quot;post-content&quot;&gt;
    &lt;h2 id=&quot;why-composer&quot;&gt;Why Composer?&lt;/h2&gt;
&lt;p&gt;We at Savas Labs love &lt;a href=&quot;https://getcomposer.org/&quot;&gt;Composer&lt;/a&gt; and use it with many of our projects to help manage our automated testing dependencies.&lt;/p&gt;

&lt;p&gt;For those not already familiar, &lt;a href=&quot;https://getcomposer.org/&quot;&gt;Composer&lt;/a&gt; is a package manager for PHP. If you want to go further down the rabbit hole &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/java/concepts/package.html&quot;&gt;“a package is a namespace that organizes a set of related classes and interfaces.”&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, Composer allows you to manage dependencies on a per project basis. Those dependencies live within the project directory so that everything is encapsulated there.  And since you can specify package versions, different projects on your systems can depend on different versions. Composer also pulls in the dependencies of your project’s dependencies, keeping you out of &lt;a href=&quot;https://en.wikipedia.org/wiki/Dependency_hell&quot;&gt;‘dependency hell’&lt;/a&gt;. You simply specify your projects dependencies in a &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file, then pull in all of your project’s dependencies into a &lt;code class=&quot;highlighter-rouge&quot;&gt;/vendor&lt;/code&gt; directory on the command line via &lt;code class=&quot;highlighter-rouge&quot;&gt;composer install&lt;/code&gt;. (You can also update your dependencies via &lt;code class=&quot;highlighter-rouge&quot;&gt;composer update&lt;/code&gt;).&lt;/p&gt;

&lt;h2 id=&quot;composer-with-drupal-modules&quot;&gt;Composer with Drupal Modules?&lt;/h2&gt;
&lt;p&gt;But recently, one of our projects required a custom module that depended on a PHP package that expected to be installed via Composer.&lt;/p&gt;

&lt;p&gt;While we were excited that we could use Composer to easily install the dependency, we hadn’t used Composer to manage dependencies within a Drupal module before, and this requirement raised a new concern: &lt;strong&gt;What if more than one module requires the same package?&lt;/strong&gt; In that scenario, how do we avoid duplicate code, and more seriously, how do we avoid version conflicts?&lt;/p&gt;

&lt;h2 id=&quot;composer-manager-to-the-rescue&quot;&gt;Composer Manager to the Rescue!&lt;/h2&gt;
&lt;p&gt;Things get a little more complex when Drupal modules start specifying dependencies. But luckily for us, &lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; thought this through and provides a solution.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; is a Drupal contributed module with releases for Drupal 6, 7, and 8.  From the project description:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Composer Manager allows each contributed module to ship with its own composer.json file, listing the module-specific requirements. It then merges the requirements of all found modules into the consolidated composer.json file, consumed by composer install/update. This results in a single vendor directory shared across all modules which prevents code duplication and version mismatches.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;composer-manager-overview&quot;&gt;Composer Manager Overview&lt;/h2&gt;
&lt;p&gt;Composer Manager addressed our concerns in an easy and well thought out way. And while the module provides excellent documentation, I’ll briefly describe some of the features:&lt;/p&gt;

&lt;p&gt;The consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; is created at &lt;code class=&quot;highlighter-rouge&quot;&gt;sites/default/files/composer/composer.json&lt;/code&gt; by default. Meanwhile, the dependencies are installed to &lt;code class=&quot;highlighter-rouge&quot;&gt;sites/all/vendor&lt;/code&gt; by default. Both of these locations are configurable and can easily be changed.&lt;/p&gt;

&lt;p&gt;By default, if a module includes a &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file and is enabled or disabled via Drush, then Composer Manager automatically&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Adds or removes the module’s dependencies to or from the consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file.&lt;/li&gt;
  &lt;li&gt;Installs and updates the required dependencies in the &lt;code class=&quot;highlighter-rouge&quot;&gt;vendor&lt;/code&gt; directory.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can also use Drush to manually update the consolidated &lt;code class=&quot;highlighter-rouge&quot;&gt;composer.json&lt;/code&gt; file via &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-json-rebuild&lt;/code&gt;, and manually install or update dependencies via &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-manager [COMMAND] [OPTIONS]&lt;/code&gt;. For example &lt;code class=&quot;highlighter-rouge&quot;&gt;drush composer-manager update&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;We at Savas Labs love any tool or module that makes our development easier, and &lt;a href=&quot;https://www.drupal.org/project/composer_manager&quot;&gt;Composer Manager&lt;/a&gt; fits that bill. As Drupal modules start making more and more use of libraries from the greater PHP community, we expect to be using Composer Manager on more and more projects.&lt;/p&gt;

    &lt;hr&gt;

    
      &lt;div class=&quot;post-comments&quot;&gt;
  
    &lt;div class=&quot;expander&quot;&gt;
      &lt;a href=&quot;javascript:void(0)&quot; id=&quot;js-expander-trigger&quot; class=&quot;expander-trigger expander-hidden&quot;&gt;Comments!&lt;/a&gt;
      &lt;div id=&quot;js-expander-content&quot; class=&quot;expander-content&quot;&gt;
        &lt;!-- If there are existing comments, output them here. --&gt;
        &lt;div id=&quot;post-comments&quot; class=&quot;post-comments&quot;&gt;&lt;/div&gt;
        &lt;!-- New comment form --&gt;
        &lt;form id=&quot;comment-form&quot;&gt;
          &lt;h4&gt;Leave a comment&lt;/h4&gt;
          &lt;div class=&quot;comment-name&quot;&gt;
            &lt;p&gt;Name&lt;/p&gt; &lt;input type=&#39;text&#39; name=&#39;name&#39; id=&#39;name&#39; required /&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;div class=&quot;comment-email&quot;&gt;
            &lt;p&gt;Email&lt;/p&gt; &lt;input type=&#39;email&#39; name=&#39;email&#39; id=&#39;email&#39; required /&gt;
            &lt;p class=&quot;email-disclaimer&quot;&gt;Savas Labs will never sell your email address or spam you.&lt;/p&gt;&lt;br&gt;
          &lt;/div&gt;

          &lt;p&gt;Comment&lt;/p&gt;
          &lt;textarea name=&#39;comment&#39; id=&#39;comment&#39; required&gt;&lt;/textarea&gt;
          &lt;p class=&quot;hint below-textarea&quot;&gt;Plain text format only please.&lt;/p&gt;

          &lt;input type=&#39;hidden&#39; name=&#39;slug&#39; id=&#39;slug&#39; value=&#39;/2015/10/15/composing-with-composer-manager.html&#39; /&gt;
          &lt;input type=&#39;text&#39; name=&#39;url&#39; id=&#39;url&#39; /&gt;

          &lt;div class=&#39;are-you-human&#39;&gt;
            &lt;div class=&#39;are-you-human-owl&#39;&gt;
              &lt;img src=&quot;/assets/img/icons-and-logos/owl.png&quot; alt=&quot;Savas Labs logo&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&#39;are-you-human-field&#39;&gt;
              &lt;p&gt;What type of animal is the Savas Labs logo?&lt;/p&gt;
              &lt;input type=&#39;text&#39; name=&#39;nocaptcha&#39; id=&#39;nocaptcha&#39; class=&#39;nocaptcha&#39;&gt;
              &lt;p class=&quot;hint&quot;&gt;Hint: 3 letters long, starts with an &#39;o&#39; and ends with an &#39;l&#39;.&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;input type=&#39;submit&#39; value=&#39;Submit&#39; id=&#39;submit&#39; class=&quot;submit-comment&quot;/&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  
  &lt;hr&gt;
&lt;/div&gt;

    
    
      &lt;div class=&quot;post-bottom&quot;&gt;
  &lt;div class=&quot;post-meta&quot;&gt;
    &lt;h4&gt;About the author&lt;/h4&gt;
    
      &lt;a href=&quot;/team/dan-murphy&quot;&gt;
        &lt;picture&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-576by524-633aa3.jpg&quot; media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot;&gt;
    &lt;source srcset=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg&quot;&gt;
    &lt;img src=&quot;http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg&quot; class=&quot;image--team-post-meta&quot; itemprop=&quot;image&quot; alt=&quot;Dan Murphy&quot; &gt;
  &lt;/picture&gt;

      &lt;/a&gt;
      &lt;p class=&quot;post-author-desc&quot;&gt;Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.&lt;/p&gt;
    
  &lt;/div&gt;
    &lt;!-- Once we have more content, change this to posts related by tag --&gt;
  &lt;div class=&quot;post-related flex-container&quot;&gt;
    &lt;h4&gt;Recent posts by Savas Labs&lt;/h4&gt;
    &lt;div class=&quot;cards&quot;&gt;
      
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/09/23/supercharged-seo-with-drupal-8.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Supercharged SEO with Drupal 8
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Sep 23, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/08/29/internship-thoughts.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  A Savas Labs Internship
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Aug 29, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;What it’s like to learn at Savas Labs.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
        
          &lt;div class=&quot;card&quot;&gt;
            &lt;a href=&quot;/2016/06/22/user-testing.html&quot;&gt;
              &lt;div class=&quot;card-header&quot;&gt;
                  Usability Testing - Our Process and Favorite Practices
              &lt;/div&gt;
              &lt;div class=&quot;card-copy&quot;&gt;
                &lt;p&gt;Jun 22, 2016&lt;/p&gt;
                
                &lt;p&gt;&lt;p&gt;Our approach to designing, conducting, and learning from user testing and other analyses.&lt;/p&gt;
&lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/div&gt;
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

    
    &lt;div class=&quot;previous-next-links&quot;&gt;
  &lt;div class=&quot;next&quot;&gt;
    
      &lt;a href=&quot;/2015/10/27/all-things-open-conference.html&quot;&gt;&lt;i class=&quot;fa fa-long-arrow-left &quot;&gt;&lt;/i&gt; All Things Open Conference Recap&lt;/a&gt;
    
  &lt;/div&gt;
  &lt;div class=&quot;previous&quot;&gt;
    
      &lt;a href=&quot;/2015/09/03/sassy-drupal-theming-part-3.html&quot;&gt; Sassy Drupal theming: Best practices &lt;i class=&quot;fa fa-long-arrow-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    
  &lt;/div&gt;
&lt;/div&gt;


  &lt;/article&gt;

&lt;/div&gt;
",
    "sourceOrganization": "Savas Labs",
    "inLanguage": "en-US",
    "dateCreated": "2015-10-15 00:00:00 +0000",
    "datePublished": "2015-10-15 00:00:00 +0000",
    "url": "http://savaslabs.com/2015/10/15/composing-with-composer-manager.html"
  }
</script>

  <script>
  // TODO: URL isn't quite working.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61514316-1', 'auto');
  ga('send', 'pageview');

</script>

  
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">

    <!-- Savas Labs logo. -->
    <a href="/" class="logo">
        <img src="http://savaslabs.com/assets/img/logo.png" alt="Savas Labs logo">
    </a>

    <!-- Mobile menu button. -->
    <a href="/" id="js-mobile-menu" class="navigation-menu-button">MENU</a>

    <!-- Main menu. -->
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">

        <!-- Loop through nav items in config.yml. -->
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  more">
            <a href="javascript:void(0)">Who we are</a>

            <!-- If there are sub-links, create them. -->
            

              <ul class="submenu">
                

                  <!-- Assign active nav item class. -->
                  
                  

                  <li class="nav-link ">
                    <a href="/team">Team</a>
                  </li>
                

                  <!-- Assign active nav item class. -->
                  
                  

                  <li class="nav-link ">
                    <a href="/mission-and-values">Mission & values</a>
                  </li>
                
              </ul>
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/services">Services</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/work">Our work</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/blog">Blog</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        

          <!-- These variables will be used for special CSS classes. -->
          

          <!-- Assign active nav item class. -->
          

          <!-- Assign class for menu items with sub-links. -->
          

          <!-- Build links. -->
          <li class="nav-link  ">
            <a href="/contact">Contact</a>

            <!-- If there are sub-links, create them. -->
            
          </li>
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        


<div class="post">
  <header class="post-header">
    <h1 class="post-title">Composing with Composer Manager</h1>
    <p>By <a href="/team/dan-murphy">Dan Murphy</a></p>
    <p class="centerdot">&centerdot; </p>
    <p>Oct 15, 2015 </p><br>
    <i class="fa fa-tags"></i><p><a href="/blog/tag/drupal/">Drupal</a>, <a href="/blog/tag/composer/">Composer</a>, <a href="/blog/tag/module-development/">Module Development</a></p>
    
    <div><p><span id="comment-count"></span></p></div>
    
    
  </header>

  

  <article class="post-content">
    <h2 id="why-composer">Why Composer?</h2>
<p>We at Savas Labs love <a href="https://getcomposer.org/">Composer</a> and use it with many of our projects to help manage our automated testing dependencies.</p>

<p>For those not already familiar, <a href="https://getcomposer.org/">Composer</a> is a package manager for PHP. If you want to go further down the rabbit hole <a href="https://docs.oracle.com/javase/tutorial/java/concepts/package.html">“a package is a namespace that organizes a set of related classes and interfaces.”</a></p>

<p>Basically, Composer allows you to manage dependencies on a per project basis. Those dependencies live within the project directory so that everything is encapsulated there.  And since you can specify package versions, different projects on your systems can depend on different versions. Composer also pulls in the dependencies of your project’s dependencies, keeping you out of <a href="https://en.wikipedia.org/wiki/Dependency_hell">‘dependency hell’</a>. You simply specify your projects dependencies in a <code class="highlighter-rouge">composer.json</code> file, then pull in all of your project’s dependencies into a <code class="highlighter-rouge">/vendor</code> directory on the command line via <code class="highlighter-rouge">composer install</code>. (You can also update your dependencies via <code class="highlighter-rouge">composer update</code>).</p>

<h2 id="composer-with-drupal-modules">Composer with Drupal Modules?</h2>
<p>But recently, one of our projects required a custom module that depended on a PHP package that expected to be installed via Composer.</p>

<p>While we were excited that we could use Composer to easily install the dependency, we hadn’t used Composer to manage dependencies within a Drupal module before, and this requirement raised a new concern: <strong>What if more than one module requires the same package?</strong> In that scenario, how do we avoid duplicate code, and more seriously, how do we avoid version conflicts?</p>

<h2 id="composer-manager-to-the-rescue">Composer Manager to the Rescue!</h2>
<p>Things get a little more complex when Drupal modules start specifying dependencies. But luckily for us, <a href="https://www.drupal.org/project/composer_manager">Composer Manager</a> thought this through and provides a solution.</p>

<p><a href="https://www.drupal.org/project/composer_manager">Composer Manager</a> is a Drupal contributed module with releases for Drupal 6, 7, and 8.  From the project description:</p>

<blockquote>
  <p>Composer Manager allows each contributed module to ship with its own composer.json file, listing the module-specific requirements. It then merges the requirements of all found modules into the consolidated composer.json file, consumed by composer install/update. This results in a single vendor directory shared across all modules which prevents code duplication and version mismatches.</p>
</blockquote>

<h2 id="composer-manager-overview">Composer Manager Overview</h2>
<p>Composer Manager addressed our concerns in an easy and well thought out way. And while the module provides excellent documentation, I’ll briefly describe some of the features:</p>

<p>The consolidated <code class="highlighter-rouge">composer.json</code> is created at <code class="highlighter-rouge">sites/default/files/composer/composer.json</code> by default. Meanwhile, the dependencies are installed to <code class="highlighter-rouge">sites/all/vendor</code> by default. Both of these locations are configurable and can easily be changed.</p>

<p>By default, if a module includes a <code class="highlighter-rouge">composer.json</code> file and is enabled or disabled via Drush, then Composer Manager automatically</p>

<ul>
  <li>Adds or removes the module’s dependencies to or from the consolidated <code class="highlighter-rouge">composer.json</code> file.</li>
  <li>Installs and updates the required dependencies in the <code class="highlighter-rouge">vendor</code> directory.</li>
</ul>

<p>You can also use Drush to manually update the consolidated <code class="highlighter-rouge">composer.json</code> file via <code class="highlighter-rouge">drush composer-json-rebuild</code>, and manually install or update dependencies via <code class="highlighter-rouge">drush composer-manager [COMMAND] [OPTIONS]</code>. For example <code class="highlighter-rouge">drush composer-manager update</code>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>We at Savas Labs love any tool or module that makes our development easier, and <a href="https://www.drupal.org/project/composer_manager">Composer Manager</a> fits that bill. As Drupal modules start making more and more use of libraries from the greater PHP community, we expect to be using Composer Manager on more and more projects.</p>

    <hr>

    
      <div class="post-comments">
  
    <div class="expander">
      <a href="javascript:void(0)" id="js-expander-trigger" class="expander-trigger expander-hidden">Comments!</a>
      <div id="js-expander-content" class="expander-content">
        <!-- If there are existing comments, output them here. -->
        <div id="post-comments" class="post-comments"></div>
        <!-- New comment form -->
        <form id="comment-form">
          <h4>Leave a comment</h4>
          <div class="comment-name">
            <p>Name</p> <input type='text' name='name' id='name' required /><br>
          </div>

          <div class="comment-email">
            <p>Email</p> <input type='email' name='email' id='email' required />
            <p class="email-disclaimer">Savas Labs will never sell your email address or spam you.</p><br>
          </div>

          <p>Comment</p>
          <textarea name='comment' id='comment' required></textarea>
          <p class="hint below-textarea">Plain text format only please.</p>

          <input type='hidden' name='slug' id='slug' value='/2015/10/15/composing-with-composer-manager.html' />
          <input type='text' name='url' id='url' />

          <div class='are-you-human'>
            <div class='are-you-human-owl'>
              <img src="/assets/img/icons-and-logos/owl.png" alt="Savas Labs logo">
            </div>
            <div class='are-you-human-field'>
              <p>What type of animal is the Savas Labs logo?</p>
              <input type='text' name='nocaptcha' id='nocaptcha' class='nocaptcha'>
              <p class="hint">Hint: 3 letters long, starts with an 'o' and ends with an 'l'.</p>
            </div>
          </div>

          <input type='submit' value='Submit' id='submit' class="submit-comment"/>
        </form>
      </div>
    </div>
  
  <hr>
</div>

    
    
      <div class="post-bottom">
  <div class="post-meta">
    <h4>About the author</h4>
    
      <a href="/team/dan-murphy">
        <picture>
    <source srcset="http://savaslabs.com/assets/processed-img/team/dan-murphy-576by524-633aa3.jpg" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
    <source srcset="http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg">
    <img src="http://savaslabs.com/assets/processed-img/team/dan-murphy-288by262-633aa3.jpg" class="image--team-post-meta" itemprop="image" alt="Dan Murphy" >
  </picture>

      </a>
      <p class="post-author-desc">Dan develops back-end solutions and front-end, responsive designs for Savas Labs clients.</p>
    
  </div>
    <!-- Once we have more content, change this to posts related by tag -->
  <div class="post-related flex-container">
    <h4>Recent posts by Savas Labs</h4>
    <div class="cards">
      
      
        
        
          <div class="card">
            <a href="/2016/09/23/supercharged-seo-with-drupal-8.html">
              <div class="card-header">
                  Supercharged SEO with Drupal 8
              </div>
              <div class="card-copy">
                <p>Sep 23, 2016</p>
                
                <p><p>SEO trends 2017 and Drupal 8 as the best option for your long-term marketing campaign.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
        
          <div class="card">
            <a href="/2016/08/29/internship-thoughts.html">
              <div class="card-header">
                  A Savas Labs Internship
              </div>
              <div class="card-copy">
                <p>Aug 29, 2016</p>
                
                <p><p>What it’s like to learn at Savas Labs.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
        
          <div class="card">
            <a href="/2016/06/22/user-testing.html">
              <div class="card-header">
                  Usability Testing - Our Process and Favorite Practices
              </div>
              <div class="card-copy">
                <p>Jun 22, 2016</p>
                
                <p><p>Our approach to designing, conducting, and learning from user testing and other analyses.</p>
</p>
              </div>
            </a>
          </div>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
</div>

    
    <div class="previous-next-links">
  <div class="next">
    
      <a href="/2015/10/27/all-things-open-conference.html"><i class="fa fa-long-arrow-left "></i> All Things Open Conference Recap</a>
    
  </div>
  <div class="previous">
    
      <a href="/2015/09/03/sassy-drupal-theming-part-3.html"> Sassy Drupal theming: Best practices <i class="fa fa-long-arrow-right"></i></a>
    
  </div>
</div>


  </article>

</div>

      </div>
    </div>

    <div class="contact-block">
  <div class="contact-block__items">
    <h3>Interested in working with us?</h3>
    <a href="/contact">Get in touch!</a>
  </div>
</div>
    <footer class="footer" role="contentinfo">
  <div class="footer-links">
    <ul>
      <li><h3>Location</h3></li>
      <li>Savas Labs<br />
          PMB 114<br />
          201 W Main Street, Suite 100<br />
          Durham, NC 27701<br /></li>
    </ul>
    <ul>
      <li><h3>Around the Web</h3></li>
      <ul>
        <li><a href="https://github.com/savaslabs"><span class="mega-octicon octicon-mark-github"></span></a></li>
        <li><a href="https://www.drupal.org/node/2466865"><i class="fa fa-drupal fa-lg fa-2x"></i></a></li>
        <li><a href="https://twitter.com/savas_labs"><i class="fa fa-twitter fa-lg fa-2x"></i></a></li>
        <li><a href="https://www.linkedin.com/company/savas-labs"><i class="fa fa-linkedin fa-lg fa-2x"></i></a></li>
      </ul>
    </ul>
    <ul>
      <li><h3>Contact</h3></li>
      <li><a href="mailto:info@savaslabs.com">info@savaslabs.com</a></li>
      <li>(919) 432-4660</li>
    </ul>
  </div>

</footer>

<div class="footer-copyright">
  <p>Copyright &copy; Savas Labs 2016</p>
</div>


  </body>

</html>
